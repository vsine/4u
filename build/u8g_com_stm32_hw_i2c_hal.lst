ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"u8g_com_stm32_hw_i2c_hal.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.u8g_Delay,"ax",%progbits
  22              		.align	2
  23              		.global	u8g_Delay
  24              		.thumb
  25              		.thumb_func
  27              	u8g_Delay:
  28              	.LFB130:
  29              		.file 1 "u8glib/u8g_com_stm32_hw_i2c_hal.c"
   1:u8glib/u8g_com_stm32_hw_i2c_hal.c **** #include "u8g.h"
   2:u8glib/u8g_com_stm32_hw_i2c_hal.c **** #include "main.h"
   3:u8glib/u8g_com_stm32_hw_i2c_hal.c **** extern I2C_HandleTypeDef hi2c1;
   4:u8glib/u8g_com_stm32_hw_i2c_hal.c ****  static uint8_t control = 0;  
   5:u8glib/u8g_com_stm32_hw_i2c_hal.c **** uint8_t buffer[1000]; 
   6:u8glib/u8g_com_stm32_hw_i2c_hal.c **** void u8g_Delay(uint16_t val)
   7:u8glib/u8g_com_stm32_hw_i2c_hal.c ****  {
  30              		.loc 1 7 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              	.LVL0:
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
   8:u8glib/u8g_com_stm32_hw_i2c_hal.c ****    HAL_Delay(val);
  40              		.loc 1 8 0
  41 0002 FFF7FEFF 		bl	HAL_Delay
  42              	.LVL1:
  43 0006 08BD     		pop	{r3, pc}
  44              		.cfi_endproc
  45              	.LFE130:
  47              		.section	.text.u8g_MicroDelay,"ax",%progbits
  48              		.align	2
  49              		.global	u8g_MicroDelay
  50              		.thumb
  51              		.thumb_func
ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 2


  53              	u8g_MicroDelay:
  54              	.LFB131:
   9:u8glib/u8g_com_stm32_hw_i2c_hal.c ****  }
  10:u8glib/u8g_com_stm32_hw_i2c_hal.c ****  
  11:u8glib/u8g_com_stm32_hw_i2c_hal.c ****  void u8g_MicroDelay()
  12:u8glib/u8g_com_stm32_hw_i2c_hal.c **** {
  55              		.loc 1 12 0
  56              		.cfi_startproc
  57              		@ args = 0, pretend = 0, frame = 0
  58              		@ frame_needed = 0, uses_anonymous_args = 0
  59              		@ link register save eliminated.
  60              	.LVL2:
  13:u8glib/u8g_com_stm32_hw_i2c_hal.c **** int i;  
  14:u8glib/u8g_com_stm32_hw_i2c_hal.c ****   for (i = 0; i < 1000; i++);  
  61              		.loc 1 14 0
  62 0000 0023     		movs	r3, #0
  63 0002 00E0     		b	.L4
  64              	.LVL3:
  65              	.L5:
  66              		.loc 1 14 0 is_stmt 0 discriminator 3
  67 0004 0133     		adds	r3, r3, #1
  68              	.LVL4:
  69              	.L4:
  70              		.loc 1 14 0 discriminator 1
  71 0006 B3F57A7F 		cmp	r3, #1000
  72 000a FBDB     		blt	.L5
  15:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  16:u8glib/u8g_com_stm32_hw_i2c_hal.c ****  }
  73              		.loc 1 16 0 is_stmt 1
  74 000c 7047     		bx	lr
  75              		.cfi_endproc
  76              	.LFE131:
  78 000e 00BF     		.section	.text.u8g_10MicroDelay,"ax",%progbits
  79              		.align	2
  80              		.global	u8g_10MicroDelay
  81              		.thumb
  82              		.thumb_func
  84              	u8g_10MicroDelay:
  85              	.LFB132:
  17:u8glib/u8g_com_stm32_hw_i2c_hal.c **** void u8g_10MicroDelay()
  18:u8glib/u8g_com_stm32_hw_i2c_hal.c **** {
  86              		.loc 1 18 0
  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		@ link register save eliminated.
  91              	.LVL5:
  19:u8glib/u8g_com_stm32_hw_i2c_hal.c ****      int i;  
  20:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       for (i = 0; i < 10000; i++);  
  92              		.loc 1 20 0
  93 0000 0023     		movs	r3, #0
  94 0002 00E0     		b	.L7
  95              	.LVL6:
  96              	.L8:
  97              		.loc 1 20 0 is_stmt 0 discriminator 3
  98 0004 0133     		adds	r3, r3, #1
  99              	.LVL7:
ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 3


 100              	.L7:
 101              		.loc 1 20 0 discriminator 1
 102 0006 42F20F72 		movw	r2, #9999
 103 000a 9342     		cmp	r3, r2
 104 000c FADD     		ble	.L8
  21:u8glib/u8g_com_stm32_hw_i2c_hal.c **** }
 105              		.loc 1 21 0 is_stmt 1
 106 000e 7047     		bx	lr
 107              		.cfi_endproc
 108              	.LFE132:
 110              		.section	.text.u8g_com_hw_i2c_fn,"ax",%progbits
 111              		.align	2
 112              		.global	u8g_com_hw_i2c_fn
 113              		.thumb
 114              		.thumb_func
 116              	u8g_com_hw_i2c_fn:
 117              	.LFB133:
  22:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  23:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  24:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  25:u8glib/u8g_com_stm32_hw_i2c_hal.c **** uint8_t u8g_com_hw_i2c_fn(u8g_t *u8g, uint8_t msg, uint8_t arg_val, void *arg_ptr)
  26:u8glib/u8g_com_stm32_hw_i2c_hal.c **** {
 118              		.loc 1 26 0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122              	.LVL8:
 123 0000 10B5     		push	{r4, lr}
 124              	.LCFI1:
 125              		.cfi_def_cfa_offset 8
 126              		.cfi_offset 4, -8
 127              		.cfi_offset 14, -4
 128 0002 82B0     		sub	sp, sp, #8
 129              	.LCFI2:
 130              		.cfi_def_cfa_offset 16
  27:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  28:u8glib/u8g_com_stm32_hw_i2c_hal.c ****   switch(msg)
 131              		.loc 1 28 0
 132 0004 0239     		subs	r1, r1, #2
 133              	.LVL9:
 134 0006 0529     		cmp	r1, #5
 135 0008 31D8     		bhi	.L10
 136 000a DFE801F0 		tbb	[pc, r1]
 137              	.LVL10:
 138              	.L12:
 139 000e 03       		.byte	(.L11-.L12)/2
 140 000f 30       		.byte	(.L10-.L12)/2
 141 0010 30       		.byte	(.L10-.L12)/2
 142 0011 0B       		.byte	(.L13-.L12)/2
 143 0012 1A       		.byte	(.L14-.L12)/2
 144 0013 1A       		.byte	(.L14-.L12)/2
 145              		.p2align 1
 146              	.L11:
  29:u8glib/u8g_com_stm32_hw_i2c_hal.c ****   {
  30:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_INIT:
  31:u8glib/u8g_com_stm32_hw_i2c_hal.c ****         u8g_MicroDelay();  
  32:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       break;
ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 4


  33:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_STOP:
  34:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  35:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       break;
  36:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_ADDRESS:
  37:u8glib/u8g_com_stm32_hw_i2c_hal.c ****         u8g_10MicroDelay();  
  38:u8glib/u8g_com_stm32_hw_i2c_hal.c ****         if (arg_val == 0)  
 147              		.loc 1 38 0
 148 0014 12B9     		cbnz	r2, .L15
  39:u8glib/u8g_com_stm32_hw_i2c_hal.c ****          control = 0;  
 149              		.loc 1 39 0
 150 0016 174B     		ldr	r3, .L19
 151              	.LVL11:
 152 0018 1A70     		strb	r2, [r3]
 153 001a 28E0     		b	.L10
 154              	.LVL12:
 155              	.L15:
  40:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     else  
  41:u8glib/u8g_com_stm32_hw_i2c_hal.c ****          control = 0x40;  
 156              		.loc 1 41 0
 157 001c 4022     		movs	r2, #64
 158              	.LVL13:
 159 001e 154B     		ldr	r3, .L19
 160              	.LVL14:
 161 0020 1A70     		strb	r2, [r3]
 162 0022 24E0     		b	.L10
 163              	.LVL15:
 164              	.L13:
  42:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     break;
  43:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  44:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_CHIP_SELECT:
  45:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       /* arg_val contains the chip number, which should be enabled */
  46:u8glib/u8g_com_stm32_hw_i2c_hal.c ****      
  47:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       
  48:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       
  49:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       break;
  50:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  51:u8glib/u8g_com_stm32_hw_i2c_hal.c **** 
  52:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_WRITE_BYTE:{
  53:u8glib/u8g_com_stm32_hw_i2c_hal.c ****      
  54:u8glib/u8g_com_stm32_hw_i2c_hal.c ****         buffer[0] = control;  
 165              		.loc 1 54 0
 166 0024 1449     		ldr	r1, .L19+4
 167 0026 134B     		ldr	r3, .L19
 168              	.LVL16:
 169 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 170 002a 0B70     		strb	r3, [r1]
  55:u8glib/u8g_com_stm32_hw_i2c_hal.c ****         buffer[1] = arg_val;  
 171              		.loc 1 55 0
 172 002c 4A70     		strb	r2, [r1, #1]
  56:u8glib/u8g_com_stm32_hw_i2c_hal.c ****         HAL_I2C_Master_Transmit(&hi2c1, 0x78, (uint8_t*) buffer, 2, 1000);  
 173              		.loc 1 56 0
 174 002e 4FF47A73 		mov	r3, #1000
 175 0032 0093     		str	r3, [sp]
 176 0034 0223     		movs	r3, #2
 177 0036 0A46     		mov	r2, r1
 178              	.LVL17:
 179 0038 7821     		movs	r1, #120
ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 5


 180 003a 1048     		ldr	r0, .L19+8
 181 003c FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 182              	.LVL18:
  57:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     }
  58:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       break;
 183              		.loc 1 58 0
 184 0040 15E0     		b	.L10
 185              	.LVL19:
 186              	.L14:
 187              	.LBB2:
  59:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_WRITE_SEQ:
  60:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     case U8G_COM_MSG_WRITE_SEQ_P:
  61:u8glib/u8g_com_stm32_hw_i2c_hal.c ****     {
  62:u8glib/u8g_com_stm32_hw_i2c_hal.c ****        
  63:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            uint8_t *ptr = arg_ptr;  
  64:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            buffer[0] = control;  
 188              		.loc 1 64 0
 189 0042 0C49     		ldr	r1, .L19
 190 0044 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 191 0046 0C49     		ldr	r1, .L19+4
 192 0048 0870     		strb	r0, [r1]
 193              	.LVL20:
 194              	.LBB3:
  65:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            for (int i = 1; i <= arg_val; i++)  
 195              		.loc 1 65 0
 196 004a 0121     		movs	r1, #1
 197 004c 04E0     		b	.L16
 198              	.LVL21:
 199              	.L17:
  66:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            {  
  67:u8glib/u8g_com_stm32_hw_i2c_hal.c ****                 buffer[i] = *(ptr++);  
 200              		.loc 1 67 0 discriminator 3
 201 004e 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 202 0050 0948     		ldr	r0, .L19+4
 203 0052 4454     		strb	r4, [r0, r1]
  65:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            for (int i = 1; i <= arg_val; i++)  
 204              		.loc 1 65 0 discriminator 3
 205 0054 0131     		adds	r1, r1, #1
 206              	.LVL22:
 207              		.loc 1 67 0 discriminator 3
 208 0056 0133     		adds	r3, r3, #1
 209              	.LVL23:
 210              	.L16:
  65:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            for (int i = 1; i <= arg_val; i++)  
 211              		.loc 1 65 0 discriminator 1
 212 0058 9142     		cmp	r1, r2
 213 005a F8DD     		ble	.L17
 214              	.LBE3:
  68:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            }  
  69:u8glib/u8g_com_stm32_hw_i2c_hal.c ****            HAL_I2C_Master_Transmit(&hi2c1, 0x78, (uint8_t *)buffer, arg_val, 1000);  
 215              		.loc 1 69 0
 216 005c 4FF47A73 		mov	r3, #1000
 217              	.LVL24:
 218 0060 0093     		str	r3, [sp]
 219 0062 1346     		mov	r3, r2
 220 0064 044A     		ldr	r2, .L19+4
 221              	.LVL25:
ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 6


 222 0066 7821     		movs	r1, #120
 223              	.LVL26:
 224 0068 0448     		ldr	r0, .L19+8
 225 006a FFF7FEFF 		bl	HAL_I2C_Master_Transmit
 226              	.LVL27:
 227              	.L10:
 228              	.LBE2:
  70:u8glib/u8g_com_stm32_hw_i2c_hal.c ****    
  71:u8glib/u8g_com_stm32_hw_i2c_hal.c ****    }
  72:u8glib/u8g_com_stm32_hw_i2c_hal.c ****       break;
  73:u8glib/u8g_com_stm32_hw_i2c_hal.c ****   }
  74:u8glib/u8g_com_stm32_hw_i2c_hal.c ****   return 1;
  75:u8glib/u8g_com_stm32_hw_i2c_hal.c **** }...
 229              		.loc 1 75 0
 230 006e 0120     		movs	r0, #1
 231 0070 02B0     		add	sp, sp, #8
 232              	.LCFI3:
 233              		.cfi_def_cfa_offset 8
 234              		@ sp needed
 235 0072 10BD     		pop	{r4, pc}
 236              	.L20:
 237              		.align	2
 238              	.L19:
 239 0074 00000000 		.word	.LANCHOR0
 240 0078 00000000 		.word	buffer
 241 007c 00000000 		.word	hi2c1
 242              		.cfi_endproc
 243              	.LFE133:
 245              		.comm	buffer,1000,4
 246              		.section	.bss.control,"aw",%nobits
 247              		.set	.LANCHOR0,. + 0
 250              	control:
 251 0000 00       		.space	1
 252              		.text
 253              	.Letext0:
 254              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\5.4 2016q3\\arm-none-eabi\\include\\mach
 255              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\5.4 2016q3\\arm-none-eabi\\include\\sys\
 256              		.file 4 "u8glib/u8g.h"
 257              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 258              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 259              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 260              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 261              		.file 9 "Drivers/CMSIS/Include/core_cm4.h"
 262              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  C:\Users\master\AppData\Local\Temp\cchAfT3y.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 u8g_com_stm32_hw_i2c_hal.c
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:22     .text.u8g_Delay:00000000 $t
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:27     .text.u8g_Delay:00000000 u8g_Delay
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:48     .text.u8g_MicroDelay:00000000 $t
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:53     .text.u8g_MicroDelay:00000000 u8g_MicroDelay
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:79     .text.u8g_10MicroDelay:00000000 $t
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:84     .text.u8g_10MicroDelay:00000000 u8g_10MicroDelay
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:111    .text.u8g_com_hw_i2c_fn:00000000 $t
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:116    .text.u8g_com_hw_i2c_fn:00000000 u8g_com_hw_i2c_fn
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:139    .text.u8g_com_hw_i2c_fn:0000000e $d
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:145    .text.u8g_com_hw_i2c_fn:00000014 $t
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:239    .text.u8g_com_hw_i2c_fn:00000074 $d
                            *COM*:000003e8 buffer
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:250    .bss.control:00000000 control
C:\Users\master\AppData\Local\Temp\cchAfT3y.s:251    .bss.control:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
HAL_Delay
HAL_I2C_Master_Transmit
hi2c1
