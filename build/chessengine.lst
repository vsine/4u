ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"chessengine.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.cu_gpos2bpos,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	cu_gpos2bpos:
  27              	.LFB8:
  28              		.file 1 "u8glib/chessengine.c"
   1:u8glib/chessengine.c **** /*
   2:u8glib/chessengine.c ****   chessengine.c
   3:u8glib/chessengine.c ****   
   4:u8glib/chessengine.c ****   "Little Rook Chess" (lrc)
   5:u8glib/chessengine.c **** 
   6:u8glib/chessengine.c ****   Port to u8g library
   7:u8glib/chessengine.c **** 
   8:u8glib/chessengine.c ****   chess for embedded 8-Bit controllers
   9:u8glib/chessengine.c **** 
  10:u8glib/chessengine.c ****   Copyright (c) 2012, olikraus@gmail.com
  11:u8glib/chessengine.c ****   All rights reserved.
  12:u8glib/chessengine.c **** 
  13:u8glib/chessengine.c ****   Redistribution and use in source and binary forms, with or without modification, 
  14:u8glib/chessengine.c ****   are permitted provided that the following conditions are met:
  15:u8glib/chessengine.c **** 
  16:u8glib/chessengine.c ****   * Redistributions of source code must retain the above copyright notice, this list 
  17:u8glib/chessengine.c ****     of conditions and the following disclaimer.
  18:u8glib/chessengine.c ****     
  19:u8glib/chessengine.c ****   * Redistributions in binary form must reproduce the above copyright notice, this 
  20:u8glib/chessengine.c ****     list of conditions and the following disclaimer in the documentation and/or other 
  21:u8glib/chessengine.c ****     materials provided with the distribution.
  22:u8glib/chessengine.c **** 
  23:u8glib/chessengine.c ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND 
  24:u8glib/chessengine.c ****   CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, 
  25:u8glib/chessengine.c ****   INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
  26:u8glib/chessengine.c ****   MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE 
  27:u8glib/chessengine.c ****   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
  28:u8glib/chessengine.c ****   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
  29:u8glib/chessengine.c ****   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT 
  30:u8glib/chessengine.c ****   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; 
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 2


  31:u8glib/chessengine.c ****   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER 
  32:u8glib/chessengine.c ****   CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, 
  33:u8glib/chessengine.c ****   STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  34:u8glib/chessengine.c ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF 
  35:u8glib/chessengine.c ****   ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  
  36:u8glib/chessengine.c **** 
  37:u8glib/chessengine.c ****   Note:
  38:u8glib/chessengine.c ****     UNIX_MAIN --> unix console executable
  39:u8glib/chessengine.c **** 
  40:u8glib/chessengine.c ****   Current Rule Limitation
  41:u8glib/chessengine.c ****     - no minor promotion, only "Queening" of the pawn
  42:u8glib/chessengine.c ****     - threefold repetition is not detected (same board situation appears three times)
  43:u8glib/chessengine.c **** 	Note: Could be implemented, but requires tracking of the complete game
  44:u8glib/chessengine.c ****     - Fifty-move rule is not checked (no pawn move, no capture within last 50 moves)
  45:u8glib/chessengine.c **** 	
  46:u8glib/chessengine.c ****   Words
  47:u8glib/chessengine.c ****     Ply		a half move
  48:u8glib/chessengine.c ****     
  49:u8glib/chessengine.c ****   General Links
  50:u8glib/chessengine.c ****     http://chessprogramming.wikispaces.com/
  51:u8glib/chessengine.c **** 
  52:u8glib/chessengine.c ****   Arduino specific
  53:u8glib/chessengine.c ****     http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1260055596
  54:u8glib/chessengine.c ****     
  55:u8glib/chessengine.c ****   Prefixes  
  56:u8glib/chessengine.c ****     chess_		Generic Chess Application Interface
  57:u8glib/chessengine.c ****     ce_		Chess engine, used internally, these function should not be called directly
  58:u8glib/chessengine.c ****     cu_		Chess utility function
  59:u8glib/chessengine.c ****     stack_		Internal function for stack handling
  60:u8glib/chessengine.c **** 
  61:u8glib/chessengine.c ****   Issues
  62:u8glib/chessengine.c ****     10.01.2011
  63:u8glib/chessengine.c ****       - castling to the right does not move the rook
  64:u8glib/chessengine.c **** 	  --> done
  65:u8glib/chessengine.c ****       - castling to the left: King can only move two squares
  66:u8glib/chessengine.c **** 	  --> done
  67:u8glib/chessengine.c ****       
  68:u8glib/chessengine.c ****     11.01.2011	
  69:u8glib/chessengine.c ****       Next Steps:
  70:u8glib/chessengine.c **** 	- replace stack_NextCurrentPos with cu_NextPos, cleanup code according to the loop variable
  71:u8glib/chessengine.c **** 	    --> done
  72:u8glib/chessengine.c **** 	- Castling: Need to check for fields under attack
  73:u8glib/chessengine.c **** 	    --> done
  74:u8glib/chessengine.c **** 	
  75:u8glib/chessengine.c **** 	- Check for WIN / LOOSE situation, perhaps call ce_Eval() once on the top-level board setup
  76:u8glib/chessengine.c **** 	    just after the real move
  77:u8glib/chessengine.c **** 	- cleanup cu_Move
  78:u8glib/chessengine.c **** 	    --> almost done
  79:u8glib/chessengine.c **** 	- add some heuristics to the eval procedure
  80:u8glib/chessengine.c **** 	- add right side menu
  81:u8glib/chessengine.c **** 	  --> done
  82:u8glib/chessengine.c **** 	- clean up chess_ManualMove
  83:u8glib/chessengine.c **** 	  --> done
  84:u8glib/chessengine.c **** 	- finish menu (consider is_game_end, undo move)
  85:u8glib/chessengine.c ****         - end condition: if KING is under attack and if KING can not move to a field which is under
  86:u8glib/chessengine.c **** 	      then the game is lost. What will be returned by the Eval procedure? is it -INF?
  87:u8glib/chessengine.c **** 	    --> finished
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 3


  88:u8glib/chessengine.c **** 	    
  89:u8glib/chessengine.c **** 	- reduce the use of variable color, all should be reduced to board_orientation and ply&1
  90:u8glib/chessengine.c **** 	
  91:u8glib/chessengine.c **** 	- chess_GetNextMarked shoud make use of cu_NextPos
  92:u8glib/chessengine.c **** 	    --> done
  93:u8glib/chessengine.c **** 	- chess_ManualMove: again cleanup, solve draw issue (KING is not in check and no legal moves are a
  94:u8glib/chessengine.c **** 	    --> done
  95:u8glib/chessengine.c ****     22.01.2011
  96:u8glib/chessengine.c **** 	- simplify eval_t ce_Eval(void)
  97:u8glib/chessengine.c **** 	- position eval does not work, still moves side pawn :-(
  98:u8glib/chessengine.c **** 	      maybe because all pieces are considered
  99:u8glib/chessengine.c **** 	    --> done
 100:u8glib/chessengine.c **** 
 101:u8glib/chessengine.c **** */
 102:u8glib/chessengine.c **** 
 103:u8glib/chessengine.c **** #include "u8g.h"
 104:u8glib/chessengine.c **** 
 105:u8glib/chessengine.c **** //#ifndef __unix__
 106:u8glib/chessengine.c **** //#else
 107:u8glib/chessengine.c **** //#include <assert.h>
 108:u8glib/chessengine.c **** //#define U8G_NOINLINE
 109:u8glib/chessengine.c **** //#endif
 110:u8glib/chessengine.c **** 
 111:u8glib/chessengine.c **** /*
 112:u8glib/chessengine.c **** SAN identifies each piece by a single upper case letter.  The standard English
 113:u8glib/chessengine.c **** values: pawn = "P", knight = "N", bishop = "B", rook = "R", queen = "Q", and
 114:u8glib/chessengine.c **** king = "K".
 115:u8glib/chessengine.c **** */
 116:u8glib/chessengine.c **** 
 117:u8glib/chessengine.c **** /* numbers for the various pieces */
 118:u8glib/chessengine.c **** #define PIECE_NONE	0
 119:u8glib/chessengine.c **** #define PIECE_PAWN 	1
 120:u8glib/chessengine.c **** #define PIECE_KNIGHT  	2
 121:u8glib/chessengine.c **** #define PIECE_BISHOP 	3
 122:u8glib/chessengine.c **** #define PIECE_ROOK	4
 123:u8glib/chessengine.c **** #define PIECE_QUEEN 	5
 124:u8glib/chessengine.c **** #define PIECE_KING		6
 125:u8glib/chessengine.c **** 
 126:u8glib/chessengine.c **** /* color definitions */
 127:u8glib/chessengine.c **** #define COLOR_WHITE	0
 128:u8glib/chessengine.c **** #define COLOR_BLACK	1
 129:u8glib/chessengine.c **** 
 130:u8glib/chessengine.c **** /* a mask, which includes COLOR and PIECE number */
 131:u8glib/chessengine.c **** #define COLOR_PIECE_MASK 0x01f
 132:u8glib/chessengine.c **** 
 133:u8glib/chessengine.c **** #define CP_MARK_MASK 0x20
 134:u8glib/chessengine.c **** 
 135:u8glib/chessengine.c **** #define ILLEGAL_POSITION 255
 136:u8glib/chessengine.c **** 
 137:u8glib/chessengine.c **** /* This is the build in upper limit of the search stack */
 138:u8glib/chessengine.c **** /* This value defines the amount of memory allocated for the search stack */
 139:u8glib/chessengine.c **** /* The search depth of this chess engine can never exceed this value */
 140:u8glib/chessengine.c **** #define STACK_MAX_SIZE 5
 141:u8glib/chessengine.c **** 
 142:u8glib/chessengine.c **** /* chess half move stack: twice the number of undo's, a user can do */ 
 143:u8glib/chessengine.c **** #define CHM_USER_SIZE 6
 144:u8glib/chessengine.c **** 
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 4


 145:u8glib/chessengine.c **** /* the CHM_LIST_SIZE must be larger than the maximum search depth */
 146:u8glib/chessengine.c **** /* the overall size of ste half move stack */
 147:u8glib/chessengine.c **** #define CHM_LIST_SIZE (STACK_MAX_SIZE+CHM_USER_SIZE+2)
 148:u8glib/chessengine.c **** 
 149:u8glib/chessengine.c **** typedef int16_t eval_t;	/* a variable type to store results from the evaluation */ 
 150:u8glib/chessengine.c **** //#define EVAL_T_LOST -32768
 151:u8glib/chessengine.c **** #define EVAL_T_MIN -32767
 152:u8glib/chessengine.c **** #define EVAL_T_MAX 32767
 153:u8glib/chessengine.c **** //#define EVAL_T_WIN 32767
 154:u8glib/chessengine.c **** 
 155:u8glib/chessengine.c **** /* for maintainance of our own stack: this is the definition of one element on the stack */
 156:u8glib/chessengine.c **** struct _stack_element_struct
 157:u8glib/chessengine.c **** {
 158:u8glib/chessengine.c ****   /* the current source position which is investigated */
 159:u8glib/chessengine.c ****   uint8_t current_pos;
 160:u8glib/chessengine.c ****   uint8_t current_cp;
 161:u8glib/chessengine.c ****   uint8_t current_color;	/* COLOR_WHITE or COLOR_BLACK: must be predefines */
 162:u8glib/chessengine.c ****   
 163:u8glib/chessengine.c ****   /* the move which belongs to that value, both values are game positions */
 164:u8glib/chessengine.c ****   uint8_t best_from_pos;
 165:u8glib/chessengine.c ****   uint8_t best_to_pos;
 166:u8glib/chessengine.c ****   /* the best value, which has been dicovered so far */
 167:u8glib/chessengine.c ****   eval_t best_eval;
 168:u8glib/chessengine.c **** };
 169:u8glib/chessengine.c **** typedef struct _stack_element_struct stack_element_t;
 170:u8glib/chessengine.c **** typedef struct _stack_element_struct *stack_element_p;
 171:u8glib/chessengine.c **** 
 172:u8glib/chessengine.c **** /* chess half move history */
 173:u8glib/chessengine.c **** struct _chm_struct
 174:u8glib/chessengine.c **** {
 175:u8glib/chessengine.c ****   uint8_t main_cp;		/* the main piece, which is moved */
 176:u8glib/chessengine.c ****   uint8_t main_src;		/* the source position of the main piece */
 177:u8glib/chessengine.c ****   uint8_t main_dest; 	/* the destination of the main piece */
 178:u8glib/chessengine.c ****   
 179:u8glib/chessengine.c ****   uint8_t other_cp;		/* another piece: the captured one, the ROOK in case of castling or PIECE_NONE
 180:u8glib/chessengine.c ****   uint8_t other_src;		/* the delete position of other_cp. Often identical to main_dest except for e
 181:u8glib/chessengine.c ****   uint8_t other_dest;		/* only used for castling: ROOK destination pos */
 182:u8glib/chessengine.c ****   
 183:u8glib/chessengine.c ****   /* the position of the last pawn, which did a double move forward */
 184:u8glib/chessengine.c ****   /* this is required to check en passant conditions */
 185:u8glib/chessengine.c ****   /* this array can be indexed by the color of the current player */
 186:u8glib/chessengine.c ****   /* this is the condition BEFORE the move was done */
 187:u8glib/chessengine.c ****   uint8_t pawn_dbl_move[2];
 188:u8glib/chessengine.c ****   
 189:u8glib/chessengine.c ****   /* flags for the movement of rook and king; required for castling */
 190:u8glib/chessengine.c ****   /* a 1 means: castling is (still) possible */
 191:u8glib/chessengine.c ****   /* a 0 means: castling not possible */
 192:u8glib/chessengine.c ****   /*  bit 0 left side white */
 193:u8glib/chessengine.c ****   /*  bit 1 right side white */
 194:u8glib/chessengine.c ****   /*  bit 2 left side black */
 195:u8glib/chessengine.c ****   /*  bit 3 right side black */
 196:u8glib/chessengine.c ****   /* this is the condition BEFORE the move was done */
 197:u8glib/chessengine.c ****   uint8_t castling_possible;   
 198:u8glib/chessengine.c **** };
 199:u8glib/chessengine.c **** 
 200:u8glib/chessengine.c **** typedef struct _chm_struct chm_t;
 201:u8glib/chessengine.c **** typedef struct _chm_struct *chm_p;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 5


 202:u8glib/chessengine.c **** 
 203:u8glib/chessengine.c **** /* little rook chess, main structure */
 204:u8glib/chessengine.c **** struct _lrc_struct
 205:u8glib/chessengine.c **** {  
 206:u8glib/chessengine.c ****   /* half-move (ply) counter: Counts the number of half-moves so far. Starts with 0 */
 207:u8glib/chessengine.c ****   /* the lowest bit is used to derive the color of the current player */
 208:u8glib/chessengine.c ****   /* will be set to zero in chess_SetupBoard() */
 209:u8glib/chessengine.c ****   uint8_t ply_count;
 210:u8glib/chessengine.c ****   
 211:u8glib/chessengine.c ****   /* the half move stack position counter, counts the number of elements in chm_list */
 212:u8glib/chessengine.c ****   uint8_t chm_pos;
 213:u8glib/chessengine.c ****   
 214:u8glib/chessengine.c ****   /* each element contains a colored piece, empty fields have value 0 */
 215:u8glib/chessengine.c ****   /* the field with index 0 is black (lower left) */
 216:u8glib/chessengine.c ****   uint8_t board[64];	
 217:u8glib/chessengine.c ****   /* the position of the last pawn, which did a double move forward */
 218:u8glib/chessengine.c ****   /* this is required to check en passant conditions */
 219:u8glib/chessengine.c ****   /* this array can be indexed by the color of the current player */
 220:u8glib/chessengine.c ****   uint8_t pawn_dbl_move[2]; 
 221:u8glib/chessengine.c ****   
 222:u8glib/chessengine.c ****   /* flags for the movement of rook and king; required for castling */
 223:u8glib/chessengine.c ****   /* a 1 means: castling is (still) possible */
 224:u8glib/chessengine.c ****   /* a 0 means: castling not possible */
 225:u8glib/chessengine.c ****   /*  bit 0 left side white */
 226:u8glib/chessengine.c ****   /*  bit 1 right side white */
 227:u8glib/chessengine.c ****   /*  bit 2 left side black */
 228:u8glib/chessengine.c ****   /*  bit 3 right side black */
 229:u8glib/chessengine.c ****   uint8_t castling_possible; 
 230:u8glib/chessengine.c ****   
 231:u8glib/chessengine.c ****   /* board orientation */
 232:u8glib/chessengine.c ****   /* 0: white is below COLOR_WHITE */
 233:u8glib/chessengine.c ****   /* 1: black is below COLOR_BLACK */
 234:u8glib/chessengine.c ****   /* bascially, this can be used as a color */
 235:u8glib/chessengine.c ****   uint8_t orientation;
 236:u8glib/chessengine.c ****   
 237:u8glib/chessengine.c ****   /* exchange colors of the pieces */
 238:u8glib/chessengine.c ****   /* 0: white has an empty body, use this for bright background color */
 239:u8glib/chessengine.c ****   /* 1: black has an empty body, use this for dark backround color */
 240:u8glib/chessengine.c ****   uint8_t strike_out_color;
 241:u8glib/chessengine.c ****   
 242:u8glib/chessengine.c ****   /* 0, when the game is ongoing */
 243:u8glib/chessengine.c ****   /* 1, when the game is stopped (lost or draw) */
 244:u8glib/chessengine.c ****   uint8_t is_game_end;
 245:u8glib/chessengine.c ****   /* the color of the side which lost the game */
 246:u8glib/chessengine.c ****   /* this value is only valid, when is_game_end is not 0 */
 247:u8glib/chessengine.c ****   /* values 0 and 1 represent WHITE and BLACK, 2 means a draw */
 248:u8glib/chessengine.c ****   uint8_t lost_side_color;
 249:u8glib/chessengine.c ****   
 250:u8glib/chessengine.c ****   
 251:u8glib/chessengine.c ****   
 252:u8glib/chessengine.c ****   /* checks are executed in ce_LoopRecur */
 253:u8glib/chessengine.c ****   /* these checks will put some marks on the board */
 254:u8glib/chessengine.c ****   /* this will be used by the interface to find out */
 255:u8glib/chessengine.c ****   /* legal moves */
 256:u8glib/chessengine.c ****   uint8_t check_src_pos;
 257:u8glib/chessengine.c ****   uint8_t check_mode;		/* CHECK_MODE_NONE, CHECK_MODE_MOVEABLE, CHECK_MODE_TARGET_MOVE */
 258:u8glib/chessengine.c ****   
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 6


 259:u8glib/chessengine.c ****   
 260:u8glib/chessengine.c ****   /* count of the attacking pieces, indexed by color */
 261:u8glib/chessengine.c ****   uint8_t find_piece_cnt[2];
 262:u8glib/chessengine.c **** 
 263:u8glib/chessengine.c ****   /* sum of the attacking pieces, indexed by color */
 264:u8glib/chessengine.c ****   uint8_t find_piece_weight[2];
 265:u8glib/chessengine.c **** 
 266:u8glib/chessengine.c ****   /* points to the current element of the search stack */
 267:u8glib/chessengine.c ****   /* this stack is NEVER empty. The value 0 points to the first element of the stack */
 268:u8glib/chessengine.c ****   /* actually "curr_depth" represent half-moves (plies) */
 269:u8glib/chessengine.c ****   uint8_t curr_depth;
 270:u8glib/chessengine.c ****   uint8_t max_depth;
 271:u8glib/chessengine.c ****   stack_element_p curr_element;
 272:u8glib/chessengine.c ****   
 273:u8glib/chessengine.c ****   /* allocated memory for the search stack */
 274:u8glib/chessengine.c ****   stack_element_t stack_memory[STACK_MAX_SIZE];
 275:u8glib/chessengine.c **** 
 276:u8glib/chessengine.c ****   /* the half move stack, used for move undo and depth search, size is stored in chm_pos */
 277:u8glib/chessengine.c ****   chm_t chm_list[CHM_LIST_SIZE];
 278:u8glib/chessengine.c **** };
 279:u8glib/chessengine.c **** typedef struct _lrc_struct lrc_t;
 280:u8glib/chessengine.c **** 
 281:u8glib/chessengine.c **** #define CHECK_MODE_NONE 0
 282:u8glib/chessengine.c **** #define CHECK_MODE_MOVEABLE 1
 283:u8glib/chessengine.c **** #define CHECK_MODE_TARGET_MOVE 2
 284:u8glib/chessengine.c **** 
 285:u8glib/chessengine.c **** 
 286:u8glib/chessengine.c **** 
 287:u8glib/chessengine.c **** /*==============================================================*/
 288:u8glib/chessengine.c **** /* global variables */
 289:u8glib/chessengine.c **** /*==============================================================*/
 290:u8glib/chessengine.c **** 
 291:u8glib/chessengine.c **** u8g_t *lrc_u8g;
 292:u8glib/chessengine.c **** 
 293:u8glib/chessengine.c **** lrc_t lrc_obj;
 294:u8glib/chessengine.c **** 
 295:u8glib/chessengine.c **** 
 296:u8glib/chessengine.c **** /*==============================================================*/
 297:u8glib/chessengine.c **** /* forward declarations */
 298:u8glib/chessengine.c **** /*==============================================================*/
 299:u8glib/chessengine.c **** 
 300:u8glib/chessengine.c **** /* 
 301:u8glib/chessengine.c ****   apply no inline to some of the functions:
 302:u8glib/chessengine.c ****   avr-gcc very often inlines functions, however not inline saves a lot of program memory!
 303:u8glib/chessengine.c ****   On the other hand there are some really short procedures which should be inlined (like cp_GetColo
 304:u8glib/chessengine.c ****   These procedures are marked static to prevent the generation of the expanded procedure, which
 305:u8glib/chessengine.c ****   also saves space.
 306:u8glib/chessengine.c **** */
 307:u8glib/chessengine.c **** 
 308:u8glib/chessengine.c **** uint8_t stack_Push(uint8_t color) U8G_NOINLINE;
 309:u8glib/chessengine.c **** void stack_Pop(void) U8G_NOINLINE;
 310:u8glib/chessengine.c **** void stack_InitCurrElement(void) U8G_NOINLINE;
 311:u8glib/chessengine.c **** void stack_Init(uint8_t max) U8G_NOINLINE;
 312:u8glib/chessengine.c **** void stack_SetMove(eval_t val, uint8_t to_pos) U8G_NOINLINE;
 313:u8glib/chessengine.c **** uint8_t cu_NextPos(uint8_t pos) U8G_NOINLINE;
 314:u8glib/chessengine.c **** static uint8_t cu_gpos2bpos(uint8_t gpos);
 315:u8glib/chessengine.c **** static uint8_t cp_Construct(uint8_t color, uint8_t piece);
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 7


 316:u8glib/chessengine.c **** static uint8_t cp_GetPiece(uint8_t cp);
 317:u8glib/chessengine.c **** static uint8_t cp_GetColor(uint8_t cp);
 318:u8glib/chessengine.c **** uint8_t cp_GetFromBoard(uint8_t pos) U8G_NOINLINE;
 319:u8glib/chessengine.c **** void cp_SetOnBoard(uint8_t pos, uint8_t cp) U8G_NOINLINE;
 320:u8glib/chessengine.c **** 
 321:u8glib/chessengine.c **** void cu_ClearBoard(void) U8G_NOINLINE;
 322:u8glib/chessengine.c **** void chess_SetupBoard(void) U8G_NOINLINE;
 323:u8glib/chessengine.c **** eval_t ce_Eval(void);
 324:u8glib/chessengine.c **** 
 325:u8glib/chessengine.c **** void cu_ClearMoveHistory(void) U8G_NOINLINE;
 326:u8glib/chessengine.c **** void cu_ReduceHistoryByFullMove(void) U8G_NOINLINE;
 327:u8glib/chessengine.c **** void cu_UndoHalfMove(void) U8G_NOINLINE;
 328:u8glib/chessengine.c **** chm_p cu_PushHalfMove(void) U8G_NOINLINE;
 329:u8glib/chessengine.c **** 
 330:u8glib/chessengine.c **** 
 331:u8glib/chessengine.c **** void ce_CalculatePositionWeight(uint8_t pos);
 332:u8glib/chessengine.c **** uint8_t ce_GetPositionAttackWeight(uint8_t pos, uint8_t color);
 333:u8glib/chessengine.c **** 
 334:u8glib/chessengine.c **** void chess_Thinking(void);
 335:u8glib/chessengine.c **** void ce_LoopPieces(void);
 336:u8glib/chessengine.c **** 
 337:u8glib/chessengine.c **** 
 338:u8glib/chessengine.c **** /*==============================================================*/
 339:u8glib/chessengine.c **** /* search stack */
 340:u8glib/chessengine.c **** /*==============================================================*/
 341:u8glib/chessengine.c **** 
 342:u8glib/chessengine.c **** /* get current element from stack */
 343:u8glib/chessengine.c **** stack_element_p stack_GetCurrElement(void)
 344:u8glib/chessengine.c **** {
 345:u8glib/chessengine.c ****   return lrc_obj.curr_element;
 346:u8glib/chessengine.c **** }
 347:u8glib/chessengine.c **** 
 348:u8glib/chessengine.c **** uint8_t stack_Push(uint8_t color)
 349:u8glib/chessengine.c **** {
 350:u8glib/chessengine.c ****   if ( lrc_obj.curr_depth == lrc_obj.max_depth )
 351:u8glib/chessengine.c ****     return 0;
 352:u8glib/chessengine.c ****   lrc_obj.curr_depth++;
 353:u8glib/chessengine.c ****   lrc_obj.curr_element = lrc_obj.stack_memory+lrc_obj.curr_depth;
 354:u8glib/chessengine.c ****   
 355:u8glib/chessengine.c ****   /* change view for the evaluation */
 356:u8glib/chessengine.c ****   color ^= 1;
 357:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color = color;
 358:u8glib/chessengine.c **** 
 359:u8glib/chessengine.c ****   return 1;
 360:u8glib/chessengine.c **** }
 361:u8glib/chessengine.c **** 
 362:u8glib/chessengine.c **** void stack_Pop(void)
 363:u8glib/chessengine.c **** {
 364:u8glib/chessengine.c ****   lrc_obj.curr_depth--;
 365:u8glib/chessengine.c ****   lrc_obj.curr_element = lrc_obj.stack_memory+lrc_obj.curr_depth;
 366:u8glib/chessengine.c **** }
 367:u8glib/chessengine.c **** 
 368:u8glib/chessengine.c **** /* reset the current element on the stack */
 369:u8glib/chessengine.c **** void stack_InitCurrElement(void)
 370:u8glib/chessengine.c **** {
 371:u8glib/chessengine.c ****   stack_element_p e = stack_GetCurrElement();
 372:u8glib/chessengine.c ****   e->best_eval = EVAL_T_MIN;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 8


 373:u8glib/chessengine.c ****   e->best_from_pos = ILLEGAL_POSITION;
 374:u8glib/chessengine.c ****   e->best_to_pos = ILLEGAL_POSITION;
 375:u8glib/chessengine.c **** }
 376:u8glib/chessengine.c **** 
 377:u8glib/chessengine.c **** /* resets the search stack (and the check mode) */
 378:u8glib/chessengine.c **** void stack_Init(uint8_t max)
 379:u8glib/chessengine.c **** {
 380:u8glib/chessengine.c ****   lrc_obj.curr_depth = 0;
 381:u8glib/chessengine.c ****   lrc_obj.curr_element = lrc_obj.stack_memory;
 382:u8glib/chessengine.c ****   lrc_obj.max_depth = max;
 383:u8glib/chessengine.c ****   lrc_obj.check_mode = CHECK_MODE_NONE;
 384:u8glib/chessengine.c ****   stack_InitCurrElement();
 385:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color = lrc_obj.ply_count;
 386:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color &= 1;
 387:u8glib/chessengine.c **** }
 388:u8glib/chessengine.c **** 
 389:u8glib/chessengine.c **** /* assign evaluation value and store the move, if this is the best move */
 390:u8glib/chessengine.c **** /* assumes, that current_pos contains the source position */
 391:u8glib/chessengine.c **** void stack_SetMove(eval_t val, uint8_t to_pos)
 392:u8glib/chessengine.c **** {
 393:u8glib/chessengine.c ****   stack_element_p e = stack_GetCurrElement();
 394:u8glib/chessengine.c ****   if ( e->best_eval < val )
 395:u8glib/chessengine.c ****   {
 396:u8glib/chessengine.c ****     e->best_eval = val;
 397:u8glib/chessengine.c ****     e->best_from_pos = e->current_pos;
 398:u8glib/chessengine.c ****     e->best_to_pos = to_pos;
 399:u8glib/chessengine.c ****   }
 400:u8glib/chessengine.c **** }
 401:u8glib/chessengine.c **** 
 402:u8glib/chessengine.c **** /* 
 403:u8glib/chessengine.c ****   calculate next position on a 0x88 board 
 404:u8glib/chessengine.c ****   loop is constructed in this way:
 405:u8glib/chessengine.c ****   i = 0;
 406:u8glib/chessengine.c ****   do
 407:u8glib/chessengine.c ****   {
 408:u8glib/chessengine.c ****     ...
 409:u8glib/chessengine.c ****     i = cu_NextPos(i);
 410:u8glib/chessengine.c ****   } while( i != 0 );
 411:u8glib/chessengine.c **** 
 412:u8glib/chessengine.c ****   next pos might be started with an illegal position like 255
 413:u8glib/chessengine.c **** */
 414:u8glib/chessengine.c **** uint8_t cu_NextPos(uint8_t pos)
 415:u8glib/chessengine.c **** {
 416:u8glib/chessengine.c ****   /* calculate next gpos */
 417:u8glib/chessengine.c ****   pos++;
 418:u8glib/chessengine.c ****   if ( ( pos & 0x08 ) != 0 )
 419:u8glib/chessengine.c ****   {
 420:u8glib/chessengine.c ****     pos+= 0x10;
 421:u8glib/chessengine.c ****     pos&= 0xf0; 
 422:u8glib/chessengine.c ****   }
 423:u8glib/chessengine.c ****   if ( ( pos & 0x80 ) != 0 )
 424:u8glib/chessengine.c ****     pos = 0;
 425:u8glib/chessengine.c ****   return pos;
 426:u8glib/chessengine.c **** }
 427:u8glib/chessengine.c **** 
 428:u8glib/chessengine.c **** uint8_t cu_PrevPos(uint8_t pos)
 429:u8glib/chessengine.c **** {
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 9


 430:u8glib/chessengine.c ****   /* calculate prev gpos */
 431:u8glib/chessengine.c ****   pos--;
 432:u8glib/chessengine.c ****   if ( ( pos & 0x80 ) != 0 )
 433:u8glib/chessengine.c ****     pos = 0x077;
 434:u8glib/chessengine.c ****   else if ( ( pos & 0x08 ) != 0 )
 435:u8glib/chessengine.c ****   {
 436:u8glib/chessengine.c ****     pos &= 0xf0; 
 437:u8glib/chessengine.c ****     pos |= 0x07;
 438:u8glib/chessengine.c ****   }
 439:u8glib/chessengine.c ****   return pos;
 440:u8glib/chessengine.c **** }
 441:u8glib/chessengine.c **** 
 442:u8glib/chessengine.c **** 
 443:u8glib/chessengine.c **** /*==============================================================*/
 444:u8glib/chessengine.c **** /* position transltion */
 445:u8glib/chessengine.c **** /*==============================================================*/
 446:u8glib/chessengine.c **** /*
 447:u8glib/chessengine.c ****   there are two positions
 448:u8glib/chessengine.c ****     1. game position (gpos): BCD encoded x-y values
 449:u8glib/chessengine.c ****     2. board position (bpos): a number between 0 and 63, only used to access the board.
 450:u8glib/chessengine.c **** */
 451:u8glib/chessengine.c **** /*
 452:u8glib/chessengine.c ****   gpos:	game position value
 453:u8glib/chessengine.c ****   returns:	board position
 454:u8glib/chessengine.c ****   note:	does not do any checks
 455:u8glib/chessengine.c **** */
 456:u8glib/chessengine.c **** static uint8_t cu_gpos2bpos(uint8_t gpos)
 457:u8glib/chessengine.c **** {
  29              		.loc 1 457 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              	.LVL0:
 458:u8glib/chessengine.c ****   uint8_t bpos = gpos;
 459:u8glib/chessengine.c ****   bpos &= 0xf0;
 460:u8glib/chessengine.c ****   bpos >>= 1;
  35              		.loc 1 460 0
  36 0000 4308     		lsrs	r3, r0, #1
  37 0002 03F07803 		and	r3, r3, #120
  38              	.LVL1:
 461:u8glib/chessengine.c ****   gpos &= 0x0f;
  39              		.loc 1 461 0
  40 0006 00F00F00 		and	r0, r0, #15
  41              	.LVL2:
 462:u8glib/chessengine.c ****   bpos |= gpos;
 463:u8glib/chessengine.c ****   return bpos;
 464:u8glib/chessengine.c **** }
  42              		.loc 1 464 0
  43 000a 1843     		orrs	r0, r0, r3
  44              	.LVL3:
  45 000c 7047     		bx	lr
  46              		.cfi_endproc
  47              	.LFE8:
  49 000e 00BF     		.section	.text.cp_Construct,"ax",%progbits
  50              		.align	2
  51              		.thumb
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 10


  52              		.thumb_func
  54              	cp_Construct:
  55              	.LFB9:
 465:u8glib/chessengine.c **** 
 466:u8glib/chessengine.c **** #define gpos_IsIllegal(gpos) ((gpos) & 0x088)
 467:u8glib/chessengine.c **** 
 468:u8glib/chessengine.c **** 
 469:u8glib/chessengine.c **** /*==============================================================*/
 470:u8glib/chessengine.c **** /* colored piece handling */
 471:u8glib/chessengine.c **** /*==============================================================*/
 472:u8glib/chessengine.c **** 
 473:u8glib/chessengine.c **** #define cp_IsMarked(cp)  ((cp) & CP_MARK_MASK)
 474:u8glib/chessengine.c **** 
 475:u8glib/chessengine.c **** 
 476:u8glib/chessengine.c **** /*
 477:u8glib/chessengine.c ****   piece: one of PIECE_xxx
 478:u8glib/chessengine.c ****   color: COLOR_WHITE or COLOR_BLACK
 479:u8glib/chessengine.c **** 
 480:u8glib/chessengine.c ****   returns: A colored piece
 481:u8glib/chessengine.c **** */
 482:u8glib/chessengine.c **** static uint8_t cp_Construct(uint8_t color, uint8_t piece)
 483:u8glib/chessengine.c **** {
  56              		.loc 1 483 0
  57              		.cfi_startproc
  58              		@ args = 0, pretend = 0, frame = 0
  59              		@ frame_needed = 0, uses_anonymous_args = 0
  60              		@ link register save eliminated.
  61              	.LVL4:
 484:u8glib/chessengine.c ****   color <<= 4;
  62              		.loc 1 484 0
  63 0000 0001     		lsls	r0, r0, #4
  64              	.LVL5:
  65 0002 C0B2     		uxtb	r0, r0
  66              	.LVL6:
 485:u8glib/chessengine.c ****   color |= piece;
 486:u8glib/chessengine.c ****   return color;
 487:u8glib/chessengine.c **** }
  67              		.loc 1 487 0
  68 0004 0843     		orrs	r0, r0, r1
  69              	.LVL7:
  70 0006 7047     		bx	lr
  71              		.cfi_endproc
  72              	.LFE9:
  74              		.section	.text.cp_GetPiece,"ax",%progbits
  75              		.align	2
  76              		.thumb
  77              		.thumb_func
  79              	cp_GetPiece:
  80              	.LFB10:
 488:u8glib/chessengine.c **** 
 489:u8glib/chessengine.c **** /* inline is better than a macro */
 490:u8glib/chessengine.c **** static uint8_t cp_GetPiece(uint8_t cp)
 491:u8glib/chessengine.c **** {
  81              		.loc 1 491 0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 11


  85              		@ link register save eliminated.
  86              	.LVL8:
 492:u8glib/chessengine.c ****   cp &= 0x0f;
 493:u8glib/chessengine.c ****   return cp;
 494:u8glib/chessengine.c **** }
  87              		.loc 1 494 0
  88 0000 00F00F00 		and	r0, r0, #15
  89              	.LVL9:
  90 0004 7047     		bx	lr
  91              		.cfi_endproc
  92              	.LFE10:
  94 0006 00BF     		.section	.text.cp_GetColor,"ax",%progbits
  95              		.align	2
  96              		.thumb
  97              		.thumb_func
  99              	cp_GetColor:
 100              	.LFB11:
 495:u8glib/chessengine.c **** 
 496:u8glib/chessengine.c **** /*
 497:u8glib/chessengine.c ****   we could use a macro:
 498:u8glib/chessengine.c ****   #define cp_GetColor(cp)	(((cp) >> 4)&1)
 499:u8glib/chessengine.c ****   however, inlined functions are sometimes much better
 500:u8glib/chessengine.c **** */
 501:u8glib/chessengine.c **** static uint8_t cp_GetColor(uint8_t cp)
 502:u8glib/chessengine.c **** {
 101              		.loc 1 502 0
 102              		.cfi_startproc
 103              		@ args = 0, pretend = 0, frame = 0
 104              		@ frame_needed = 0, uses_anonymous_args = 0
 105              		@ link register save eliminated.
 106              	.LVL10:
 503:u8glib/chessengine.c ****   cp >>= 4;
 504:u8glib/chessengine.c ****   cp &= 1;
 505:u8glib/chessengine.c ****   return cp;
 506:u8glib/chessengine.c **** }
 107              		.loc 1 506 0
 108 0000 C0F30010 		ubfx	r0, r0, #4, #1
 109              	.LVL11:
 110 0004 7047     		bx	lr
 111              		.cfi_endproc
 112              	.LFE11:
 114 0006 00BF     		.section	.text.cu_add_pos,"ax",%progbits
 115              		.align	2
 116              		.thumb
 117              		.thumb_func
 119              	cu_add_pos:
 120              	.LFB23:
 507:u8glib/chessengine.c **** 
 508:u8glib/chessengine.c **** /*
 509:u8glib/chessengine.c ****   pos: game position
 510:u8glib/chessengine.c ****   returns the colored piece at the given position
 511:u8glib/chessengine.c **** */
 512:u8glib/chessengine.c **** uint8_t cp_GetFromBoard(uint8_t pos)
 513:u8glib/chessengine.c **** {
 514:u8glib/chessengine.c ****   return lrc_obj.board[cu_gpos2bpos(pos)];
 515:u8glib/chessengine.c **** }
 516:u8glib/chessengine.c **** 
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 12


 517:u8glib/chessengine.c **** /*
 518:u8glib/chessengine.c ****   pos: game position
 519:u8glib/chessengine.c ****   cp: colored piece
 520:u8glib/chessengine.c **** */
 521:u8glib/chessengine.c **** void cp_SetOnBoard(uint8_t pos, uint8_t cp)
 522:u8glib/chessengine.c **** {
 523:u8glib/chessengine.c ****   /*printf("cp_SetOnBoard gpos:%02x cp:%02x\n", pos, cp);*/
 524:u8glib/chessengine.c ****   lrc_obj.board[cu_gpos2bpos(pos)] = cp;
 525:u8glib/chessengine.c **** }
 526:u8glib/chessengine.c **** 
 527:u8glib/chessengine.c **** /*==============================================================*/
 528:u8glib/chessengine.c **** /* global board access */
 529:u8glib/chessengine.c **** /*==============================================================*/
 530:u8glib/chessengine.c **** 
 531:u8glib/chessengine.c **** void cu_ClearBoard(void)
 532:u8glib/chessengine.c **** {
 533:u8glib/chessengine.c ****   uint8_t i;
 534:u8glib/chessengine.c ****   /* clear the board */
 535:u8glib/chessengine.c ****   for( i = 0; i < 64; i++ )
 536:u8glib/chessengine.c ****     lrc_obj.board[i] = PIECE_NONE;
 537:u8glib/chessengine.c ****   
 538:u8glib/chessengine.c ****   lrc_obj.ply_count = 0;
 539:u8glib/chessengine.c ****   lrc_obj.orientation = COLOR_WHITE;
 540:u8glib/chessengine.c ****   
 541:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[0] = ILLEGAL_POSITION;
 542:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[1] = ILLEGAL_POSITION;
 543:u8glib/chessengine.c ****   
 544:u8glib/chessengine.c ****   lrc_obj.castling_possible = 0x0f;
 545:u8glib/chessengine.c ****   
 546:u8glib/chessengine.c ****   lrc_obj.is_game_end = 0;
 547:u8glib/chessengine.c ****   lrc_obj.lost_side_color = 0;
 548:u8glib/chessengine.c **** 
 549:u8glib/chessengine.c ****   /* clear half move history */
 550:u8glib/chessengine.c ****   cu_ClearMoveHistory();
 551:u8glib/chessengine.c **** 
 552:u8glib/chessengine.c **** }
 553:u8glib/chessengine.c **** 
 554:u8glib/chessengine.c **** /*
 555:u8glib/chessengine.c ****   test setup
 556:u8glib/chessengine.c ****   white wins in one move
 557:u8glib/chessengine.c **** */
 558:u8glib/chessengine.c **** void chess_SetupBoardTest01(void)
 559:u8glib/chessengine.c **** {
 560:u8glib/chessengine.c ****   cu_ClearBoard();
 561:u8glib/chessengine.c ****   lrc_obj.board[7+7*8] = cp_Construct(COLOR_BLACK, PIECE_KING);
 562:u8glib/chessengine.c ****   lrc_obj.board[7+5*8] = cp_Construct(COLOR_WHITE, PIECE_PAWN);
 563:u8glib/chessengine.c ****   lrc_obj.board[3] = cp_Construct(COLOR_WHITE, PIECE_KING);
 564:u8glib/chessengine.c ****   lrc_obj.board[0+7*8] = cp_Construct(COLOR_BLACK, PIECE_ROOK);
 565:u8glib/chessengine.c ****   lrc_obj.board[6] = cp_Construct(COLOR_WHITE, PIECE_QUEEN);
 566:u8glib/chessengine.c **** } 
 567:u8glib/chessengine.c **** 
 568:u8glib/chessengine.c **** /* setup the global board */
 569:u8glib/chessengine.c **** void chess_SetupBoard(void)
 570:u8glib/chessengine.c **** {
 571:u8glib/chessengine.c ****   uint8_t i;
 572:u8glib/chessengine.c ****   register uint8_t bp, wp;
 573:u8glib/chessengine.c ****   
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 13


 574:u8glib/chessengine.c ****   /* clear the board */
 575:u8glib/chessengine.c ****   cu_ClearBoard();
 576:u8glib/chessengine.c ****   
 577:u8glib/chessengine.c ****   /* precronstruct pawns */
 578:u8glib/chessengine.c ****   wp = cp_Construct(COLOR_WHITE, PIECE_PAWN);
 579:u8glib/chessengine.c ****   bp = cp_Construct(COLOR_BLACK, PIECE_PAWN);
 580:u8glib/chessengine.c ****   
 581:u8glib/chessengine.c ****   /* setup pawn */
 582:u8glib/chessengine.c ****   for( i = 0; i < 8; i++ )
 583:u8glib/chessengine.c ****   {
 584:u8glib/chessengine.c ****     lrc_obj.board[i+8] = wp;
 585:u8glib/chessengine.c ****     lrc_obj.board[i+6*8] = bp;
 586:u8glib/chessengine.c ****   }
 587:u8glib/chessengine.c ****   
 588:u8glib/chessengine.c ****   /* assign remaining pieces */
 589:u8glib/chessengine.c ****   
 590:u8glib/chessengine.c ****   lrc_obj.board[0] = cp_Construct(COLOR_WHITE, PIECE_ROOK);
 591:u8glib/chessengine.c ****   lrc_obj.board[1] = cp_Construct(COLOR_WHITE, PIECE_KNIGHT);
 592:u8glib/chessengine.c ****   lrc_obj.board[2] = cp_Construct(COLOR_WHITE, PIECE_BISHOP);
 593:u8glib/chessengine.c ****   lrc_obj.board[3] = cp_Construct(COLOR_WHITE, PIECE_QUEEN);
 594:u8glib/chessengine.c ****   lrc_obj.board[4] = cp_Construct(COLOR_WHITE, PIECE_KING);
 595:u8glib/chessengine.c ****   lrc_obj.board[5] = cp_Construct(COLOR_WHITE, PIECE_BISHOP);
 596:u8glib/chessengine.c ****   lrc_obj.board[6] = cp_Construct(COLOR_WHITE, PIECE_KNIGHT);
 597:u8glib/chessengine.c ****   lrc_obj.board[7] = cp_Construct(COLOR_WHITE, PIECE_ROOK);
 598:u8glib/chessengine.c **** 
 599:u8glib/chessengine.c ****   lrc_obj.board[0+7*8] = cp_Construct(COLOR_BLACK, PIECE_ROOK);
 600:u8glib/chessengine.c ****   lrc_obj.board[1+7*8] = cp_Construct(COLOR_BLACK, PIECE_KNIGHT);
 601:u8glib/chessengine.c ****   lrc_obj.board[2+7*8] = cp_Construct(COLOR_BLACK, PIECE_BISHOP);
 602:u8glib/chessengine.c ****   lrc_obj.board[3+7*8] = cp_Construct(COLOR_BLACK, PIECE_QUEEN);
 603:u8glib/chessengine.c ****   lrc_obj.board[4+7*8] = cp_Construct(COLOR_BLACK, PIECE_KING);
 604:u8glib/chessengine.c ****   lrc_obj.board[5+7*8] = cp_Construct(COLOR_BLACK, PIECE_BISHOP);
 605:u8glib/chessengine.c ****   lrc_obj.board[6+7*8] = cp_Construct(COLOR_BLACK, PIECE_KNIGHT);
 606:u8glib/chessengine.c ****   lrc_obj.board[7+7*8] = cp_Construct(COLOR_BLACK, PIECE_ROOK);
 607:u8glib/chessengine.c **** 
 608:u8glib/chessengine.c ****   //chess_SetupBoardTest01();
 609:u8glib/chessengine.c **** 
 610:u8glib/chessengine.c **** }
 611:u8glib/chessengine.c **** 
 612:u8glib/chessengine.c **** 
 613:u8glib/chessengine.c **** 
 614:u8glib/chessengine.c **** /*==============================================================*/
 615:u8glib/chessengine.c **** /* checks */
 616:u8glib/chessengine.c **** /*==============================================================*/
 617:u8glib/chessengine.c **** 
 618:u8glib/chessengine.c **** /*
 619:u8glib/chessengine.c ****   checks if the position is somehow illegal
 620:u8glib/chessengine.c **** */
 621:u8glib/chessengine.c **** uint8_t cu_IsIllegalPosition(uint8_t pos, uint8_t my_color)
 622:u8glib/chessengine.c **** {
 623:u8glib/chessengine.c ****   uint8_t board_cp;
 624:u8glib/chessengine.c ****   /* check, if the position is offboard */
 625:u8glib/chessengine.c ****   if ( gpos_IsIllegal(pos) != 0 )
 626:u8glib/chessengine.c ****     return 1;
 627:u8glib/chessengine.c ****   /* get the piece from the board */
 628:u8glib/chessengine.c ****   board_cp = cp_GetFromBoard(pos);
 629:u8glib/chessengine.c ****   /* check if hit our own pieces */
 630:u8glib/chessengine.c ****   if ( board_cp != 0 ) 
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 14


 631:u8glib/chessengine.c ****     if ( cp_GetColor(board_cp) == my_color )
 632:u8glib/chessengine.c ****       return 1;
 633:u8glib/chessengine.c ****   /* all ok, we could go to this position */
 634:u8glib/chessengine.c ****   return 0;
 635:u8glib/chessengine.c **** }
 636:u8glib/chessengine.c **** 
 637:u8glib/chessengine.c **** /*==============================================================*/
 638:u8glib/chessengine.c **** /* evaluation procedure */
 639:u8glib/chessengine.c **** /*==============================================================*/
 640:u8glib/chessengine.c **** 
 641:u8glib/chessengine.c **** /*
 642:u8glib/chessengine.c ****   basic idea is to return a value between EVAL_T_MIN and EVAL_T_MAX
 643:u8glib/chessengine.c **** */
 644:u8glib/chessengine.c **** 
 645:u8glib/chessengine.c **** /*
 646:u8glib/chessengine.c ****   the weight table uses the PIECE number as index:
 647:u8glib/chessengine.c ****       #define PIECE_NONE	0
 648:u8glib/chessengine.c ****       #define PIECE_PAWN 	1
 649:u8glib/chessengine.c ****       #define PIECE_KNIGHT  	2
 650:u8glib/chessengine.c ****       #define PIECE_BISHOP 	3
 651:u8glib/chessengine.c ****       #define PIECE_ROOK	4
 652:u8glib/chessengine.c ****       #define PIECE_QUEEN 	5
 653:u8glib/chessengine.c ****       #define PIECE_KING		6
 654:u8glib/chessengine.c ****   the king itself is not counted
 655:u8glib/chessengine.c **** */
 656:u8glib/chessengine.c **** uint8_t ce_piece_weight[] = { 0, 1, 3, 3, 5, 9, 0 };
 657:u8glib/chessengine.c **** uint8_t ce_pos_weight[] = { 0, 1, 1, 2, 2, 1, 1, 0};
 658:u8glib/chessengine.c **** /*
 659:u8glib/chessengine.c ****   evaluate the current situation on the global board
 660:u8glib/chessengine.c **** */
 661:u8glib/chessengine.c **** eval_t ce_Eval(void)
 662:u8glib/chessengine.c **** {
 663:u8glib/chessengine.c ****   uint8_t cp;
 664:u8glib/chessengine.c ****   uint8_t is_my_king_present = 0;
 665:u8glib/chessengine.c ****   uint8_t is_opposit_king_present = 0;
 666:u8glib/chessengine.c ****   eval_t material_my_color = 0;
 667:u8glib/chessengine.c ****   eval_t material_opposit_color = 0;
 668:u8glib/chessengine.c ****   eval_t position_my_color = 0;
 669:u8glib/chessengine.c ****   eval_t position_opposit_color = 0;
 670:u8glib/chessengine.c ****   eval_t result;
 671:u8glib/chessengine.c ****   uint8_t pos;
 672:u8glib/chessengine.c ****   
 673:u8glib/chessengine.c ****   pos = 0;
 674:u8glib/chessengine.c ****   do
 675:u8glib/chessengine.c ****   {
 676:u8glib/chessengine.c ****     /* get colored piece from the board */
 677:u8glib/chessengine.c ****     cp = cp_GetFromBoard(pos);
 678:u8glib/chessengine.c ****     
 679:u8glib/chessengine.c ****     if ( cp_GetPiece(cp) != PIECE_NONE )
 680:u8glib/chessengine.c ****     {
 681:u8glib/chessengine.c ****       if ( stack_GetCurrElement()->current_color == cp_GetColor(cp) )
 682:u8glib/chessengine.c ****       {
 683:u8glib/chessengine.c **** 	/* this is our color */
 684:u8glib/chessengine.c **** 	/* check if we found our king */
 685:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == PIECE_KING  )
 686:u8glib/chessengine.c **** 	  is_my_king_present = 1;
 687:u8glib/chessengine.c **** 	material_my_color += ce_piece_weight[cp_GetPiece(cp)];
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 15


 688:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == PIECE_PAWN || cp_GetPiece(cp) == PIECE_KNIGHT  )
 689:u8glib/chessengine.c **** 	{
 690:u8glib/chessengine.c **** 	  position_my_color += ce_pos_weight[pos&7]*ce_pos_weight[(pos>>4)&7];
 691:u8glib/chessengine.c **** 	}
 692:u8glib/chessengine.c ****       }
 693:u8glib/chessengine.c ****       else
 694:u8glib/chessengine.c ****       {
 695:u8glib/chessengine.c **** 	/* this is the opposit color */
 696:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == PIECE_KING  )
 697:u8glib/chessengine.c **** 	  is_opposit_king_present = 1;
 698:u8glib/chessengine.c **** 	material_opposit_color += ce_piece_weight[cp_GetPiece(cp)];
 699:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == PIECE_PAWN || cp_GetPiece(cp) == PIECE_KNIGHT )
 700:u8glib/chessengine.c **** 	{
 701:u8glib/chessengine.c **** 	  position_opposit_color += ce_pos_weight[pos&7]*ce_pos_weight[(pos>>4)&7];
 702:u8glib/chessengine.c **** 	}
 703:u8glib/chessengine.c ****       }
 704:u8glib/chessengine.c ****     }
 705:u8glib/chessengine.c ****     pos = cu_NextPos(pos);
 706:u8glib/chessengine.c ****   } while( pos != 0 );
 707:u8glib/chessengine.c **** 
 708:u8glib/chessengine.c ****     
 709:u8glib/chessengine.c ****   /* decide if we lost or won the game */
 710:u8glib/chessengine.c ****   if ( is_my_king_present == 0 )
 711:u8glib/chessengine.c ****     return EVAL_T_MIN;	/*_LOST*/
 712:u8glib/chessengine.c ****   if ( is_opposit_king_present == 0 )
 713:u8glib/chessengine.c ****     return EVAL_T_MAX;	/*_WIN*/
 714:u8glib/chessengine.c ****   
 715:u8glib/chessengine.c ****   /* here is the evaluation function */
 716:u8glib/chessengine.c ****   
 717:u8glib/chessengine.c ****   result = material_my_color - material_opposit_color;
 718:u8glib/chessengine.c ****   result <<= 3;
 719:u8glib/chessengine.c ****   result += position_my_color - position_opposit_color;
 720:u8glib/chessengine.c ****   return result;
 721:u8glib/chessengine.c **** }
 722:u8glib/chessengine.c **** 
 723:u8glib/chessengine.c **** /*==============================================================*/
 724:u8glib/chessengine.c **** /* move backup and restore */
 725:u8glib/chessengine.c **** /*==============================================================*/
 726:u8glib/chessengine.c **** 
 727:u8glib/chessengine.c **** 
 728:u8glib/chessengine.c **** /* this procedure must be called to keep the size as low as possible */
 729:u8glib/chessengine.c **** /* if the chm_list is large enough, it could hold the complete history */
 730:u8glib/chessengine.c **** /* but for an embedded controler... it is deleted for every engine search */
 731:u8glib/chessengine.c **** void cu_ClearMoveHistory(void)
 732:u8glib/chessengine.c **** {
 733:u8glib/chessengine.c ****   lrc_obj.chm_pos = 0;
 734:u8glib/chessengine.c **** }
 735:u8glib/chessengine.c **** 
 736:u8glib/chessengine.c **** void cu_ReduceHistoryByFullMove(void)
 737:u8glib/chessengine.c **** {
 738:u8glib/chessengine.c ****   uint8_t i;
 739:u8glib/chessengine.c ****   while( lrc_obj.chm_pos > CHM_USER_SIZE )
 740:u8glib/chessengine.c ****   {
 741:u8glib/chessengine.c ****     i = 0;
 742:u8glib/chessengine.c ****     for(;;)
 743:u8glib/chessengine.c ****     {
 744:u8glib/chessengine.c ****       if ( i+2 >= lrc_obj.chm_pos )
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 16


 745:u8glib/chessengine.c **** 	break;
 746:u8glib/chessengine.c ****       lrc_obj.chm_list[i] = lrc_obj.chm_list[i+2];
 747:u8glib/chessengine.c ****       i++;
 748:u8glib/chessengine.c ****     }
 749:u8glib/chessengine.c ****     lrc_obj.chm_pos -= 2;
 750:u8glib/chessengine.c ****   }
 751:u8glib/chessengine.c **** }
 752:u8glib/chessengine.c **** 
 753:u8glib/chessengine.c **** void cu_UndoHalfMove(void)
 754:u8glib/chessengine.c **** {
 755:u8glib/chessengine.c ****   chm_p chm;
 756:u8glib/chessengine.c ****   
 757:u8glib/chessengine.c ****   if ( lrc_obj.chm_pos == 0 )
 758:u8glib/chessengine.c ****     return;
 759:u8glib/chessengine.c ****   
 760:u8glib/chessengine.c ****   lrc_obj.chm_pos--;
 761:u8glib/chessengine.c **** 
 762:u8glib/chessengine.c ****   chm = lrc_obj.chm_list+lrc_obj.chm_pos;
 763:u8glib/chessengine.c ****   
 764:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[0] = chm->pawn_dbl_move[0];
 765:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[1] = chm->pawn_dbl_move[1];
 766:u8glib/chessengine.c ****   lrc_obj.castling_possible = chm->castling_possible;
 767:u8glib/chessengine.c ****   
 768:u8glib/chessengine.c ****   cp_SetOnBoard(chm->main_src, chm->main_cp);
 769:u8glib/chessengine.c ****   cp_SetOnBoard(chm->main_dest, PIECE_NONE);
 770:u8glib/chessengine.c ****   
 771:u8glib/chessengine.c ****   if ( chm->other_src != ILLEGAL_POSITION )
 772:u8glib/chessengine.c ****     cp_SetOnBoard(chm->other_src, chm->other_cp);
 773:u8glib/chessengine.c ****   if ( chm->other_dest != ILLEGAL_POSITION )
 774:u8glib/chessengine.c ****     cp_SetOnBoard(chm->other_dest, PIECE_NONE);
 775:u8glib/chessengine.c **** 
 776:u8glib/chessengine.c **** }
 777:u8glib/chessengine.c **** 
 778:u8glib/chessengine.c **** /*
 779:u8glib/chessengine.c ****   assumes, that the following members of the returned chm structure are filled 
 780:u8glib/chessengine.c ****   uint8_t main_cp;		the main piece, which is moved
 781:u8glib/chessengine.c ****   uint8_t main_src;		the source position of the main piece
 782:u8glib/chessengine.c ****   uint8_t main_dest; 	the destination of the main piece
 783:u8glib/chessengine.c ****   
 784:u8glib/chessengine.c ****   uint8_t other_cp;		another piece: the captured one, the ROOK in case of castling or PIECE_NONE
 785:u8glib/chessengine.c ****   uint8_t other_src;		the delete position of other_cp. Often identical to main_dest except for e.p.
 786:u8glib/chessengine.c ****   uint8_t other_dest;		only used for castling: ROOK destination pos
 787:u8glib/chessengine.c **** 
 788:u8glib/chessengine.c **** */
 789:u8glib/chessengine.c **** chm_p cu_PushHalfMove(void)
 790:u8glib/chessengine.c **** {
 791:u8glib/chessengine.c ****   chm_p chm;
 792:u8glib/chessengine.c ****   
 793:u8glib/chessengine.c ****   chm = lrc_obj.chm_list+lrc_obj.chm_pos;
 794:u8glib/chessengine.c ****   if ( lrc_obj.chm_pos < CHM_LIST_SIZE-1)
 795:u8glib/chessengine.c ****     lrc_obj.chm_pos++;
 796:u8glib/chessengine.c **** 
 797:u8glib/chessengine.c ****   chm->pawn_dbl_move[0] = lrc_obj.pawn_dbl_move[0];
 798:u8glib/chessengine.c ****   chm->pawn_dbl_move[1] = lrc_obj.pawn_dbl_move[1];
 799:u8glib/chessengine.c ****   chm->castling_possible = lrc_obj.castling_possible;
 800:u8glib/chessengine.c ****   return chm;
 801:u8glib/chessengine.c **** }
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 17


 802:u8glib/chessengine.c **** 
 803:u8glib/chessengine.c **** 
 804:u8glib/chessengine.c **** char chess_piece_to_char[] = "NBRQK";
 805:u8glib/chessengine.c **** 
 806:u8glib/chessengine.c **** /*
 807:u8glib/chessengine.c ****   simple moves on empty field: 	Ka1-b2
 808:u8glib/chessengine.c ****   capture moves:				Ka1xb2
 809:u8glib/chessengine.c ****   castling:						0-0 or 0-0-0
 810:u8glib/chessengine.c **** */
 811:u8glib/chessengine.c **** 
 812:u8glib/chessengine.c **** static void cu_add_pos(char *s, uint8_t pos) U8G_NOINLINE;
 813:u8glib/chessengine.c **** 
 814:u8glib/chessengine.c **** static void cu_add_pos(char *s, uint8_t pos)
 815:u8glib/chessengine.c **** {
 121              		.loc 1 815 0
 122              		.cfi_startproc
 123              		@ args = 0, pretend = 0, frame = 0
 124              		@ frame_needed = 0, uses_anonymous_args = 0
 125              		@ link register save eliminated.
 126              	.LVL12:
 816:u8glib/chessengine.c ****   *s = pos;
 817:u8glib/chessengine.c ****   *s >>= 4;
 127              		.loc 1 817 0
 128 0000 0B09     		lsrs	r3, r1, #4
 818:u8glib/chessengine.c ****   *s += 'a';
 129              		.loc 1 818 0
 130 0002 6133     		adds	r3, r3, #97
 131 0004 0370     		strb	r3, [r0]
 132              	.LVL13:
 819:u8glib/chessengine.c ****   s++;
 820:u8glib/chessengine.c ****   *s = pos;
 821:u8glib/chessengine.c ****   *s &= 15;
 133              		.loc 1 821 0
 134 0006 01F00F01 		and	r1, r1, #15
 135              	.LVL14:
 822:u8glib/chessengine.c ****   *s += '1';
 136              		.loc 1 822 0
 137 000a 3131     		adds	r1, r1, #49
 138 000c 4170     		strb	r1, [r0, #1]
 139 000e 7047     		bx	lr
 140              		.cfi_endproc
 141              	.LFE23:
 143              		.section	.text.stack_GetCurrElement,"ax",%progbits
 144              		.align	2
 145              		.global	stack_GetCurrElement
 146              		.thumb
 147              		.thumb_func
 149              	stack_GetCurrElement:
 150              	.LFB0:
 344:u8glib/chessengine.c ****   return lrc_obj.curr_element;
 151              		.loc 1 344 0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              		@ link register save eliminated.
 346:u8glib/chessengine.c **** 
 156              		.loc 1 346 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 18


 157 0000 014B     		ldr	r3, .L7
 158 0002 586D     		ldr	r0, [r3, #84]
 159 0004 7047     		bx	lr
 160              	.L8:
 161 0006 00BF     		.align	2
 162              	.L7:
 163 0008 00000000 		.word	lrc_obj
 164              		.cfi_endproc
 165              	.LFE0:
 167              		.section	.text.stack_Push,"ax",%progbits
 168              		.align	2
 169              		.global	stack_Push
 170              		.thumb
 171              		.thumb_func
 173              	stack_Push:
 174              	.LFB1:
 349:u8glib/chessengine.c ****   if ( lrc_obj.curr_depth == lrc_obj.max_depth )
 175              		.loc 1 349 0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
 179              	.LVL15:
 350:u8glib/chessengine.c ****     return 0;
 180              		.loc 1 350 0
 181 0000 0D4A     		ldr	r2, .L14
 182 0002 92F84F30 		ldrb	r3, [r2, #79]	@ zero_extendqisi2
 183 0006 92F85020 		ldrb	r2, [r2, #80]	@ zero_extendqisi2
 184 000a 9342     		cmp	r3, r2
 185 000c 11D0     		beq	.L11
 349:u8glib/chessengine.c ****   if ( lrc_obj.curr_depth == lrc_obj.max_depth )
 186              		.loc 1 349 0
 187 000e 10B5     		push	{r4, lr}
 188              	.LCFI0:
 189              		.cfi_def_cfa_offset 8
 190              		.cfi_offset 4, -8
 191              		.cfi_offset 14, -4
 352:u8glib/chessengine.c ****   lrc_obj.curr_element = lrc_obj.stack_memory+lrc_obj.curr_depth;
 192              		.loc 1 352 0
 193 0010 0133     		adds	r3, r3, #1
 194 0012 DBB2     		uxtb	r3, r3
 195 0014 084A     		ldr	r2, .L14
 196 0016 82F84F30 		strb	r3, [r2, #79]
 353:u8glib/chessengine.c ****   
 197              		.loc 1 353 0
 198 001a 02F15801 		add	r1, r2, #88
 199 001e 01EBC303 		add	r3, r1, r3, lsl #3
 200 0022 5365     		str	r3, [r2, #84]
 356:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color = color;
 201              		.loc 1 356 0
 202 0024 80F00104 		eor	r4, r0, #1
 203              	.LVL16:
 357:u8glib/chessengine.c **** 
 204              		.loc 1 357 0
 205 0028 FFF7FEFF 		bl	stack_GetCurrElement
 206              	.LVL17:
 207 002c 8470     		strb	r4, [r0, #2]
 359:u8glib/chessengine.c **** }
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 19


 208              		.loc 1 359 0
 209 002e 0120     		movs	r0, #1
 210 0030 10BD     		pop	{r4, pc}
 211              	.LVL18:
 212              	.L11:
 213              	.LCFI1:
 214              		.cfi_def_cfa_offset 0
 215              		.cfi_restore 4
 216              		.cfi_restore 14
 351:u8glib/chessengine.c ****   lrc_obj.curr_depth++;
 217              		.loc 1 351 0
 218 0032 0020     		movs	r0, #0
 219              	.LVL19:
 220 0034 7047     		bx	lr
 221              	.L15:
 222 0036 00BF     		.align	2
 223              	.L14:
 224 0038 00000000 		.word	lrc_obj
 225              		.cfi_endproc
 226              	.LFE1:
 228              		.section	.text.stack_Pop,"ax",%progbits
 229              		.align	2
 230              		.global	stack_Pop
 231              		.thumb
 232              		.thumb_func
 234              	stack_Pop:
 235              	.LFB2:
 363:u8glib/chessengine.c ****   lrc_obj.curr_depth--;
 236              		.loc 1 363 0
 237              		.cfi_startproc
 238              		@ args = 0, pretend = 0, frame = 0
 239              		@ frame_needed = 0, uses_anonymous_args = 0
 240              		@ link register save eliminated.
 364:u8glib/chessengine.c ****   lrc_obj.curr_element = lrc_obj.stack_memory+lrc_obj.curr_depth;
 241              		.loc 1 364 0
 242 0000 064A     		ldr	r2, .L17
 243 0002 92F84F30 		ldrb	r3, [r2, #79]	@ zero_extendqisi2
 244 0006 013B     		subs	r3, r3, #1
 245 0008 DBB2     		uxtb	r3, r3
 246 000a 82F84F30 		strb	r3, [r2, #79]
 365:u8glib/chessengine.c **** }
 247              		.loc 1 365 0
 248 000e 02F15801 		add	r1, r2, #88
 249 0012 01EBC303 		add	r3, r1, r3, lsl #3
 250 0016 5365     		str	r3, [r2, #84]
 251 0018 7047     		bx	lr
 252              	.L18:
 253 001a 00BF     		.align	2
 254              	.L17:
 255 001c 00000000 		.word	lrc_obj
 256              		.cfi_endproc
 257              	.LFE2:
 259              		.section	.text.stack_InitCurrElement,"ax",%progbits
 260              		.align	2
 261              		.global	stack_InitCurrElement
 262              		.thumb
 263              		.thumb_func
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 20


 265              	stack_InitCurrElement:
 266              	.LFB3:
 370:u8glib/chessengine.c ****   stack_element_p e = stack_GetCurrElement();
 267              		.loc 1 370 0
 268              		.cfi_startproc
 269              		@ args = 0, pretend = 0, frame = 0
 270              		@ frame_needed = 0, uses_anonymous_args = 0
 271 0000 08B5     		push	{r3, lr}
 272              	.LCFI2:
 273              		.cfi_def_cfa_offset 8
 274              		.cfi_offset 3, -8
 275              		.cfi_offset 14, -4
 371:u8glib/chessengine.c ****   e->best_eval = EVAL_T_MIN;
 276              		.loc 1 371 0
 277 0002 FFF7FEFF 		bl	stack_GetCurrElement
 278              	.LVL20:
 372:u8glib/chessengine.c ****   e->best_from_pos = ILLEGAL_POSITION;
 279              		.loc 1 372 0
 280 0006 48F20103 		movw	r3, #32769
 281 000a C380     		strh	r3, [r0, #6]	@ movhi
 373:u8glib/chessengine.c ****   e->best_to_pos = ILLEGAL_POSITION;
 282              		.loc 1 373 0
 283 000c FF23     		movs	r3, #255
 284 000e C370     		strb	r3, [r0, #3]
 374:u8glib/chessengine.c **** }
 285              		.loc 1 374 0
 286 0010 0371     		strb	r3, [r0, #4]
 287 0012 08BD     		pop	{r3, pc}
 288              		.cfi_endproc
 289              	.LFE3:
 291              		.section	.text.stack_Init,"ax",%progbits
 292              		.align	2
 293              		.global	stack_Init
 294              		.thumb
 295              		.thumb_func
 297              	stack_Init:
 298              	.LFB4:
 379:u8glib/chessengine.c ****   lrc_obj.curr_depth = 0;
 299              		.loc 1 379 0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 0
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303              	.LVL21:
 304 0000 10B5     		push	{r4, lr}
 305              	.LCFI3:
 306              		.cfi_def_cfa_offset 8
 307              		.cfi_offset 4, -8
 308              		.cfi_offset 14, -4
 380:u8glib/chessengine.c ****   lrc_obj.curr_element = lrc_obj.stack_memory;
 309              		.loc 1 380 0
 310 0002 0C4C     		ldr	r4, .L23
 311 0004 0023     		movs	r3, #0
 312 0006 84F84F30 		strb	r3, [r4, #79]
 381:u8glib/chessengine.c ****   lrc_obj.max_depth = max;
 313              		.loc 1 381 0
 314 000a 04F15802 		add	r2, r4, #88
 315 000e 6265     		str	r2, [r4, #84]
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 21


 382:u8glib/chessengine.c ****   lrc_obj.check_mode = CHECK_MODE_NONE;
 316              		.loc 1 382 0
 317 0010 84F85000 		strb	r0, [r4, #80]
 383:u8glib/chessengine.c ****   stack_InitCurrElement();
 318              		.loc 1 383 0
 319 0014 84F84A30 		strb	r3, [r4, #74]
 384:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color = lrc_obj.ply_count;
 320              		.loc 1 384 0
 321 0018 FFF7FEFF 		bl	stack_InitCurrElement
 322              	.LVL22:
 385:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color &= 1;
 323              		.loc 1 385 0
 324 001c FFF7FEFF 		bl	stack_GetCurrElement
 325              	.LVL23:
 326 0020 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 327 0022 8370     		strb	r3, [r0, #2]
 386:u8glib/chessengine.c **** }
 328              		.loc 1 386 0
 329 0024 FFF7FEFF 		bl	stack_GetCurrElement
 330              	.LVL24:
 331 0028 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 332 002a 03F00103 		and	r3, r3, #1
 333 002e 8370     		strb	r3, [r0, #2]
 334 0030 10BD     		pop	{r4, pc}
 335              	.L24:
 336 0032 00BF     		.align	2
 337              	.L23:
 338 0034 00000000 		.word	lrc_obj
 339              		.cfi_endproc
 340              	.LFE4:
 342              		.section	.text.stack_SetMove,"ax",%progbits
 343              		.align	2
 344              		.global	stack_SetMove
 345              		.thumb
 346              		.thumb_func
 348              	stack_SetMove:
 349              	.LFB5:
 392:u8glib/chessengine.c ****   stack_element_p e = stack_GetCurrElement();
 350              		.loc 1 392 0
 351              		.cfi_startproc
 352              		@ args = 0, pretend = 0, frame = 0
 353              		@ frame_needed = 0, uses_anonymous_args = 0
 354              	.LVL25:
 355 0000 38B5     		push	{r3, r4, r5, lr}
 356              	.LCFI4:
 357              		.cfi_def_cfa_offset 16
 358              		.cfi_offset 3, -16
 359              		.cfi_offset 4, -12
 360              		.cfi_offset 5, -8
 361              		.cfi_offset 14, -4
 362 0002 0446     		mov	r4, r0
 363 0004 0D46     		mov	r5, r1
 393:u8glib/chessengine.c ****   if ( e->best_eval < val )
 364              		.loc 1 393 0
 365 0006 FFF7FEFF 		bl	stack_GetCurrElement
 366              	.LVL26:
 394:u8glib/chessengine.c ****   {
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 22


 367              		.loc 1 394 0
 368 000a B0F90630 		ldrsh	r3, [r0, #6]
 369 000e A342     		cmp	r3, r4
 370 0010 03DA     		bge	.L25
 396:u8glib/chessengine.c ****     e->best_from_pos = e->current_pos;
 371              		.loc 1 396 0
 372 0012 C480     		strh	r4, [r0, #6]	@ movhi
 397:u8glib/chessengine.c ****     e->best_to_pos = to_pos;
 373              		.loc 1 397 0
 374 0014 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 375 0016 C370     		strb	r3, [r0, #3]
 398:u8glib/chessengine.c ****   }
 376              		.loc 1 398 0
 377 0018 0571     		strb	r5, [r0, #4]
 378              	.L25:
 379 001a 38BD     		pop	{r3, r4, r5, pc}
 380              		.cfi_endproc
 381              	.LFE5:
 383              		.section	.text.cu_NextPos,"ax",%progbits
 384              		.align	2
 385              		.global	cu_NextPos
 386              		.thumb
 387              		.thumb_func
 389              	cu_NextPos:
 390              	.LFB6:
 415:u8glib/chessengine.c ****   /* calculate next gpos */
 391              		.loc 1 415 0
 392              		.cfi_startproc
 393              		@ args = 0, pretend = 0, frame = 0
 394              		@ frame_needed = 0, uses_anonymous_args = 0
 395              		@ link register save eliminated.
 396              	.LVL27:
 397 0000 0246     		mov	r2, r0
 417:u8glib/chessengine.c ****   if ( ( pos & 0x08 ) != 0 )
 398              		.loc 1 417 0
 399 0002 431C     		adds	r3, r0, #1
 400 0004 D8B2     		uxtb	r0, r3
 401              	.LVL28:
 418:u8glib/chessengine.c ****   {
 402              		.loc 1 418 0
 403 0006 10F0080F 		tst	r0, #8
 404 000a 03D0     		beq	.L29
 420:u8glib/chessengine.c ****     pos&= 0xf0; 
 405              		.loc 1 420 0
 406 000c 02F11100 		add	r0, r2, #17
 407              	.LVL29:
 421:u8glib/chessengine.c ****   }
 408              		.loc 1 421 0
 409 0010 00F0F000 		and	r0, r0, #240
 410              	.LVL30:
 411              	.L29:
 423:u8glib/chessengine.c ****     pos = 0;
 412              		.loc 1 423 0
 413 0014 10F0800F 		tst	r0, #128
 414 0018 00D0     		beq	.L30
 424:u8glib/chessengine.c ****   return pos;
 415              		.loc 1 424 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 23


 416 001a 0020     		movs	r0, #0
 417              	.LVL31:
 418              	.L30:
 426:u8glib/chessengine.c **** 
 419              		.loc 1 426 0
 420 001c 7047     		bx	lr
 421              		.cfi_endproc
 422              	.LFE6:
 424 001e 00BF     		.section	.text.cu_PrevPos,"ax",%progbits
 425              		.align	2
 426              		.global	cu_PrevPos
 427              		.thumb
 428              		.thumb_func
 430              	cu_PrevPos:
 431              	.LFB7:
 429:u8glib/chessengine.c ****   /* calculate prev gpos */
 432              		.loc 1 429 0
 433              		.cfi_startproc
 434              		@ args = 0, pretend = 0, frame = 0
 435              		@ frame_needed = 0, uses_anonymous_args = 0
 436              		@ link register save eliminated.
 437              	.LVL32:
 431:u8glib/chessengine.c ****   if ( ( pos & 0x80 ) != 0 )
 438              		.loc 1 431 0
 439 0000 0138     		subs	r0, r0, #1
 440              	.LVL33:
 441 0002 C0B2     		uxtb	r0, r0
 442              	.LVL34:
 432:u8glib/chessengine.c ****     pos = 0x077;
 443              		.loc 1 432 0
 444 0004 10F0800F 		tst	r0, #128
 445 0008 07D1     		bne	.L34
 434:u8glib/chessengine.c ****   {
 446              		.loc 1 434 0
 447 000a 10F0080F 		tst	r0, #8
 448 000e 05D0     		beq	.L33
 436:u8glib/chessengine.c ****     pos |= 0x07;
 449              		.loc 1 436 0
 450 0010 00F0F000 		and	r0, r0, #240
 451              	.LVL35:
 437:u8glib/chessengine.c ****   }
 452              		.loc 1 437 0
 453 0014 40F00700 		orr	r0, r0, #7
 454              	.LVL36:
 455 0018 7047     		bx	lr
 456              	.L34:
 433:u8glib/chessengine.c ****   else if ( ( pos & 0x08 ) != 0 )
 457              		.loc 1 433 0
 458 001a 7720     		movs	r0, #119
 459              	.LVL37:
 460              	.L33:
 440:u8glib/chessengine.c **** 
 461              		.loc 1 440 0
 462 001c 7047     		bx	lr
 463              		.cfi_endproc
 464              	.LFE7:
 466 001e 00BF     		.section	.text.cp_GetFromBoard,"ax",%progbits
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 24


 467              		.align	2
 468              		.global	cp_GetFromBoard
 469              		.thumb
 470              		.thumb_func
 472              	cp_GetFromBoard:
 473              	.LFB12:
 513:u8glib/chessengine.c ****   return lrc_obj.board[cu_gpos2bpos(pos)];
 474              		.loc 1 513 0
 475              		.cfi_startproc
 476              		@ args = 0, pretend = 0, frame = 0
 477              		@ frame_needed = 0, uses_anonymous_args = 0
 478              	.LVL38:
 479 0000 08B5     		push	{r3, lr}
 480              	.LCFI5:
 481              		.cfi_def_cfa_offset 8
 482              		.cfi_offset 3, -8
 483              		.cfi_offset 14, -4
 514:u8glib/chessengine.c **** }
 484              		.loc 1 514 0
 485 0002 FFF7FEFF 		bl	cu_gpos2bpos
 486              	.LVL39:
 487 0006 024B     		ldr	r3, .L37
 488 0008 1844     		add	r0, r0, r3
 515:u8glib/chessengine.c **** 
 489              		.loc 1 515 0
 490 000a 8078     		ldrb	r0, [r0, #2]	@ zero_extendqisi2
 491 000c 08BD     		pop	{r3, pc}
 492              	.L38:
 493 000e 00BF     		.align	2
 494              	.L37:
 495 0010 00000000 		.word	lrc_obj
 496              		.cfi_endproc
 497              	.LFE12:
 499              		.section	.text.cp_SetOnBoard,"ax",%progbits
 500              		.align	2
 501              		.global	cp_SetOnBoard
 502              		.thumb
 503              		.thumb_func
 505              	cp_SetOnBoard:
 506              	.LFB13:
 522:u8glib/chessengine.c ****   /*printf("cp_SetOnBoard gpos:%02x cp:%02x\n", pos, cp);*/
 507              		.loc 1 522 0
 508              		.cfi_startproc
 509              		@ args = 0, pretend = 0, frame = 0
 510              		@ frame_needed = 0, uses_anonymous_args = 0
 511              	.LVL40:
 512 0000 10B5     		push	{r4, lr}
 513              	.LCFI6:
 514              		.cfi_def_cfa_offset 8
 515              		.cfi_offset 4, -8
 516              		.cfi_offset 14, -4
 517 0002 0C46     		mov	r4, r1
 524:u8glib/chessengine.c **** }
 518              		.loc 1 524 0
 519 0004 FFF7FEFF 		bl	cu_gpos2bpos
 520              	.LVL41:
 521 0008 014B     		ldr	r3, .L41
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 25


 522 000a 1844     		add	r0, r0, r3
 523 000c 8470     		strb	r4, [r0, #2]
 524 000e 10BD     		pop	{r4, pc}
 525              	.L42:
 526              		.align	2
 527              	.L41:
 528 0010 00000000 		.word	lrc_obj
 529              		.cfi_endproc
 530              	.LFE13:
 532              		.section	.text.cu_IsIllegalPosition,"ax",%progbits
 533              		.align	2
 534              		.global	cu_IsIllegalPosition
 535              		.thumb
 536              		.thumb_func
 538              	cu_IsIllegalPosition:
 539              	.LFB17:
 622:u8glib/chessengine.c ****   uint8_t board_cp;
 540              		.loc 1 622 0
 541              		.cfi_startproc
 542              		@ args = 0, pretend = 0, frame = 0
 543              		@ frame_needed = 0, uses_anonymous_args = 0
 544              	.LVL42:
 545 0000 38B5     		push	{r3, r4, r5, lr}
 546              	.LCFI7:
 547              		.cfi_def_cfa_offset 16
 548              		.cfi_offset 3, -16
 549              		.cfi_offset 4, -12
 550              		.cfi_offset 5, -8
 551              		.cfi_offset 14, -4
 625:u8glib/chessengine.c ****     return 1;
 552              		.loc 1 625 0
 553 0002 10F08805 		ands	r5, r0, #136
 554 0006 09D1     		bne	.L45
 555 0008 0C46     		mov	r4, r1
 628:u8glib/chessengine.c ****   /* check if hit our own pieces */
 556              		.loc 1 628 0
 557 000a FFF7FEFF 		bl	cp_GetFromBoard
 558              	.LVL43:
 630:u8glib/chessengine.c ****     if ( cp_GetColor(board_cp) == my_color )
 559              		.loc 1 630 0
 560 000e 30B1     		cbz	r0, .L44
 631:u8glib/chessengine.c ****       return 1;
 561              		.loc 1 631 0
 562 0010 FFF7FEFF 		bl	cp_GetColor
 563              	.LVL44:
 564 0014 A042     		cmp	r0, r4
 565 0016 02D1     		bne	.L44
 632:u8glib/chessengine.c ****   /* all ok, we could go to this position */
 566              		.loc 1 632 0
 567 0018 0125     		movs	r5, #1
 568 001a 00E0     		b	.L44
 569              	.LVL45:
 570              	.L45:
 626:u8glib/chessengine.c ****   /* get the piece from the board */
 571              		.loc 1 626 0
 572 001c 0125     		movs	r5, #1
 573              	.LVL46:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 26


 574              	.L44:
 635:u8glib/chessengine.c **** 
 575              		.loc 1 635 0
 576 001e 2846     		mov	r0, r5
 577 0020 38BD     		pop	{r3, r4, r5, pc}
 578              		.cfi_endproc
 579              	.LFE17:
 581 0022 00BF     		.section	.text.ce_Eval,"ax",%progbits
 582              		.align	2
 583              		.global	ce_Eval
 584              		.thumb
 585              		.thumb_func
 587              	ce_Eval:
 588              	.LFB18:
 662:u8glib/chessengine.c ****   uint8_t cp;
 589              		.loc 1 662 0
 590              		.cfi_startproc
 591              		@ args = 0, pretend = 0, frame = 8
 592              		@ frame_needed = 0, uses_anonymous_args = 0
 593 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 594              	.LCFI8:
 595              		.cfi_def_cfa_offset 36
 596              		.cfi_offset 4, -36
 597              		.cfi_offset 5, -32
 598              		.cfi_offset 6, -28
 599              		.cfi_offset 7, -24
 600              		.cfi_offset 8, -20
 601              		.cfi_offset 9, -16
 602              		.cfi_offset 10, -12
 603              		.cfi_offset 11, -8
 604              		.cfi_offset 14, -4
 605 0004 83B0     		sub	sp, sp, #12
 606              	.LCFI9:
 607              		.cfi_def_cfa_offset 48
 608              	.LVL47:
 673:u8glib/chessengine.c ****   do
 609              		.loc 1 673 0
 610 0006 0024     		movs	r4, #0
 669:u8glib/chessengine.c ****   eval_t result;
 611              		.loc 1 669 0
 612 0008 A346     		mov	fp, r4
 668:u8glib/chessengine.c ****   eval_t position_opposit_color = 0;
 613              		.loc 1 668 0
 614 000a A146     		mov	r9, r4
 667:u8glib/chessengine.c ****   eval_t position_my_color = 0;
 615              		.loc 1 667 0
 616 000c A046     		mov	r8, r4
 666:u8glib/chessengine.c ****   eval_t material_opposit_color = 0;
 617              		.loc 1 666 0
 618 000e A246     		mov	r10, r4
 665:u8glib/chessengine.c ****   eval_t material_my_color = 0;
 619              		.loc 1 665 0
 620 0010 0094     		str	r4, [sp]
 664:u8glib/chessengine.c ****   uint8_t is_opposit_king_present = 0;
 621              		.loc 1 664 0
 622 0012 0194     		str	r4, [sp, #4]
 623              	.LVL48:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 27


 624              	.L54:
 677:u8glib/chessengine.c ****     
 625              		.loc 1 677 0
 626 0014 2046     		mov	r0, r4
 627 0016 FFF7FEFF 		bl	cp_GetFromBoard
 628              	.LVL49:
 629 001a 0646     		mov	r6, r0
 630              	.LVL50:
 679:u8glib/chessengine.c ****     {
 631              		.loc 1 679 0
 632 001c FFF7FEFF 		bl	cp_GetPiece
 633              	.LVL51:
 634 0020 0546     		mov	r5, r0
 635 0022 0028     		cmp	r0, #0
 636 0024 38D0     		beq	.L48
 681:u8glib/chessengine.c ****       {
 637              		.loc 1 681 0
 638 0026 FFF7FEFF 		bl	stack_GetCurrElement
 639              	.LVL52:
 640 002a 8778     		ldrb	r7, [r0, #2]	@ zero_extendqisi2
 641 002c 3046     		mov	r0, r6
 642 002e FFF7FEFF 		bl	cp_GetColor
 643              	.LVL53:
 644 0032 8742     		cmp	r7, r0
 645 0034 18D1     		bne	.L49
 685:u8glib/chessengine.c **** 	  is_my_king_present = 1;
 646              		.loc 1 685 0
 647 0036 062D     		cmp	r5, #6
 648 0038 01D1     		bne	.L50
 686:u8glib/chessengine.c **** 	material_my_color += ce_piece_weight[cp_GetPiece(cp)];
 649              		.loc 1 686 0
 650 003a 0123     		movs	r3, #1
 651 003c 0193     		str	r3, [sp, #4]
 652              	.LVL54:
 653              	.L50:
 687:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == PIECE_PAWN || cp_GetPiece(cp) == PIECE_KNIGHT  )
 654              		.loc 1 687 0
 655 003e 234B     		ldr	r3, .L61
 656 0040 5B5D     		ldrb	r3, [r3, r5]	@ zero_extendqisi2
 657 0042 9A44     		add	r10, r10, r3
 658              	.LVL55:
 659 0044 0FFA8AFA 		sxth	r10, r10
 660              	.LVL56:
 688:u8glib/chessengine.c **** 	{
 661              		.loc 1 688 0
 662 0048 012D     		cmp	r5, #1
 663 004a 01D0     		beq	.L51
 688:u8glib/chessengine.c **** 	{
 664              		.loc 1 688 0 is_stmt 0 discriminator 1
 665 004c 022D     		cmp	r5, #2
 666 004e 23D1     		bne	.L48
 667              	.L51:
 690:u8glib/chessengine.c **** 	}
 668              		.loc 1 690 0 is_stmt 1
 669 0050 04F00703 		and	r3, r4, #7
 670 0054 1E4A     		ldr	r2, .L61+4
 671 0056 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 28


 672 0058 C4F30213 		ubfx	r3, r4, #4, #3
 673 005c D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 674 005e 01FB0399 		mla	r9, r1, r3, r9
 675              	.LVL57:
 676 0062 0FFA89F9 		sxth	r9, r9
 677              	.LVL58:
 678 0066 17E0     		b	.L48
 679              	.L49:
 696:u8glib/chessengine.c **** 	  is_opposit_king_present = 1;
 680              		.loc 1 696 0
 681 0068 062D     		cmp	r5, #6
 682 006a 01D1     		bne	.L52
 697:u8glib/chessengine.c **** 	material_opposit_color += ce_piece_weight[cp_GetPiece(cp)];
 683              		.loc 1 697 0
 684 006c 0123     		movs	r3, #1
 685 006e 0093     		str	r3, [sp]
 686              	.LVL59:
 687              	.L52:
 698:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == PIECE_PAWN || cp_GetPiece(cp) == PIECE_KNIGHT )
 688              		.loc 1 698 0
 689 0070 164B     		ldr	r3, .L61
 690 0072 5B5D     		ldrb	r3, [r3, r5]	@ zero_extendqisi2
 691 0074 9844     		add	r8, r8, r3
 692              	.LVL60:
 693 0076 0FFA88F8 		sxth	r8, r8
 694              	.LVL61:
 699:u8glib/chessengine.c **** 	{
 695              		.loc 1 699 0
 696 007a 012D     		cmp	r5, #1
 697 007c 01D0     		beq	.L53
 699:u8glib/chessengine.c **** 	{
 698              		.loc 1 699 0 is_stmt 0 discriminator 1
 699 007e 022D     		cmp	r5, #2
 700 0080 0AD1     		bne	.L48
 701              	.L53:
 701:u8glib/chessengine.c **** 	}
 702              		.loc 1 701 0 is_stmt 1
 703 0082 04F00703 		and	r3, r4, #7
 704 0086 124A     		ldr	r2, .L61+4
 705 0088 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
 706 008a C4F30213 		ubfx	r3, r4, #4, #3
 707 008e D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 708 0090 01FB03BB 		mla	fp, r1, r3, fp
 709              	.LVL62:
 710 0094 0FFA8BFB 		sxth	fp, fp
 711              	.LVL63:
 712              	.L48:
 705:u8glib/chessengine.c ****   } while( pos != 0 );
 713              		.loc 1 705 0
 714 0098 2046     		mov	r0, r4
 715 009a FFF7FEFF 		bl	cu_NextPos
 716              	.LVL64:
 706:u8glib/chessengine.c **** 
 717              		.loc 1 706 0
 718 009e 0446     		mov	r4, r0
 719 00a0 0028     		cmp	r0, #0
 720 00a2 B7D1     		bne	.L54
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 29


 710:u8glib/chessengine.c ****     return EVAL_T_MIN;	/*_LOST*/
 721              		.loc 1 710 0
 722 00a4 019B     		ldr	r3, [sp, #4]
 723 00a6 53B1     		cbz	r3, .L58
 712:u8glib/chessengine.c ****     return EVAL_T_MAX;	/*_WIN*/
 724              		.loc 1 712 0
 725 00a8 009B     		ldr	r3, [sp]
 726 00aa 53B1     		cbz	r3, .L59
 717:u8glib/chessengine.c ****   result <<= 3;
 727              		.loc 1 717 0
 728 00ac C8EB0A00 		rsb	r0, r8, r10
 729              	.LVL65:
 730 00b0 00B2     		sxth	r0, r0
 731              	.LVL66:
 719:u8glib/chessengine.c ****   return result;
 732              		.loc 1 719 0
 733 00b2 CBEB0909 		rsb	r9, fp, r9
 734              	.LVL67:
 735 00b6 09EBC000 		add	r0, r9, r0, lsl #3
 736              	.LVL68:
 737 00ba 00B2     		sxth	r0, r0
 738              	.LVL69:
 720:u8glib/chessengine.c **** }
 739              		.loc 1 720 0
 740 00bc 03E0     		b	.L55
 741              	.LVL70:
 742              	.L58:
 711:u8glib/chessengine.c ****   if ( is_opposit_king_present == 0 )
 743              		.loc 1 711 0
 744 00be 0548     		ldr	r0, .L61+8
 745              	.LVL71:
 746 00c0 01E0     		b	.L55
 747              	.LVL72:
 748              	.L59:
 713:u8glib/chessengine.c ****   
 749              		.loc 1 713 0
 750 00c2 47F6FF70 		movw	r0, #32767
 751              	.LVL73:
 752              	.L55:
 721:u8glib/chessengine.c **** 
 753              		.loc 1 721 0
 754 00c6 03B0     		add	sp, sp, #12
 755              	.LCFI10:
 756              		.cfi_def_cfa_offset 36
 757              	.LVL74:
 758              		@ sp needed
 759 00c8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 760              	.LVL75:
 761              	.L62:
 762              		.align	2
 763              	.L61:
 764 00cc 00000000 		.word	.LANCHOR0
 765 00d0 00000000 		.word	.LANCHOR1
 766 00d4 0180FFFF 		.word	-32767
 767              		.cfi_endproc
 768              	.LFE18:
 770              		.section	.text.cu_ClearMoveHistory,"ax",%progbits
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 30


 771              		.align	2
 772              		.global	cu_ClearMoveHistory
 773              		.thumb
 774              		.thumb_func
 776              	cu_ClearMoveHistory:
 777              	.LFB19:
 732:u8glib/chessengine.c ****   lrc_obj.chm_pos = 0;
 778              		.loc 1 732 0
 779              		.cfi_startproc
 780              		@ args = 0, pretend = 0, frame = 0
 781              		@ frame_needed = 0, uses_anonymous_args = 0
 782              		@ link register save eliminated.
 733:u8glib/chessengine.c **** }
 783              		.loc 1 733 0
 784 0000 0022     		movs	r2, #0
 785 0002 014B     		ldr	r3, .L64
 786 0004 5A70     		strb	r2, [r3, #1]
 787 0006 7047     		bx	lr
 788              	.L65:
 789              		.align	2
 790              	.L64:
 791 0008 00000000 		.word	lrc_obj
 792              		.cfi_endproc
 793              	.LFE19:
 795              		.section	.text.cu_ClearBoard,"ax",%progbits
 796              		.align	2
 797              		.global	cu_ClearBoard
 798              		.thumb
 799              		.thumb_func
 801              	cu_ClearBoard:
 802              	.LFB14:
 532:u8glib/chessengine.c ****   uint8_t i;
 803              		.loc 1 532 0
 804              		.cfi_startproc
 805              		@ args = 0, pretend = 0, frame = 0
 806              		@ frame_needed = 0, uses_anonymous_args = 0
 807 0000 08B5     		push	{r3, lr}
 808              	.LCFI11:
 809              		.cfi_def_cfa_offset 8
 810              		.cfi_offset 3, -8
 811              		.cfi_offset 14, -4
 812              	.LVL76:
 535:u8glib/chessengine.c ****     lrc_obj.board[i] = PIECE_NONE;
 813              		.loc 1 535 0
 814 0002 0023     		movs	r3, #0
 815 0004 05E0     		b	.L67
 816              	.LVL77:
 817              	.L68:
 536:u8glib/chessengine.c ****   
 818              		.loc 1 536 0 discriminator 3
 819 0006 0E4A     		ldr	r2, .L70
 820 0008 1A44     		add	r2, r2, r3
 821 000a 0021     		movs	r1, #0
 822 000c 9170     		strb	r1, [r2, #2]
 535:u8glib/chessengine.c ****     lrc_obj.board[i] = PIECE_NONE;
 823              		.loc 1 535 0 discriminator 3
 824 000e 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 31


 825              	.LVL78:
 826 0010 DBB2     		uxtb	r3, r3
 827              	.LVL79:
 828              	.L67:
 535:u8glib/chessengine.c ****     lrc_obj.board[i] = PIECE_NONE;
 829              		.loc 1 535 0 is_stmt 0 discriminator 1
 830 0012 3F2B     		cmp	r3, #63
 831 0014 F7D9     		bls	.L68
 538:u8glib/chessengine.c ****   lrc_obj.orientation = COLOR_WHITE;
 832              		.loc 1 538 0 is_stmt 1
 833 0016 0A4B     		ldr	r3, .L70
 834              	.LVL80:
 835 0018 0022     		movs	r2, #0
 836 001a 1A70     		strb	r2, [r3]
 539:u8glib/chessengine.c ****   
 837              		.loc 1 539 0
 838 001c 83F84520 		strb	r2, [r3, #69]
 541:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[1] = ILLEGAL_POSITION;
 839              		.loc 1 541 0
 840 0020 FF21     		movs	r1, #255
 841 0022 83F84210 		strb	r1, [r3, #66]
 542:u8glib/chessengine.c ****   
 842              		.loc 1 542 0
 843 0026 83F84310 		strb	r1, [r3, #67]
 544:u8glib/chessengine.c ****   
 844              		.loc 1 544 0
 845 002a 0F21     		movs	r1, #15
 846 002c 83F84410 		strb	r1, [r3, #68]
 546:u8glib/chessengine.c ****   lrc_obj.lost_side_color = 0;
 847              		.loc 1 546 0
 848 0030 83F84720 		strb	r2, [r3, #71]
 547:u8glib/chessengine.c **** 
 849              		.loc 1 547 0
 850 0034 83F84820 		strb	r2, [r3, #72]
 550:u8glib/chessengine.c **** 
 851              		.loc 1 550 0
 852 0038 FFF7FEFF 		bl	cu_ClearMoveHistory
 853              	.LVL81:
 854 003c 08BD     		pop	{r3, pc}
 855              	.L71:
 856 003e 00BF     		.align	2
 857              	.L70:
 858 0040 00000000 		.word	lrc_obj
 859              		.cfi_endproc
 860              	.LFE14:
 862              		.section	.text.chess_SetupBoardTest01,"ax",%progbits
 863              		.align	2
 864              		.global	chess_SetupBoardTest01
 865              		.thumb
 866              		.thumb_func
 868              	chess_SetupBoardTest01:
 869              	.LFB15:
 559:u8glib/chessengine.c ****   cu_ClearBoard();
 870              		.loc 1 559 0
 871              		.cfi_startproc
 872              		@ args = 0, pretend = 0, frame = 0
 873              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 32


 874 0000 10B5     		push	{r4, lr}
 875              	.LCFI12:
 876              		.cfi_def_cfa_offset 8
 877              		.cfi_offset 4, -8
 878              		.cfi_offset 14, -4
 560:u8glib/chessengine.c ****   lrc_obj.board[7+7*8] = cp_Construct(COLOR_BLACK, PIECE_KING);
 879              		.loc 1 560 0
 880 0002 FFF7FEFF 		bl	cu_ClearBoard
 881              	.LVL82:
 561:u8glib/chessengine.c ****   lrc_obj.board[7+5*8] = cp_Construct(COLOR_WHITE, PIECE_PAWN);
 882              		.loc 1 561 0
 883 0006 0621     		movs	r1, #6
 884 0008 0120     		movs	r0, #1
 885 000a FFF7FEFF 		bl	cp_Construct
 886              	.LVL83:
 887 000e 0D4C     		ldr	r4, .L74
 888 0010 84F84100 		strb	r0, [r4, #65]
 562:u8glib/chessengine.c ****   lrc_obj.board[3] = cp_Construct(COLOR_WHITE, PIECE_KING);
 889              		.loc 1 562 0
 890 0014 0121     		movs	r1, #1
 891 0016 0020     		movs	r0, #0
 892 0018 FFF7FEFF 		bl	cp_Construct
 893              	.LVL84:
 894 001c 84F83100 		strb	r0, [r4, #49]
 563:u8glib/chessengine.c ****   lrc_obj.board[0+7*8] = cp_Construct(COLOR_BLACK, PIECE_ROOK);
 895              		.loc 1 563 0
 896 0020 0621     		movs	r1, #6
 897 0022 0020     		movs	r0, #0
 898 0024 FFF7FEFF 		bl	cp_Construct
 899              	.LVL85:
 900 0028 6071     		strb	r0, [r4, #5]
 564:u8glib/chessengine.c ****   lrc_obj.board[6] = cp_Construct(COLOR_WHITE, PIECE_QUEEN);
 901              		.loc 1 564 0
 902 002a 0421     		movs	r1, #4
 903 002c 0120     		movs	r0, #1
 904 002e FFF7FEFF 		bl	cp_Construct
 905              	.LVL86:
 906 0032 84F83A00 		strb	r0, [r4, #58]
 565:u8glib/chessengine.c **** } 
 907              		.loc 1 565 0
 908 0036 0521     		movs	r1, #5
 909 0038 0020     		movs	r0, #0
 910 003a FFF7FEFF 		bl	cp_Construct
 911              	.LVL87:
 912 003e 2072     		strb	r0, [r4, #8]
 913 0040 10BD     		pop	{r4, pc}
 914              	.L75:
 915 0042 00BF     		.align	2
 916              	.L74:
 917 0044 00000000 		.word	lrc_obj
 918              		.cfi_endproc
 919              	.LFE15:
 921              		.section	.text.chess_SetupBoard,"ax",%progbits
 922              		.align	2
 923              		.global	chess_SetupBoard
 924              		.thumb
 925              		.thumb_func
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 33


 927              	chess_SetupBoard:
 928              	.LFB16:
 570:u8glib/chessengine.c ****   uint8_t i;
 929              		.loc 1 570 0
 930              		.cfi_startproc
 931              		@ args = 0, pretend = 0, frame = 0
 932              		@ frame_needed = 0, uses_anonymous_args = 0
 933 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 934              	.LCFI13:
 935              		.cfi_def_cfa_offset 24
 936              		.cfi_offset 3, -24
 937              		.cfi_offset 4, -20
 938              		.cfi_offset 5, -16
 939              		.cfi_offset 6, -12
 940              		.cfi_offset 7, -8
 941              		.cfi_offset 14, -4
 575:u8glib/chessengine.c ****   
 942              		.loc 1 575 0
 943 0002 FFF7FEFF 		bl	cu_ClearBoard
 944              	.LVL88:
 578:u8glib/chessengine.c ****   bp = cp_Construct(COLOR_BLACK, PIECE_PAWN);
 945              		.loc 1 578 0
 946 0006 0121     		movs	r1, #1
 947 0008 0020     		movs	r0, #0
 948 000a FFF7FEFF 		bl	cp_Construct
 949              	.LVL89:
 950 000e 0546     		mov	r5, r0
 951              	.LVL90:
 579:u8glib/chessengine.c ****   
 952              		.loc 1 579 0
 953 0010 0121     		movs	r1, #1
 954 0012 0846     		mov	r0, r1
 955 0014 FFF7FEFF 		bl	cp_Construct
 956              	.LVL91:
 582:u8glib/chessengine.c ****   {
 957              		.loc 1 582 0
 958 0018 0023     		movs	r3, #0
 959 001a 0AE0     		b	.L77
 960              	.LVL92:
 961              	.L78:
 584:u8glib/chessengine.c ****     lrc_obj.board[i+6*8] = bp;
 962              		.loc 1 584 0 discriminator 3
 963 001c 03F10801 		add	r1, r3, #8
 964 0020 294C     		ldr	r4, .L80
 965 0022 2144     		add	r1, r1, r4
 966 0024 8D70     		strb	r5, [r1, #2]
 585:u8glib/chessengine.c ****   }
 967              		.loc 1 585 0 discriminator 3
 968 0026 03F13002 		add	r2, r3, #48
 969 002a 2244     		add	r2, r2, r4
 970 002c 9070     		strb	r0, [r2, #2]
 582:u8glib/chessengine.c ****   {
 971              		.loc 1 582 0 discriminator 3
 972 002e 0133     		adds	r3, r3, #1
 973              	.LVL93:
 974 0030 DBB2     		uxtb	r3, r3
 975              	.LVL94:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 34


 976              	.L77:
 582:u8glib/chessengine.c ****   {
 977              		.loc 1 582 0 is_stmt 0 discriminator 1
 978 0032 072B     		cmp	r3, #7
 979 0034 F2D9     		bls	.L78
 590:u8glib/chessengine.c ****   lrc_obj.board[1] = cp_Construct(COLOR_WHITE, PIECE_KNIGHT);
 980              		.loc 1 590 0 is_stmt 1
 981 0036 0421     		movs	r1, #4
 982 0038 0020     		movs	r0, #0
 983              	.LVL95:
 984 003a FFF7FEFF 		bl	cp_Construct
 985              	.LVL96:
 986 003e 0546     		mov	r5, r0
 987              	.LVL97:
 988 0040 214C     		ldr	r4, .L80
 989 0042 A070     		strb	r0, [r4, #2]
 591:u8glib/chessengine.c ****   lrc_obj.board[2] = cp_Construct(COLOR_WHITE, PIECE_BISHOP);
 990              		.loc 1 591 0
 991 0044 0221     		movs	r1, #2
 992 0046 0020     		movs	r0, #0
 993 0048 FFF7FEFF 		bl	cp_Construct
 994              	.LVL98:
 995 004c 0646     		mov	r6, r0
 996 004e E070     		strb	r0, [r4, #3]
 592:u8glib/chessengine.c ****   lrc_obj.board[3] = cp_Construct(COLOR_WHITE, PIECE_QUEEN);
 997              		.loc 1 592 0
 998 0050 0321     		movs	r1, #3
 999 0052 0020     		movs	r0, #0
 1000 0054 FFF7FEFF 		bl	cp_Construct
 1001              	.LVL99:
 1002 0058 0746     		mov	r7, r0
 1003 005a 2071     		strb	r0, [r4, #4]
 593:u8glib/chessengine.c ****   lrc_obj.board[4] = cp_Construct(COLOR_WHITE, PIECE_KING);
 1004              		.loc 1 593 0
 1005 005c 0521     		movs	r1, #5
 1006 005e 0020     		movs	r0, #0
 1007 0060 FFF7FEFF 		bl	cp_Construct
 1008              	.LVL100:
 1009 0064 6071     		strb	r0, [r4, #5]
 594:u8glib/chessengine.c ****   lrc_obj.board[5] = cp_Construct(COLOR_WHITE, PIECE_BISHOP);
 1010              		.loc 1 594 0
 1011 0066 0621     		movs	r1, #6
 1012 0068 0020     		movs	r0, #0
 1013 006a FFF7FEFF 		bl	cp_Construct
 1014              	.LVL101:
 1015 006e A071     		strb	r0, [r4, #6]
 595:u8glib/chessengine.c ****   lrc_obj.board[6] = cp_Construct(COLOR_WHITE, PIECE_KNIGHT);
 1016              		.loc 1 595 0
 1017 0070 E771     		strb	r7, [r4, #7]
 596:u8glib/chessengine.c ****   lrc_obj.board[7] = cp_Construct(COLOR_WHITE, PIECE_ROOK);
 1018              		.loc 1 596 0
 1019 0072 2672     		strb	r6, [r4, #8]
 597:u8glib/chessengine.c **** 
 1020              		.loc 1 597 0
 1021 0074 6572     		strb	r5, [r4, #9]
 599:u8glib/chessengine.c ****   lrc_obj.board[1+7*8] = cp_Construct(COLOR_BLACK, PIECE_KNIGHT);
 1022              		.loc 1 599 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 35


 1023 0076 0421     		movs	r1, #4
 1024 0078 0120     		movs	r0, #1
 1025 007a FFF7FEFF 		bl	cp_Construct
 1026              	.LVL102:
 1027 007e 0546     		mov	r5, r0
 1028 0080 84F83A00 		strb	r0, [r4, #58]
 600:u8glib/chessengine.c ****   lrc_obj.board[2+7*8] = cp_Construct(COLOR_BLACK, PIECE_BISHOP);
 1029              		.loc 1 600 0
 1030 0084 0221     		movs	r1, #2
 1031 0086 0120     		movs	r0, #1
 1032 0088 FFF7FEFF 		bl	cp_Construct
 1033              	.LVL103:
 1034 008c 0646     		mov	r6, r0
 1035 008e 84F83B00 		strb	r0, [r4, #59]
 601:u8glib/chessengine.c ****   lrc_obj.board[3+7*8] = cp_Construct(COLOR_BLACK, PIECE_QUEEN);
 1036              		.loc 1 601 0
 1037 0092 0321     		movs	r1, #3
 1038 0094 0120     		movs	r0, #1
 1039 0096 FFF7FEFF 		bl	cp_Construct
 1040              	.LVL104:
 1041 009a 0746     		mov	r7, r0
 1042 009c 84F83C00 		strb	r0, [r4, #60]
 602:u8glib/chessengine.c ****   lrc_obj.board[4+7*8] = cp_Construct(COLOR_BLACK, PIECE_KING);
 1043              		.loc 1 602 0
 1044 00a0 0521     		movs	r1, #5
 1045 00a2 0120     		movs	r0, #1
 1046 00a4 FFF7FEFF 		bl	cp_Construct
 1047              	.LVL105:
 1048 00a8 84F83D00 		strb	r0, [r4, #61]
 603:u8glib/chessengine.c ****   lrc_obj.board[5+7*8] = cp_Construct(COLOR_BLACK, PIECE_BISHOP);
 1049              		.loc 1 603 0
 1050 00ac 0621     		movs	r1, #6
 1051 00ae 0120     		movs	r0, #1
 1052 00b0 FFF7FEFF 		bl	cp_Construct
 1053              	.LVL106:
 1054 00b4 84F83E00 		strb	r0, [r4, #62]
 604:u8glib/chessengine.c ****   lrc_obj.board[6+7*8] = cp_Construct(COLOR_BLACK, PIECE_KNIGHT);
 1055              		.loc 1 604 0
 1056 00b8 84F83F70 		strb	r7, [r4, #63]
 605:u8glib/chessengine.c ****   lrc_obj.board[7+7*8] = cp_Construct(COLOR_BLACK, PIECE_ROOK);
 1057              		.loc 1 605 0
 1058 00bc 84F84060 		strb	r6, [r4, #64]
 606:u8glib/chessengine.c **** 
 1059              		.loc 1 606 0
 1060 00c0 84F84150 		strb	r5, [r4, #65]
 1061 00c4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1062              	.L81:
 1063 00c6 00BF     		.align	2
 1064              	.L80:
 1065 00c8 00000000 		.word	lrc_obj
 1066              		.cfi_endproc
 1067              	.LFE16:
 1069              		.section	.text.cu_ReduceHistoryByFullMove,"ax",%progbits
 1070              		.align	2
 1071              		.global	cu_ReduceHistoryByFullMove
 1072              		.thumb
 1073              		.thumb_func
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 36


 1075              	cu_ReduceHistoryByFullMove:
 1076              	.LFB20:
 737:u8glib/chessengine.c ****   uint8_t i;
 1077              		.loc 1 737 0
 1078              		.cfi_startproc
 1079              		@ args = 0, pretend = 0, frame = 0
 1080              		@ frame_needed = 0, uses_anonymous_args = 0
 1081              		@ link register save eliminated.
 1082 0000 70B4     		push	{r4, r5, r6}
 1083              	.LCFI14:
 1084              		.cfi_def_cfa_offset 12
 1085              		.cfi_offset 4, -12
 1086              		.cfi_offset 5, -8
 1087              		.cfi_offset 6, -4
 739:u8glib/chessengine.c ****   {
 1088              		.loc 1 739 0
 1089 0002 1AE0     		b	.L83
 1090              	.L86:
 1091 0004 0021     		movs	r1, #0
 1092              	.L85:
 1093              	.LVL107:
 744:u8glib/chessengine.c **** 	break;
 1094              		.loc 1 744 0
 1095 0006 8A1C     		adds	r2, r1, #2
 1096 0008 B242     		cmp	r2, r6
 1097 000a 13DA     		bge	.L84
 746:u8glib/chessengine.c ****       i++;
 1098              		.loc 1 746 0
 1099 000c 0E4B     		ldr	r3, .L88
 1100 000e 01EBC100 		add	r0, r1, r1, lsl #3
 1101 0012 1844     		add	r0, r0, r3
 1102 0014 02EBC202 		add	r2, r2, r2, lsl #3
 1103 0018 1344     		add	r3, r3, r2
 1104 001a 53F8805F 		ldr	r5, [r3, #128]!	@ unaligned
 1105 001e 5A68     		ldr	r2, [r3, #4]	@ unaligned
 1106 0020 C0F88050 		str	r5, [r0, #128]	@ unaligned
 1107 0024 C0F88420 		str	r2, [r0, #132]	@ unaligned
 1108 0028 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1109 002a 80F88830 		strb	r3, [r0, #136]
 747:u8glib/chessengine.c ****     }
 1110              		.loc 1 747 0
 1111 002e 0131     		adds	r1, r1, #1
 1112              	.LVL108:
 1113 0030 C9B2     		uxtb	r1, r1
 1114              	.LVL109:
 748:u8glib/chessengine.c ****     lrc_obj.chm_pos -= 2;
 1115              		.loc 1 748 0
 1116 0032 E8E7     		b	.L85
 1117              	.L84:
 749:u8glib/chessengine.c ****   }
 1118              		.loc 1 749 0
 1119 0034 023E     		subs	r6, r6, #2
 1120 0036 044B     		ldr	r3, .L88
 1121 0038 5E70     		strb	r6, [r3, #1]
 1122              	.LVL110:
 1123              	.L83:
 739:u8glib/chessengine.c ****   {
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 37


 1124              		.loc 1 739 0
 1125 003a 034B     		ldr	r3, .L88
 1126 003c 5E78     		ldrb	r6, [r3, #1]	@ zero_extendqisi2
 1127 003e 062E     		cmp	r6, #6
 1128 0040 E0D8     		bhi	.L86
 751:u8glib/chessengine.c **** 
 1129              		.loc 1 751 0
 1130 0042 70BC     		pop	{r4, r5, r6}
 1131              	.LCFI15:
 1132              		.cfi_restore 6
 1133              		.cfi_restore 5
 1134              		.cfi_restore 4
 1135              		.cfi_def_cfa_offset 0
 1136 0044 7047     		bx	lr
 1137              	.L89:
 1138 0046 00BF     		.align	2
 1139              	.L88:
 1140 0048 00000000 		.word	lrc_obj
 1141              		.cfi_endproc
 1142              	.LFE20:
 1144              		.section	.text.cu_UndoHalfMove,"ax",%progbits
 1145              		.align	2
 1146              		.global	cu_UndoHalfMove
 1147              		.thumb
 1148              		.thumb_func
 1150              	cu_UndoHalfMove:
 1151              	.LFB21:
 754:u8glib/chessengine.c ****   chm_p chm;
 1152              		.loc 1 754 0
 1153              		.cfi_startproc
 1154              		@ args = 0, pretend = 0, frame = 0
 1155              		@ frame_needed = 0, uses_anonymous_args = 0
 757:u8glib/chessengine.c ****     return;
 1156              		.loc 1 757 0
 1157 0000 154B     		ldr	r3, .L95
 1158 0002 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1159 0004 3BB3     		cbz	r3, .L94
 754:u8glib/chessengine.c ****   chm_p chm;
 1160              		.loc 1 754 0
 1161 0006 10B5     		push	{r4, lr}
 1162              	.LCFI16:
 1163              		.cfi_def_cfa_offset 8
 1164              		.cfi_offset 4, -8
 1165              		.cfi_offset 14, -4
 760:u8glib/chessengine.c **** 
 1166              		.loc 1 760 0
 1167 0008 013B     		subs	r3, r3, #1
 1168 000a DBB2     		uxtb	r3, r3
 1169 000c 124A     		ldr	r2, .L95
 1170 000e 5370     		strb	r3, [r2, #1]
 762:u8glib/chessengine.c ****   
 1171              		.loc 1 762 0
 1172 0010 03EBC303 		add	r3, r3, r3, lsl #3
 1173 0014 02F18001 		add	r1, r2, #128
 1174 0018 5C18     		adds	r4, r3, r1
 1175              	.LVL111:
 764:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[1] = chm->pawn_dbl_move[1];
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 38


 1176              		.loc 1 764 0
 1177 001a A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 1178 001c 82F84200 		strb	r0, [r2, #66]
 765:u8glib/chessengine.c ****   lrc_obj.castling_possible = chm->castling_possible;
 1179              		.loc 1 765 0
 1180 0020 E079     		ldrb	r0, [r4, #7]	@ zero_extendqisi2
 1181 0022 82F84300 		strb	r0, [r2, #67]
 766:u8glib/chessengine.c ****   
 1182              		.loc 1 766 0
 1183 0026 207A     		ldrb	r0, [r4, #8]	@ zero_extendqisi2
 1184 0028 82F84400 		strb	r0, [r2, #68]
 768:u8glib/chessengine.c ****   cp_SetOnBoard(chm->main_dest, PIECE_NONE);
 1185              		.loc 1 768 0
 1186 002c C95C     		ldrb	r1, [r1, r3]	@ zero_extendqisi2
 1187 002e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1188 0030 FFF7FEFF 		bl	cp_SetOnBoard
 1189              	.LVL112:
 769:u8glib/chessengine.c ****   
 1190              		.loc 1 769 0
 1191 0034 0021     		movs	r1, #0
 1192 0036 A078     		ldrb	r0, [r4, #2]	@ zero_extendqisi2
 1193 0038 FFF7FEFF 		bl	cp_SetOnBoard
 1194              	.LVL113:
 771:u8glib/chessengine.c ****     cp_SetOnBoard(chm->other_src, chm->other_cp);
 1195              		.loc 1 771 0
 1196 003c 2079     		ldrb	r0, [r4, #4]	@ zero_extendqisi2
 1197 003e FF28     		cmp	r0, #255
 1198 0040 02D0     		beq	.L92
 772:u8glib/chessengine.c ****   if ( chm->other_dest != ILLEGAL_POSITION )
 1199              		.loc 1 772 0
 1200 0042 E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 1201 0044 FFF7FEFF 		bl	cp_SetOnBoard
 1202              	.LVL114:
 1203              	.L92:
 773:u8glib/chessengine.c ****     cp_SetOnBoard(chm->other_dest, PIECE_NONE);
 1204              		.loc 1 773 0
 1205 0048 6079     		ldrb	r0, [r4, #5]	@ zero_extendqisi2
 1206 004a FF28     		cmp	r0, #255
 1207 004c 02D0     		beq	.L90
 774:u8glib/chessengine.c **** 
 1208              		.loc 1 774 0
 1209 004e 0021     		movs	r1, #0
 1210 0050 FFF7FEFF 		bl	cp_SetOnBoard
 1211              	.LVL115:
 1212              	.L90:
 1213 0054 10BD     		pop	{r4, pc}
 1214              	.LVL116:
 1215              	.L94:
 1216              	.LCFI17:
 1217              		.cfi_def_cfa_offset 0
 1218              		.cfi_restore 4
 1219              		.cfi_restore 14
 1220 0056 7047     		bx	lr
 1221              	.L96:
 1222              		.align	2
 1223              	.L95:
 1224 0058 00000000 		.word	lrc_obj
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 39


 1225              		.cfi_endproc
 1226              	.LFE21:
 1228              		.section	.text.cu_PushHalfMove,"ax",%progbits
 1229              		.align	2
 1230              		.global	cu_PushHalfMove
 1231              		.thumb
 1232              		.thumb_func
 1234              	cu_PushHalfMove:
 1235              	.LFB22:
 790:u8glib/chessengine.c ****   chm_p chm;
 1236              		.loc 1 790 0
 1237              		.cfi_startproc
 1238              		@ args = 0, pretend = 0, frame = 0
 1239              		@ frame_needed = 0, uses_anonymous_args = 0
 1240              		@ link register save eliminated.
 793:u8glib/chessengine.c ****   if ( lrc_obj.chm_pos < CHM_LIST_SIZE-1)
 1241              		.loc 1 793 0
 1242 0000 0A4B     		ldr	r3, .L99
 1243 0002 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 1244 0004 02EBC200 		add	r0, r2, r2, lsl #3
 1245 0008 8033     		adds	r3, r3, #128
 1246 000a 1844     		add	r0, r0, r3
 1247              	.LVL117:
 794:u8glib/chessengine.c ****     lrc_obj.chm_pos++;
 1248              		.loc 1 794 0
 1249 000c 0B2A     		cmp	r2, #11
 1250 000e 02D8     		bhi	.L98
 795:u8glib/chessengine.c **** 
 1251              		.loc 1 795 0
 1252 0010 0132     		adds	r2, r2, #1
 1253 0012 803B     		subs	r3, r3, #128
 1254 0014 5A70     		strb	r2, [r3, #1]
 1255              	.L98:
 797:u8glib/chessengine.c ****   chm->pawn_dbl_move[1] = lrc_obj.pawn_dbl_move[1];
 1256              		.loc 1 797 0
 1257 0016 054B     		ldr	r3, .L99
 1258 0018 93F84220 		ldrb	r2, [r3, #66]	@ zero_extendqisi2
 1259 001c 8271     		strb	r2, [r0, #6]
 798:u8glib/chessengine.c ****   chm->castling_possible = lrc_obj.castling_possible;
 1260              		.loc 1 798 0
 1261 001e 93F84320 		ldrb	r2, [r3, #67]	@ zero_extendqisi2
 1262 0022 C271     		strb	r2, [r0, #7]
 799:u8glib/chessengine.c ****   return chm;
 1263              		.loc 1 799 0
 1264 0024 93F84430 		ldrb	r3, [r3, #68]	@ zero_extendqisi2
 1265 0028 0372     		strb	r3, [r0, #8]
 801:u8glib/chessengine.c **** 
 1266              		.loc 1 801 0
 1267 002a 7047     		bx	lr
 1268              	.L100:
 1269              		.align	2
 1270              	.L99:
 1271 002c 00000000 		.word	lrc_obj
 1272              		.cfi_endproc
 1273              	.LFE22:
 1275              		.section	.text.cu_GetHalfMoveStr,"ax",%progbits
 1276              		.align	2
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 40


 1277              		.global	cu_GetHalfMoveStr
 1278              		.thumb
 1279              		.thumb_func
 1281              	cu_GetHalfMoveStr:
 1282              	.LFB24:
 823:u8glib/chessengine.c **** }
 824:u8glib/chessengine.c **** 
 825:u8glib/chessengine.c **** const char *cu_GetHalfMoveStr(uint8_t idx)
 826:u8glib/chessengine.c **** {
 1283              		.loc 1 826 0
 1284              		.cfi_startproc
 1285              		@ args = 0, pretend = 0, frame = 0
 1286              		@ frame_needed = 0, uses_anonymous_args = 0
 1287              	.LVL118:
 1288 0000 70B5     		push	{r4, r5, r6, lr}
 1289              	.LCFI18:
 1290              		.cfi_def_cfa_offset 16
 1291              		.cfi_offset 4, -16
 1292              		.cfi_offset 5, -12
 1293              		.cfi_offset 6, -8
 1294              		.cfi_offset 14, -4
 1295              	.LVL119:
 827:u8glib/chessengine.c ****   chm_p chm;
 828:u8glib/chessengine.c ****   static char buf[7];		/*Ka1-b2*/
 829:u8glib/chessengine.c ****   char *p = buf;
 830:u8glib/chessengine.c ****   chm = lrc_obj.chm_list+idx;
 1296              		.loc 1 830 0
 1297 0002 00EBC000 		add	r0, r0, r0, lsl #3
 1298              	.LVL120:
 1299 0006 154B     		ldr	r3, .L109
 1300 0008 C618     		adds	r6, r0, r3
 1301              	.LVL121:
 831:u8glib/chessengine.c ****   
 832:u8glib/chessengine.c ****   if ( cp_GetPiece(chm->main_cp) != PIECE_NONE )
 1302              		.loc 1 832 0
 1303 000a 185C     		ldrb	r0, [r3, r0]	@ zero_extendqisi2
 1304 000c FFF7FEFF 		bl	cp_GetPiece
 1305              	.LVL122:
 1306 0010 F0B1     		cbz	r0, .L106
 833:u8glib/chessengine.c ****   {
 834:u8glib/chessengine.c ****     if ( cp_GetPiece(chm->main_cp) > PIECE_PAWN )
 1307              		.loc 1 834 0
 1308 0012 0128     		cmp	r0, #1
 1309 0014 06D9     		bls	.L107
 1310              	.LVL123:
 835:u8glib/chessengine.c ****     {
 836:u8glib/chessengine.c ****       *p++ = chess_piece_to_char[cp_GetPiece(chm->main_cp)-2];
 1311              		.loc 1 836 0
 1312 0016 831E     		subs	r3, r0, #2
 1313 0018 114A     		ldr	r2, .L109+4
 1314 001a D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 1315 001c 114D     		ldr	r5, .L109+8
 1316 001e 05F8013B 		strb	r3, [r5], #1
 1317 0022 00E0     		b	.L103
 1318              	.LVL124:
 1319              	.L107:
 829:u8glib/chessengine.c ****   chm = lrc_obj.chm_list+idx;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 41


 1320              		.loc 1 829 0
 1321 0024 0F4D     		ldr	r5, .L109+8
 1322              	.LVL125:
 1323              	.L103:
 837:u8glib/chessengine.c ****     }
 838:u8glib/chessengine.c ****     cu_add_pos(p, chm->main_src);
 1324              		.loc 1 838 0
 1325 0026 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 1326 0028 2846     		mov	r0, r5
 1327 002a FFF7FEFF 		bl	cu_add_pos
 1328              	.LVL126:
 839:u8glib/chessengine.c ****     p+=2;
 840:u8glib/chessengine.c ****     if ( cp_GetPiece(chm->other_cp) == PIECE_NONE )
 1329              		.loc 1 840 0
 1330 002e F078     		ldrb	r0, [r6, #3]	@ zero_extendqisi2
 1331 0030 FFF7FEFF 		bl	cp_GetPiece
 1332              	.LVL127:
 1333 0034 18B9     		cbnz	r0, .L104
 841:u8glib/chessengine.c ****       *p++ = '-';
 1334              		.loc 1 841 0
 1335 0036 EC1C     		adds	r4, r5, #3
 1336              	.LVL128:
 1337 0038 2D23     		movs	r3, #45
 1338 003a AB70     		strb	r3, [r5, #2]
 1339 003c 02E0     		b	.L105
 1340              	.LVL129:
 1341              	.L104:
 842:u8glib/chessengine.c ****     else
 843:u8glib/chessengine.c ****       *p++ = 'x';
 1342              		.loc 1 843 0
 1343 003e EC1C     		adds	r4, r5, #3
 1344              	.LVL130:
 1345 0040 7823     		movs	r3, #120
 1346 0042 AB70     		strb	r3, [r5, #2]
 1347              	.L105:
 844:u8glib/chessengine.c ****     cu_add_pos(p, chm->main_dest);
 1348              		.loc 1 844 0
 1349 0044 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 1350 0046 2046     		mov	r0, r4
 1351 0048 FFF7FEFF 		bl	cu_add_pos
 1352              	.LVL131:
 845:u8glib/chessengine.c ****     p+=2;
 1353              		.loc 1 845 0
 1354 004c A01C     		adds	r0, r4, #2
 1355              	.LVL132:
 1356 004e 00E0     		b	.L102
 1357              	.LVL133:
 1358              	.L106:
 829:u8glib/chessengine.c ****   chm = lrc_obj.chm_list+idx;
 1359              		.loc 1 829 0
 1360 0050 0448     		ldr	r0, .L109+8
 1361              	.LVL134:
 1362              	.L102:
 846:u8glib/chessengine.c ****   }
 847:u8glib/chessengine.c ****   *p = '\0';
 1363              		.loc 1 847 0
 1364 0052 0023     		movs	r3, #0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 42


 1365 0054 0370     		strb	r3, [r0]
 848:u8glib/chessengine.c ****   return buf;
 849:u8glib/chessengine.c **** }
 1366              		.loc 1 849 0
 1367 0056 0348     		ldr	r0, .L109+8
 1368              	.LVL135:
 1369 0058 70BD     		pop	{r4, r5, r6, pc}
 1370              	.LVL136:
 1371              	.L110:
 1372 005a 00BF     		.align	2
 1373              	.L109:
 1374 005c 80000000 		.word	lrc_obj+128
 1375 0060 00000000 		.word	.LANCHOR3
 1376 0064 00000000 		.word	.LANCHOR2
 1377              		.cfi_endproc
 1378              	.LFE24:
 1380              		.section	.text.cu_Move,"ax",%progbits
 1381              		.align	2
 1382              		.global	cu_Move
 1383              		.thumb
 1384              		.thumb_func
 1386              	cu_Move:
 1387              	.LFB25:
 850:u8glib/chessengine.c **** 
 851:u8glib/chessengine.c **** 
 852:u8glib/chessengine.c **** 
 853:u8glib/chessengine.c **** 
 854:u8glib/chessengine.c **** 
 855:u8glib/chessengine.c **** /*==============================================================*/
 856:u8glib/chessengine.c **** /* move */
 857:u8glib/chessengine.c **** /*==============================================================*/
 858:u8glib/chessengine.c **** 
 859:u8glib/chessengine.c **** /*
 860:u8glib/chessengine.c ****   Move a piece from source position to a destination on the board
 861:u8glib/chessengine.c ****   This function
 862:u8glib/chessengine.c ****     - does not perform any checking
 863:u8glib/chessengine.c ****     - however it processes "en passant" and casteling
 864:u8glib/chessengine.c ****     - backup the move and allow 1x undo
 865:u8glib/chessengine.c ****   
 866:u8glib/chessengine.c ****   2011-02-05: 
 867:u8glib/chessengine.c ****     - fill pawn_dbl_move[] for double pawn moves
 868:u8glib/chessengine.c **** 	--> done
 869:u8glib/chessengine.c ****     - Implement casteling 
 870:u8glib/chessengine.c **** 	--> done
 871:u8glib/chessengine.c ****     - en passant
 872:u8glib/chessengine.c **** 	--> done
 873:u8glib/chessengine.c ****     - pawn conversion/promotion
 874:u8glib/chessengine.c **** 	--> done
 875:u8glib/chessengine.c ****     - half-move backup 
 876:u8glib/chessengine.c **** 	--> done
 877:u8glib/chessengine.c ****     - cleanup everything, minimize variables
 878:u8glib/chessengine.c **** 	--> done
 879:u8glib/chessengine.c **** */
 880:u8glib/chessengine.c **** 
 881:u8glib/chessengine.c **** void cu_Move(uint8_t src, uint8_t dest)
 882:u8glib/chessengine.c **** {  
 1388              		.loc 1 882 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 43


 1389              		.cfi_startproc
 1390              		@ args = 0, pretend = 0, frame = 0
 1391              		@ frame_needed = 0, uses_anonymous_args = 0
 1392              	.LVL137:
 1393 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1394              	.LCFI19:
 1395              		.cfi_def_cfa_offset 32
 1396              		.cfi_offset 4, -32
 1397              		.cfi_offset 5, -28
 1398              		.cfi_offset 6, -24
 1399              		.cfi_offset 7, -20
 1400              		.cfi_offset 8, -16
 1401              		.cfi_offset 9, -12
 1402              		.cfi_offset 10, -8
 1403              		.cfi_offset 14, -4
 1404 0004 0646     		mov	r6, r0
 1405 0006 0D46     		mov	r5, r1
 883:u8glib/chessengine.c ****   /* start backup structure */
 884:u8glib/chessengine.c ****   chm_p chm = cu_PushHalfMove();
 1406              		.loc 1 884 0
 1407 0008 FFF7FEFF 		bl	cu_PushHalfMove
 1408              	.LVL138:
 1409 000c 0446     		mov	r4, r0
 1410              	.LVL139:
 885:u8glib/chessengine.c **** 
 886:u8glib/chessengine.c ****   /* these are the values from the board at the positions, provided as arguments to this function *
 887:u8glib/chessengine.c ****   uint8_t cp_src, cp_dest;
 888:u8glib/chessengine.c ****   
 889:u8glib/chessengine.c ****   /* Maybe a second position is cleared and one additional location is set */
 890:u8glib/chessengine.c ****   uint8_t clr_pos2;
 891:u8glib/chessengine.c ****   uint8_t set_pos2;
 892:u8glib/chessengine.c ****   uint8_t set_cp2;
 893:u8glib/chessengine.c ****   
 894:u8glib/chessengine.c ****   /* get values from board */
 895:u8glib/chessengine.c ****   cp_src = cp_GetFromBoard(src);
 1411              		.loc 1 895 0
 1412 000e 3046     		mov	r0, r6
 1413              	.LVL140:
 1414 0010 FFF7FEFF 		bl	cp_GetFromBoard
 1415              	.LVL141:
 1416 0014 0746     		mov	r7, r0
 1417              	.LVL142:
 896:u8glib/chessengine.c ****   cp_dest = cp_GetFromBoard(dest);
 1418              		.loc 1 896 0
 1419 0016 2846     		mov	r0, r5
 1420 0018 FFF7FEFF 		bl	cp_GetFromBoard
 1421              	.LVL143:
 1422 001c 8046     		mov	r8, r0
 1423              	.LVL144:
 897:u8glib/chessengine.c **** 
 898:u8glib/chessengine.c ****   /* fill backup structure */
 899:u8glib/chessengine.c ****   
 900:u8glib/chessengine.c ****   chm->main_cp = cp_src;
 1424              		.loc 1 900 0
 1425 001e 2770     		strb	r7, [r4]
 901:u8glib/chessengine.c ****   chm->main_src = src;
 1426              		.loc 1 901 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 44


 1427 0020 6670     		strb	r6, [r4, #1]
 902:u8glib/chessengine.c ****   chm->main_dest = dest;
 1428              		.loc 1 902 0
 1429 0022 A570     		strb	r5, [r4, #2]
 903:u8glib/chessengine.c ****   
 904:u8glib/chessengine.c ****   chm->other_cp = cp_dest;		/* prepace capture backup */
 1430              		.loc 1 904 0
 1431 0024 E070     		strb	r0, [r4, #3]
 905:u8glib/chessengine.c ****   chm->other_src = dest;
 1432              		.loc 1 905 0
 1433 0026 2571     		strb	r5, [r4, #4]
 906:u8glib/chessengine.c ****   chm->other_dest = ILLEGAL_POSITION;
 1434              		.loc 1 906 0
 1435 0028 FF23     		movs	r3, #255
 1436 002a 6371     		strb	r3, [r4, #5]
 1437              	.LVL145:
 907:u8glib/chessengine.c ****   
 908:u8glib/chessengine.c ****   /* setup results as far as possible with some suitable values */
 909:u8glib/chessengine.c ****   
 910:u8glib/chessengine.c ****   clr_pos2 = ILLEGAL_POSITION;	/* for en passant and castling, two positions might be cleared */
 911:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 912:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 913:u8glib/chessengine.c ****   
 914:u8glib/chessengine.c ****   /* check for PAWN */
 915:u8glib/chessengine.c ****   if ( cp_GetPiece(cp_src) == PIECE_PAWN )
 1438              		.loc 1 915 0
 1439 002c 3846     		mov	r0, r7
 1440              	.LVL146:
 1441 002e FFF7FEFF 		bl	cp_GetPiece
 1442              	.LVL147:
 1443 0032 0128     		cmp	r0, #1
 1444 0034 40D1     		bne	.L112
 916:u8glib/chessengine.c ****   {
 917:u8glib/chessengine.c ****     
 918:u8glib/chessengine.c ****     /* double step: is the distance 2 rows */
 919:u8glib/chessengine.c ****     if ( (src - dest == 32) || ( dest - src == 32 ) )
 1445              		.loc 1 919 0
 1446 0036 731B     		subs	r3, r6, r5
 1447 0038 202B     		cmp	r3, #32
 1448 003a 02D0     		beq	.L113
 1449              		.loc 1 919 0 is_stmt 0 discriminator 1
 1450 003c AB1B     		subs	r3, r5, r6
 1451 003e 202B     		cmp	r3, #32
 1452 0040 0CD1     		bne	.L114
 1453              	.L113:
 920:u8glib/chessengine.c ****     {
 921:u8glib/chessengine.c ****       /* remember the destination position */
 922:u8glib/chessengine.c ****       lrc_obj.pawn_dbl_move[cp_GetColor(cp_src)] = dest;
 1454              		.loc 1 922 0 is_stmt 1
 1455 0042 3846     		mov	r0, r7
 1456 0044 FFF7FEFF 		bl	cp_GetColor
 1457              	.LVL148:
 1458 0048 6B4B     		ldr	r3, .L133
 1459 004a 1844     		add	r0, r0, r3
 1460 004c 80F84250 		strb	r5, [r0, #66]
 912:u8glib/chessengine.c ****   
 1461              		.loc 1 912 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 45


 1462 0050 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1463              		.loc 1 911 0
 1464 0054 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1465              		.loc 1 910 0
 1466 0058 C146     		mov	r9, r8
 1467              		.loc 1 922 0
 1468 005a B4E0     		b	.L115
 1469              	.L114:
 923:u8glib/chessengine.c ****     }
 924:u8glib/chessengine.c ****     
 925:u8glib/chessengine.c ****     /* check if the PAWN is able to promote */
 926:u8glib/chessengine.c ****     else if ( (dest>>4) == 0 || (dest>>4) == 7 )
 1470              		.loc 1 926 0
 1471 005c 2B09     		lsrs	r3, r5, #4
 1472 005e 01D0     		beq	.L116
 1473              		.loc 1 926 0 is_stmt 0 discriminator 1
 1474 0060 072B     		cmp	r3, #7
 1475 0062 09D1     		bne	.L117
 1476              	.L116:
 927:u8glib/chessengine.c ****     {
 928:u8glib/chessengine.c ****       /* do simple "queening" */
 929:u8glib/chessengine.c ****       cp_src &= ~PIECE_PAWN;
 1477              		.loc 1 929 0 is_stmt 1
 1478 0064 07F0FE07 		and	r7, r7, #254
 1479              	.LVL149:
 930:u8glib/chessengine.c ****       cp_src |= PIECE_QUEEN;
 1480              		.loc 1 930 0
 1481 0068 47F00507 		orr	r7, r7, #5
 1482              	.LVL150:
 912:u8glib/chessengine.c ****   
 1483              		.loc 1 912 0
 1484 006c 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1485              		.loc 1 911 0
 1486 0070 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1487              		.loc 1 910 0
 1488 0074 C146     		mov	r9, r8
 1489              		.loc 1 930 0
 1490 0076 A6E0     		b	.L115
 1491              	.L117:
 931:u8glib/chessengine.c ****     }
 932:u8glib/chessengine.c ****     
 933:u8glib/chessengine.c ****     /* is it en passant capture? */
 934:u8glib/chessengine.c ****     /* check for side move */
 935:u8glib/chessengine.c ****     else if ( ((src + dest) & 1) != 0 )
 1492              		.loc 1 935 0
 1493 0078 7319     		adds	r3, r6, r5
 1494 007a 13F0010F 		tst	r3, #1
 1495 007e 00F08580 		beq	.L127
 936:u8glib/chessengine.c ****     {
 937:u8glib/chessengine.c ****       /* check, if target field is empty */
 938:u8glib/chessengine.c ****       if (  cp_GetPiece(cp_dest) == PIECE_NONE )
 1496              		.loc 1 938 0
 1497 0082 4046     		mov	r0, r8
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 46


 1498 0084 FFF7FEFF 		bl	cp_GetPiece
 1499              	.LVL151:
 1500 0088 0028     		cmp	r0, #0
 1501 008a 40F08580 		bne	.L128
 939:u8glib/chessengine.c ****       {
 940:u8glib/chessengine.c **** 	/* this is en passant */
 941:u8glib/chessengine.c **** 	/* no further checking required, because legal moves are assumed here */
 942:u8glib/chessengine.c **** 	/* however... the captured pawn position must be valid */
 943:u8glib/chessengine.c **** 	clr_pos2 = lrc_obj.pawn_dbl_move[cp_GetColor(cp_src) ^ 1];
 1502              		.loc 1 943 0
 1503 008e 3846     		mov	r0, r7
 1504 0090 FFF7FEFF 		bl	cp_GetColor
 1505              	.LVL152:
 1506 0094 80F00100 		eor	r0, r0, #1
 1507 0098 574B     		ldr	r3, .L133
 1508 009a 53FA80F3 		uxtab	r3, r3, r0
 1509 009e 93F84290 		ldrb	r9, [r3, #66]	@ zero_extendqisi2
 1510              	.LVL153:
 944:u8glib/chessengine.c **** 	chm->other_src = clr_pos2;
 1511              		.loc 1 944 0
 1512 00a2 84F80490 		strb	r9, [r4, #4]
 945:u8glib/chessengine.c **** 	chm->other_cp = cp_GetFromBoard(clr_pos2);
 1513              		.loc 1 945 0
 1514 00a6 4846     		mov	r0, r9
 1515 00a8 FFF7FEFF 		bl	cp_GetFromBoard
 1516              	.LVL154:
 1517 00ac E070     		strb	r0, [r4, #3]
 912:u8glib/chessengine.c ****   
 1518              		.loc 1 912 0
 1519 00ae 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1520              		.loc 1 911 0
 1521 00b2 4FF0FF08 		mov	r8, #255
 1522 00b6 86E0     		b	.L115
 1523              	.LVL155:
 1524              	.L112:
 946:u8glib/chessengine.c ****       }
 947:u8glib/chessengine.c ****     }    
 948:u8glib/chessengine.c ****   }
 949:u8glib/chessengine.c ****   
 950:u8glib/chessengine.c ****   /* check for the KING */
 951:u8glib/chessengine.c ****   else if ( cp_GetPiece(cp_src) == PIECE_KING )
 1525              		.loc 1 951 0
 1526 00b8 0628     		cmp	r0, #6
 1527 00ba 3CD1     		bne	.L118
 952:u8glib/chessengine.c ****   {
 953:u8glib/chessengine.c ****     /* disallow castling, if the KING has moved */
 954:u8glib/chessengine.c ****     if ( cp_GetColor(cp_src) == COLOR_WHITE )
 1528              		.loc 1 954 0
 1529 00bc 3846     		mov	r0, r7
 1530 00be FFF7FEFF 		bl	cp_GetColor
 1531              	.LVL156:
 1532 00c2 38B9     		cbnz	r0, .L119
 955:u8glib/chessengine.c ****     {
 956:u8glib/chessengine.c ****       /* if white KING has moved, disallow castling for white */
 957:u8glib/chessengine.c ****       lrc_obj.castling_possible &= 0x0c;
 1533              		.loc 1 957 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 47


 1534 00c4 4C4A     		ldr	r2, .L133
 1535 00c6 92F84430 		ldrb	r3, [r2, #68]	@ zero_extendqisi2
 1536 00ca 03F00C03 		and	r3, r3, #12
 1537 00ce 82F84430 		strb	r3, [r2, #68]
 1538 00d2 06E0     		b	.L120
 1539              	.L119:
 958:u8glib/chessengine.c ****     }
 959:u8glib/chessengine.c ****     else
 960:u8glib/chessengine.c ****     {
 961:u8glib/chessengine.c ****       /* if black KING has moved, disallow castling for black */
 962:u8glib/chessengine.c ****       lrc_obj.castling_possible &= 0x03;
 1540              		.loc 1 962 0
 1541 00d4 484A     		ldr	r2, .L133
 1542 00d6 92F84430 		ldrb	r3, [r2, #68]	@ zero_extendqisi2
 1543 00da 03F00303 		and	r3, r3, #3
 1544 00de 82F84430 		strb	r3, [r2, #68]
 1545              	.L120:
 963:u8glib/chessengine.c ****     }
 964:u8glib/chessengine.c ****     
 965:u8glib/chessengine.c ****     /* has it been castling to the left? */
 966:u8glib/chessengine.c ****     if ( src - dest == 2 )
 1546              		.loc 1 966 0
 1547 00e2 731B     		subs	r3, r6, r5
 1548 00e4 022B     		cmp	r3, #2
 1549 00e6 11D1     		bne	.L121
 967:u8glib/chessengine.c ****     {
 968:u8glib/chessengine.c ****       /* let the ROOK move to pos2 */
 969:u8glib/chessengine.c ****       set_pos2 = src-1;
 1550              		.loc 1 969 0
 1551 00e8 06F1FF38 		add	r8, r6, #-1
 1552 00ec 5FFA88F8 		uxtb	r8, r8
 1553              	.LVL157:
 970:u8glib/chessengine.c ****       set_cp2 = cp_GetFromBoard(src-4);
 1554              		.loc 1 970 0
 1555 00f0 A6F10409 		sub	r9, r6, #4
 1556 00f4 5FFA89F9 		uxtb	r9, r9
 1557 00f8 4846     		mov	r0, r9
 1558 00fa FFF7FEFF 		bl	cp_GetFromBoard
 1559              	.LVL158:
 1560 00fe 8246     		mov	r10, r0
 1561              	.LVL159:
 971:u8glib/chessengine.c ****       
 972:u8glib/chessengine.c ****       /* the ROOK must be cleared from the original position */
 973:u8glib/chessengine.c ****       clr_pos2 = src-4;
 974:u8glib/chessengine.c ****       
 975:u8glib/chessengine.c ****       chm->other_cp = set_cp2;
 1562              		.loc 1 975 0
 1563 0100 E070     		strb	r0, [r4, #3]
 976:u8glib/chessengine.c ****       chm->other_src = clr_pos2;
 1564              		.loc 1 976 0
 1565 0102 84F80490 		strb	r9, [r4, #4]
 977:u8glib/chessengine.c ****       chm->other_dest = set_pos2;
 1566              		.loc 1 977 0
 1567 0106 84F80580 		strb	r8, [r4, #5]
 1568 010a 5CE0     		b	.L115
 1569              	.LVL160:
 1570              	.L121:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 48


 978:u8glib/chessengine.c ****     }
 979:u8glib/chessengine.c ****     
 980:u8glib/chessengine.c ****     /* has it been castling to the right? */
 981:u8glib/chessengine.c ****     else if ( dest - src == 2 )
 1571              		.loc 1 981 0
 1572 010c AB1B     		subs	r3, r5, r6
 1573 010e 022B     		cmp	r3, #2
 1574 0110 48D1     		bne	.L129
 982:u8glib/chessengine.c ****     {
 983:u8glib/chessengine.c ****       /* let the ROOK move to pos2 */
 984:u8glib/chessengine.c ****       set_pos2 = src+1;
 1575              		.loc 1 984 0
 1576 0112 06F10108 		add	r8, r6, #1
 1577 0116 5FFA88F8 		uxtb	r8, r8
 1578              	.LVL161:
 985:u8glib/chessengine.c ****       set_cp2 = cp_GetFromBoard(src+3);
 1579              		.loc 1 985 0
 1580 011a 06F10309 		add	r9, r6, #3
 1581 011e 5FFA89F9 		uxtb	r9, r9
 1582 0122 4846     		mov	r0, r9
 1583 0124 FFF7FEFF 		bl	cp_GetFromBoard
 1584              	.LVL162:
 1585 0128 8246     		mov	r10, r0
 1586              	.LVL163:
 986:u8glib/chessengine.c ****       
 987:u8glib/chessengine.c ****       /* the ROOK must be cleared from the original position */
 988:u8glib/chessengine.c ****       clr_pos2 = src+3;
 989:u8glib/chessengine.c ****       
 990:u8glib/chessengine.c ****       chm->other_cp = set_cp2;
 1587              		.loc 1 990 0
 1588 012a E070     		strb	r0, [r4, #3]
 991:u8glib/chessengine.c ****       chm->other_src = clr_pos2;
 1589              		.loc 1 991 0
 1590 012c 84F80490 		strb	r9, [r4, #4]
 992:u8glib/chessengine.c ****       chm->other_dest = set_pos2;
 1591              		.loc 1 992 0
 1592 0130 84F80580 		strb	r8, [r4, #5]
 1593 0134 47E0     		b	.L115
 1594              	.LVL164:
 1595              	.L118:
 993:u8glib/chessengine.c ****       
 994:u8glib/chessengine.c ****     }
 995:u8glib/chessengine.c ****     
 996:u8glib/chessengine.c ****   }
 997:u8glib/chessengine.c ****   
 998:u8glib/chessengine.c ****   /* check for the ROOK */
 999:u8glib/chessengine.c ****   else if ( cp_GetPiece(cp_src) == PIECE_ROOK )
 1596              		.loc 1 999 0
 1597 0136 0428     		cmp	r0, #4
 1598 0138 3AD1     		bne	.L130
1000:u8glib/chessengine.c ****   {
1001:u8glib/chessengine.c ****     /* disallow white left castling */
1002:u8glib/chessengine.c ****     if ( src == 0x00 )
 1599              		.loc 1 1002 0
 1600 013a 36B9     		cbnz	r6, .L122
1003:u8glib/chessengine.c ****       lrc_obj.castling_possible &= ~0x01;
 1601              		.loc 1 1003 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 49


 1602 013c 2E4A     		ldr	r2, .L133
 1603 013e 92F84430 		ldrb	r3, [r2, #68]	@ zero_extendqisi2
 1604 0142 23F00103 		bic	r3, r3, #1
 1605 0146 82F84430 		strb	r3, [r2, #68]
 1606              	.L122:
1004:u8glib/chessengine.c ****     /* disallow white right castling */
1005:u8glib/chessengine.c ****     if ( src == 0x07 )
 1607              		.loc 1 1005 0
 1608 014a 072E     		cmp	r6, #7
 1609 014c 06D1     		bne	.L123
1006:u8glib/chessengine.c ****       lrc_obj.castling_possible &= ~0x02;
 1610              		.loc 1 1006 0
 1611 014e 2A4A     		ldr	r2, .L133
 1612 0150 92F84430 		ldrb	r3, [r2, #68]	@ zero_extendqisi2
 1613 0154 23F00203 		bic	r3, r3, #2
 1614 0158 82F84430 		strb	r3, [r2, #68]
 1615              	.L123:
1007:u8glib/chessengine.c ****     /* disallow black left castling */
1008:u8glib/chessengine.c ****     if ( src == 0x70 )
 1616              		.loc 1 1008 0
 1617 015c 702E     		cmp	r6, #112
 1618 015e 06D1     		bne	.L124
1009:u8glib/chessengine.c ****       lrc_obj.castling_possible &= ~0x04;
 1619              		.loc 1 1009 0
 1620 0160 254A     		ldr	r2, .L133
 1621 0162 92F84430 		ldrb	r3, [r2, #68]	@ zero_extendqisi2
 1622 0166 23F00403 		bic	r3, r3, #4
 1623 016a 82F84430 		strb	r3, [r2, #68]
 1624              	.L124:
1010:u8glib/chessengine.c ****     /* disallow black right castling */
1011:u8glib/chessengine.c ****     if ( src == 0x77 )
 1625              		.loc 1 1011 0
 1626 016e 772E     		cmp	r6, #119
 1627 0170 24D1     		bne	.L131
1012:u8glib/chessengine.c ****       lrc_obj.castling_possible &= ~0x08;
 1628              		.loc 1 1012 0
 1629 0172 214A     		ldr	r2, .L133
 1630 0174 92F84430 		ldrb	r3, [r2, #68]	@ zero_extendqisi2
 1631 0178 23F00803 		bic	r3, r3, #8
 1632 017c 82F84430 		strb	r3, [r2, #68]
 912:u8glib/chessengine.c ****   
 1633              		.loc 1 912 0
 1634 0180 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1635              		.loc 1 911 0
 1636 0184 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1637              		.loc 1 910 0
 1638 0188 C146     		mov	r9, r8
 1639 018a 1CE0     		b	.L115
 1640              	.L127:
 912:u8glib/chessengine.c ****   
 1641              		.loc 1 912 0
 1642 018c 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1643              		.loc 1 911 0
 1644 0190 4FF0FF08 		mov	r8, #255
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 50


 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1645              		.loc 1 910 0
 1646 0194 C146     		mov	r9, r8
 1647 0196 16E0     		b	.L115
 1648              	.L128:
 912:u8glib/chessengine.c ****   
 1649              		.loc 1 912 0
 1650 0198 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1651              		.loc 1 911 0
 1652 019c 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1653              		.loc 1 910 0
 1654 01a0 C146     		mov	r9, r8
 1655 01a2 10E0     		b	.L115
 1656              	.L129:
 912:u8glib/chessengine.c ****   
 1657              		.loc 1 912 0
 1658 01a4 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1659              		.loc 1 911 0
 1660 01a8 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1661              		.loc 1 910 0
 1662 01ac C146     		mov	r9, r8
 1663 01ae 0AE0     		b	.L115
 1664              	.L130:
 912:u8glib/chessengine.c ****   
 1665              		.loc 1 912 0
 1666 01b0 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1667              		.loc 1 911 0
 1668 01b4 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1669              		.loc 1 910 0
 1670 01b8 C146     		mov	r9, r8
 1671 01ba 04E0     		b	.L115
 1672              	.L131:
 912:u8glib/chessengine.c ****   
 1673              		.loc 1 912 0
 1674 01bc 4FF0000A 		mov	r10, #0
 911:u8glib/chessengine.c ****   set_cp2 = PIECE_NONE;			/* ROOK for castling */
 1675              		.loc 1 911 0
 1676 01c0 4FF0FF08 		mov	r8, #255
 910:u8glib/chessengine.c ****   set_pos2 = ILLEGAL_POSITION;	/* only used for castling */
 1677              		.loc 1 910 0
 1678 01c4 C146     		mov	r9, r8
 1679              	.LVL165:
 1680              	.L115:
1013:u8glib/chessengine.c ****   }
1014:u8glib/chessengine.c ****   
1015:u8glib/chessengine.c ****   
1016:u8glib/chessengine.c ****   /* apply new board situation */
1017:u8glib/chessengine.c ****   
1018:u8glib/chessengine.c ****   cp_SetOnBoard(dest, cp_src);
 1681              		.loc 1 1018 0
 1682 01c6 3946     		mov	r1, r7
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 51


 1683 01c8 2846     		mov	r0, r5
 1684 01ca FFF7FEFF 		bl	cp_SetOnBoard
 1685              	.LVL166:
1019:u8glib/chessengine.c ****   
1020:u8glib/chessengine.c ****   if ( set_pos2 != ILLEGAL_POSITION )
 1686              		.loc 1 1020 0
 1687 01ce B8F1FF0F 		cmp	r8, #255
 1688 01d2 03D0     		beq	.L125
1021:u8glib/chessengine.c ****     cp_SetOnBoard(set_pos2, set_cp2);
 1689              		.loc 1 1021 0
 1690 01d4 5146     		mov	r1, r10
 1691 01d6 4046     		mov	r0, r8
 1692 01d8 FFF7FEFF 		bl	cp_SetOnBoard
 1693              	.LVL167:
 1694              	.L125:
1022:u8glib/chessengine.c ****   
1023:u8glib/chessengine.c ****   cp_SetOnBoard(src, PIECE_NONE);
 1695              		.loc 1 1023 0
 1696 01dc 0021     		movs	r1, #0
 1697 01de 3046     		mov	r0, r6
 1698 01e0 FFF7FEFF 		bl	cp_SetOnBoard
 1699              	.LVL168:
1024:u8glib/chessengine.c ****   
1025:u8glib/chessengine.c ****   if ( clr_pos2 != ILLEGAL_POSITION )
 1700              		.loc 1 1025 0
 1701 01e4 B9F1FF0F 		cmp	r9, #255
 1702 01e8 03D0     		beq	.L111
1026:u8glib/chessengine.c ****     cp_SetOnBoard(clr_pos2, PIECE_NONE);
 1703              		.loc 1 1026 0
 1704 01ea 0021     		movs	r1, #0
 1705 01ec 4846     		mov	r0, r9
 1706 01ee FFF7FEFF 		bl	cp_SetOnBoard
 1707              	.LVL169:
 1708              	.L111:
 1709 01f2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1710              	.LVL170:
 1711              	.L134:
 1712 01f6 00BF     		.align	2
 1713              	.L133:
 1714 01f8 00000000 		.word	lrc_obj
 1715              		.cfi_endproc
 1716              	.LFE25:
 1718              		.section	.text.ce_FindPieceByStep,"ax",%progbits
 1719              		.align	2
 1720              		.global	ce_FindPieceByStep
 1721              		.thumb
 1722              		.thumb_func
 1724              	ce_FindPieceByStep:
 1725              	.LFB36:
1027:u8glib/chessengine.c ****   
1028:u8glib/chessengine.c ****   
1029:u8glib/chessengine.c **** }
1030:u8glib/chessengine.c **** 
1031:u8glib/chessengine.c **** /*
1032:u8glib/chessengine.c ****   this subprocedure decides for evaluation of the current board situation or further (deeper) inves
1033:u8glib/chessengine.c ****   Argument pos is the new target position if the current piece 
1034:u8glib/chessengine.c **** 
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 52


1035:u8glib/chessengine.c **** */
1036:u8glib/chessengine.c **** uint8_t ce_LoopRecur(uint8_t pos)
1037:u8glib/chessengine.c **** {
1038:u8glib/chessengine.c ****   eval_t eval;
1039:u8glib/chessengine.c ****   
1040:u8glib/chessengine.c ****   /* 1. check if target position is occupied by the same player (my_color) */
1041:u8glib/chessengine.c ****   /*     of if pos is somehow illegal or not valid */
1042:u8glib/chessengine.c ****   if ( cu_IsIllegalPosition(pos, stack_GetCurrElement()->current_color) != 0 )
1043:u8glib/chessengine.c ****     return 0;
1044:u8glib/chessengine.c **** 
1045:u8glib/chessengine.c ****   /* 2. move piece to the specified position, capture opponent piece if required */
1046:u8glib/chessengine.c ****   cu_Move(stack_GetCurrElement()->current_pos, pos);
1047:u8glib/chessengine.c **** 
1048:u8glib/chessengine.c ****   
1049:u8glib/chessengine.c ****   /* 3. */
1050:u8glib/chessengine.c ****   /* if depth reached: evaluate */
1051:u8glib/chessengine.c ****   /* else: go down next level */
1052:u8glib/chessengine.c ****   /* no eval if there had been any valid half-moves, so the default value (MIN) will be returned. *
1053:u8glib/chessengine.c ****   if ( stack_Push(stack_GetCurrElement()->current_color) == 0 )
1054:u8glib/chessengine.c ****   {
1055:u8glib/chessengine.c ****     eval = ce_Eval();
1056:u8glib/chessengine.c ****   }
1057:u8glib/chessengine.c ****   else
1058:u8glib/chessengine.c ****   {
1059:u8glib/chessengine.c ****     /* init the element, which has been pushed */
1060:u8glib/chessengine.c ****     stack_InitCurrElement();
1061:u8glib/chessengine.c ****     /* start over with ntext level */
1062:u8glib/chessengine.c ****     ce_LoopPieces();
1063:u8glib/chessengine.c ****     /* get the best move from opponents view, so invert the result */
1064:u8glib/chessengine.c ****     eval = -stack_GetCurrElement()->best_eval;
1065:u8glib/chessengine.c ****     stack_Pop();
1066:u8glib/chessengine.c ****   }
1067:u8glib/chessengine.c ****   
1068:u8glib/chessengine.c ****   /* 4. store result */
1069:u8glib/chessengine.c ****   stack_SetMove(eval, pos);
1070:u8glib/chessengine.c ****   
1071:u8glib/chessengine.c ****   /* 5. undo the move */
1072:u8glib/chessengine.c ****   cu_UndoHalfMove();
1073:u8glib/chessengine.c ****   
1074:u8glib/chessengine.c ****   /* 6. check special modes */
1075:u8glib/chessengine.c ****   /* the purpose of these checks is to mark special pieces and positions on the board */
1076:u8glib/chessengine.c ****   /* these marks can be checked by the user interface to highlight special positions */
1077:u8glib/chessengine.c ****   if ( lrc_obj.check_mode != 0 )
1078:u8glib/chessengine.c ****   {
1079:u8glib/chessengine.c ****     stack_element_p e = stack_GetCurrElement();
1080:u8glib/chessengine.c ****     if ( lrc_obj.check_mode == CHECK_MODE_MOVEABLE )
1081:u8glib/chessengine.c ****     {
1082:u8glib/chessengine.c ****       cp_SetOnBoard(e->current_pos, e->current_cp | CP_MARK_MASK );
1083:u8glib/chessengine.c ****     }
1084:u8glib/chessengine.c ****     else if ( lrc_obj.check_mode == CHECK_MODE_TARGET_MOVE )
1085:u8glib/chessengine.c ****     {
1086:u8glib/chessengine.c ****       if ( e->current_pos == lrc_obj.check_src_pos )
1087:u8glib/chessengine.c ****       {
1088:u8glib/chessengine.c **** 	cp_SetOnBoard(pos, cp_GetFromBoard(pos)  | CP_MARK_MASK );
1089:u8glib/chessengine.c ****       }
1090:u8glib/chessengine.c ****     }
1091:u8glib/chessengine.c ****   }
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 53


1092:u8glib/chessengine.c ****   return 1;
1093:u8glib/chessengine.c **** }
1094:u8glib/chessengine.c **** 
1095:u8glib/chessengine.c **** /*==============================================================*/
1096:u8glib/chessengine.c **** /* move pieces which can move one or more steps into a direction */
1097:u8glib/chessengine.c **** /*==============================================================*/
1098:u8glib/chessengine.c **** 
1099:u8glib/chessengine.c **** /*
1100:u8glib/chessengine.c ****   subprocedure to generate various target positions for some pieces
1101:u8glib/chessengine.c ****   special cases are handled in the piece specific sub-procedure
1102:u8glib/chessengine.c **** 
1103:u8glib/chessengine.c ****   Arguments:
1104:u8glib/chessengine.c ****     d: a list of potential directions
1105:u8glib/chessengine.c ****     is_multi_step: if the piece can only do one step (zero for KING and KNIGHT)
1106:u8glib/chessengine.c **** */
1107:u8glib/chessengine.c **** static const uint8_t ce_dir_offset_rook[] PROGMEM = { 1, 16, -16, -1, 0 };
1108:u8glib/chessengine.c **** static const uint8_t ce_dir_offset_bishop[] PROGMEM = { 15, 17, -17, -15, 0 };
1109:u8glib/chessengine.c **** static const uint8_t ce_dir_offset_queen[] PROGMEM = { 1, 16, -16, -1, 15, 17, -17, -15, 0 };
1110:u8glib/chessengine.c **** static const uint8_t ce_dir_offset_knight[] PROGMEM = {14, -14, 18, -18, 31, -31, 33, -33, 0};
1111:u8glib/chessengine.c **** 
1112:u8glib/chessengine.c **** void ce_LoopDirsSingleMultiStep(const uint8_t *d, uint8_t is_multi_step)
1113:u8glib/chessengine.c **** {
1114:u8glib/chessengine.c ****   uint8_t loop_pos;
1115:u8glib/chessengine.c ****   
1116:u8glib/chessengine.c ****   /* with all directions */
1117:u8glib/chessengine.c ****   for(;;)
1118:u8glib/chessengine.c ****   {
1119:u8glib/chessengine.c ****     if ( u8g_pgm_read(d) == 0 )
1120:u8glib/chessengine.c ****       break;
1121:u8glib/chessengine.c ****     
1122:u8glib/chessengine.c ****     /* start again from the initial position */
1123:u8glib/chessengine.c ****     loop_pos = stack_GetCurrElement()->current_pos;
1124:u8glib/chessengine.c ****     
1125:u8glib/chessengine.c ****     /* check direction */
1126:u8glib/chessengine.c ****     do
1127:u8glib/chessengine.c ****     {
1128:u8glib/chessengine.c ****       /* check next position into one direction */
1129:u8glib/chessengine.c ****       loop_pos += u8g_pgm_read(d);
1130:u8glib/chessengine.c ****       
1131:u8glib/chessengine.c ****       /*
1132:u8glib/chessengine.c **** 	go further to ce_LoopRecur()
1133:u8glib/chessengine.c **** 	0 will be returned if the target position is illegal or a piece of the own color
1134:u8glib/chessengine.c **** 	this is used to stop walking into one direction
1135:u8glib/chessengine.c ****       */
1136:u8glib/chessengine.c ****       if ( ce_LoopRecur(loop_pos) == 0 )
1137:u8glib/chessengine.c **** 	break;
1138:u8glib/chessengine.c ****       
1139:u8glib/chessengine.c ****       /* stop if we had hit another piece */
1140:u8glib/chessengine.c ****       if ( cp_GetPiece(cp_GetFromBoard(loop_pos)) != PIECE_NONE )
1141:u8glib/chessengine.c **** 	break;
1142:u8glib/chessengine.c ****     } while( is_multi_step );
1143:u8glib/chessengine.c ****     d++;
1144:u8glib/chessengine.c ****   }
1145:u8glib/chessengine.c **** }
1146:u8glib/chessengine.c **** 
1147:u8glib/chessengine.c **** void ce_LoopRook(void)
1148:u8glib/chessengine.c **** {
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 54


1149:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_rook, 1);
1150:u8glib/chessengine.c **** }
1151:u8glib/chessengine.c **** 
1152:u8glib/chessengine.c **** void ce_LoopBishop(void)
1153:u8glib/chessengine.c **** {
1154:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_bishop, 1);
1155:u8glib/chessengine.c **** }
1156:u8glib/chessengine.c **** 
1157:u8glib/chessengine.c **** void ce_LoopQueen(void)
1158:u8glib/chessengine.c **** {
1159:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_queen, 1);
1160:u8glib/chessengine.c **** }
1161:u8glib/chessengine.c **** 
1162:u8glib/chessengine.c **** void ce_LoopKnight(void)
1163:u8glib/chessengine.c **** {
1164:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_knight, 0);
1165:u8glib/chessengine.c **** }
1166:u8glib/chessengine.c **** 
1167:u8glib/chessengine.c **** 
1168:u8glib/chessengine.c **** 
1169:u8glib/chessengine.c **** /*==============================================================*/
1170:u8glib/chessengine.c **** /* move king */
1171:u8glib/chessengine.c **** /*==============================================================*/
1172:u8glib/chessengine.c **** 
1173:u8glib/chessengine.c **** uint8_t cu_IsKingCastling(uint8_t mask, int8_t direction, uint8_t cnt) U8G_NOINLINE;
1174:u8glib/chessengine.c **** 
1175:u8glib/chessengine.c **** /*
1176:u8glib/chessengine.c ****   checks, if the king can do castling
1177:u8glib/chessengine.c **** 
1178:u8glib/chessengine.c ****   Arguments:
1179:u8glib/chessengine.c ****     mask:		the bit-mask for the global "castling possible" flag
1180:u8glib/chessengine.c ****     direction:	left castling: -1, right castling 1
1181:u8glib/chessengine.c ****     cnt:		number of fields to be checked: 3 or 2
1182:u8glib/chessengine.c **** */
1183:u8glib/chessengine.c **** uint8_t cu_IsKingCastling(uint8_t mask, int8_t direction, uint8_t cnt)
1184:u8glib/chessengine.c **** {
1185:u8glib/chessengine.c ****   uint8_t pos;
1186:u8glib/chessengine.c ****   uint8_t opponent_color;
1187:u8glib/chessengine.c ****   
1188:u8glib/chessengine.c ****   /* check if the current board state allows castling */
1189:u8glib/chessengine.c ****   if ( (lrc_obj.castling_possible & mask) == 0 )
1190:u8glib/chessengine.c ****     return 0; 	/* castling not allowed */
1191:u8glib/chessengine.c ****   
1192:u8glib/chessengine.c ****   /* get the position of the KING, could be white or black king */
1193:u8glib/chessengine.c ****   pos = stack_GetCurrElement()->current_pos;
1194:u8glib/chessengine.c ****   
1195:u8glib/chessengine.c ****   /* calculate the color of the opponent */
1196:u8glib/chessengine.c ****   opponent_color = 1;
1197:u8glib/chessengine.c ****   opponent_color -= stack_GetCurrElement()->current_color;
1198:u8glib/chessengine.c ****   
1199:u8glib/chessengine.c ****   /* if the KING itself is given check... */
1200:u8glib/chessengine.c ****   if ( ce_GetPositionAttackWeight(pos, opponent_color) > 0 )
1201:u8glib/chessengine.c ****     return 0;
1202:u8glib/chessengine.c **** 
1203:u8glib/chessengine.c ****   
1204:u8glib/chessengine.c ****   /* check if fields in the desired direction are emtpy */
1205:u8glib/chessengine.c ****   for(;;)
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 55


1206:u8glib/chessengine.c ****   {
1207:u8glib/chessengine.c ****     /* go to the next field */
1208:u8glib/chessengine.c ****     pos += direction;
1209:u8glib/chessengine.c ****     /* check for a piece */
1210:u8glib/chessengine.c ****     if ( cp_GetPiece(cp_GetFromBoard(pos)) != PIECE_NONE )
1211:u8glib/chessengine.c ****       return 0;		/* castling not allowed */
1212:u8glib/chessengine.c **** 
1213:u8glib/chessengine.c ****     /* if some of the fields are under attack */
1214:u8glib/chessengine.c ****     if ( ce_GetPositionAttackWeight(pos, opponent_color) > 0 )
1215:u8glib/chessengine.c ****       return 0;
1216:u8glib/chessengine.c ****     
1217:u8glib/chessengine.c ****     cnt--;
1218:u8glib/chessengine.c ****     if ( cnt == 0 )
1219:u8glib/chessengine.c ****       break;
1220:u8glib/chessengine.c ****   }
1221:u8glib/chessengine.c ****   return 1; /* castling allowed */
1222:u8glib/chessengine.c **** }
1223:u8glib/chessengine.c **** 
1224:u8glib/chessengine.c **** void ce_LoopKing(void)
1225:u8glib/chessengine.c **** {
1226:u8glib/chessengine.c ****   /*
1227:u8glib/chessengine.c ****     there is an interessting timing problem in this procedure
1228:u8glib/chessengine.c ****     it must be checked for castling first and as second step the normal
1229:u8glib/chessengine.c ****     KING movement. If we would first check for normal moves, than
1230:u8glib/chessengine.c ****     any marks might be overwritten by the ROOK in the case of castling.
1231:u8glib/chessengine.c ****   */
1232:u8glib/chessengine.c ****   
1233:u8glib/chessengine.c ****   /* castling (this must be done before checking normal moves (see above) */
1234:u8glib/chessengine.c ****   if ( stack_GetCurrElement()->current_color == COLOR_WHITE )
1235:u8glib/chessengine.c ****   {
1236:u8glib/chessengine.c ****     /* white left castling */
1237:u8glib/chessengine.c ****     if ( cu_IsKingCastling(1, -1, 3) != 0 )
1238:u8glib/chessengine.c ****     {
1239:u8glib/chessengine.c ****       /* check for attacked fields */
1240:u8glib/chessengine.c ****       ce_LoopRecur(stack_GetCurrElement()->current_pos-2);
1241:u8glib/chessengine.c ****     }
1242:u8glib/chessengine.c ****     /* white right castling */
1243:u8glib/chessengine.c ****     if ( cu_IsKingCastling(2, 1, 2) != 0 )
1244:u8glib/chessengine.c ****     {
1245:u8glib/chessengine.c ****       /* check for attacked fields */
1246:u8glib/chessengine.c ****       ce_LoopRecur(stack_GetCurrElement()->current_pos+2);
1247:u8glib/chessengine.c ****     }
1248:u8glib/chessengine.c ****   }
1249:u8glib/chessengine.c ****   else
1250:u8glib/chessengine.c ****   {
1251:u8glib/chessengine.c ****     /* black left castling */
1252:u8glib/chessengine.c ****     if ( cu_IsKingCastling(4, -1, 3) != 0 )
1253:u8glib/chessengine.c ****     {
1254:u8glib/chessengine.c ****       /* check for attacked fields */
1255:u8glib/chessengine.c ****       ce_LoopRecur(stack_GetCurrElement()->current_pos-2);
1256:u8glib/chessengine.c ****     }
1257:u8glib/chessengine.c ****     /* black right castling */
1258:u8glib/chessengine.c ****     if ( cu_IsKingCastling(8, 1, 2) != 0 )
1259:u8glib/chessengine.c ****     {
1260:u8glib/chessengine.c ****       /* check for attacked fields */
1261:u8glib/chessengine.c ****       ce_LoopRecur(stack_GetCurrElement()->current_pos+2);
1262:u8glib/chessengine.c ****     }
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 56


1263:u8glib/chessengine.c ****   }
1264:u8glib/chessengine.c ****   
1265:u8glib/chessengine.c ****   /* reuse queen directions */
1266:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_queen, 0);
1267:u8glib/chessengine.c **** }
1268:u8glib/chessengine.c **** 
1269:u8glib/chessengine.c **** 
1270:u8glib/chessengine.c **** /*==============================================================*/
1271:u8glib/chessengine.c **** /* move pawn */
1272:u8glib/chessengine.c **** /*==============================================================*/
1273:u8glib/chessengine.c **** 
1274:u8glib/chessengine.c **** /*
1275:u8glib/chessengine.c ****   doppelschritt: nur von der grundlinie aus, beide (!) felder vor dem bauern mssen frei sein
1276:u8glib/chessengine.c ****   en passant: nur unmittelbar nachdem ein doppelschritt ausgefhrt wurde.
1277:u8glib/chessengine.c **** */
1278:u8glib/chessengine.c **** void ce_LoopPawnSideCapture(uint8_t loop_pos)
1279:u8glib/chessengine.c **** {
1280:u8glib/chessengine.c ****   if ( gpos_IsIllegal(loop_pos) == 0 )
1281:u8glib/chessengine.c ****   {
1282:u8glib/chessengine.c ****     /* get the piece from the board */
1283:u8glib/chessengine.c ****     /* if the field is NOT empty */
1284:u8glib/chessengine.c ****     if ( cp_GetPiece(cp_GetFromBoard(loop_pos)) != PIECE_NONE )
1285:u8glib/chessengine.c ****     {
1286:u8glib/chessengine.c ****       /* normal capture */
1287:u8glib/chessengine.c ****       ce_LoopRecur(loop_pos);
1288:u8glib/chessengine.c ****       /* TODO: check for pawn conversion/promotion */
1289:u8glib/chessengine.c ****     }
1290:u8glib/chessengine.c ****     else
1291:u8glib/chessengine.c ****     {
1292:u8glib/chessengine.c ****       /* check conditions for en passant capture */
1293:u8glib/chessengine.c ****       if ( stack_GetCurrElement()->current_color == COLOR_WHITE )
1294:u8glib/chessengine.c ****       {
1295:u8glib/chessengine.c **** 	if ( lrc_obj.pawn_dbl_move[COLOR_BLACK]+16 == loop_pos )
1296:u8glib/chessengine.c **** 	{
1297:u8glib/chessengine.c **** 	  ce_LoopRecur(loop_pos);
1298:u8glib/chessengine.c **** 	  /* note: pawn conversion/promotion can not occur */
1299:u8glib/chessengine.c **** 	}
1300:u8glib/chessengine.c ****       }
1301:u8glib/chessengine.c ****       else
1302:u8glib/chessengine.c ****       {
1303:u8glib/chessengine.c **** 	if ( lrc_obj.pawn_dbl_move[COLOR_WHITE] == loop_pos+16 )
1304:u8glib/chessengine.c **** 	{
1305:u8glib/chessengine.c **** 	  ce_LoopRecur(loop_pos);
1306:u8glib/chessengine.c **** 	  /* note: pawn conversion/promotion can not occur */
1307:u8glib/chessengine.c **** 	}
1308:u8glib/chessengine.c ****       }
1309:u8glib/chessengine.c ****     }
1310:u8glib/chessengine.c ****   }
1311:u8glib/chessengine.c **** }
1312:u8glib/chessengine.c **** 
1313:u8glib/chessengine.c **** void ce_LoopPawn(void)
1314:u8glib/chessengine.c **** {
1315:u8glib/chessengine.c ****   uint8_t initial_pos = stack_GetCurrElement()->current_pos; 
1316:u8glib/chessengine.c ****   uint8_t my_color = stack_GetCurrElement()->current_color;
1317:u8glib/chessengine.c ****   
1318:u8glib/chessengine.c ****   uint8_t loop_pos;
1319:u8glib/chessengine.c ****   uint8_t line;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 57


1320:u8glib/chessengine.c ****   
1321:u8glib/chessengine.c ****   /* one step forward */
1322:u8glib/chessengine.c ****   
1323:u8glib/chessengine.c ****   loop_pos = initial_pos;
1324:u8glib/chessengine.c ****   line = initial_pos;
1325:u8glib/chessengine.c ****   line >>= 4;
1326:u8glib/chessengine.c ****   if ( my_color == COLOR_WHITE )
1327:u8glib/chessengine.c ****     loop_pos += 16;
1328:u8glib/chessengine.c ****   else
1329:u8glib/chessengine.c ****     loop_pos -= 16;
1330:u8glib/chessengine.c ****   if ( gpos_IsIllegal(loop_pos) == 0 )
1331:u8glib/chessengine.c ****   {
1332:u8glib/chessengine.c ****     /* if the field is empty */
1333:u8glib/chessengine.c ****     if ( cp_GetPiece(cp_GetFromBoard(loop_pos)) == PIECE_NONE )
1334:u8glib/chessengine.c ****     {
1335:u8glib/chessengine.c ****       /* TODO: check for and loop through piece conversion/promotion */
1336:u8glib/chessengine.c ****       ce_LoopRecur(loop_pos);      
1337:u8glib/chessengine.c **** 
1338:u8glib/chessengine.c ****       /* second step forward */
1339:u8glib/chessengine.c ****       
1340:u8glib/chessengine.c ****       /* if pawn is on his starting line */
1341:u8glib/chessengine.c ****       if ( (my_color == COLOR_WHITE && line == 1) || (my_color == COLOR_BLACK && line == 6 ) )
1342:u8glib/chessengine.c ****       {
1343:u8glib/chessengine.c **** 	/* the place before the pawn is not occupied, so we can do double moves, see above */
1344:u8glib/chessengine.c **** 	
1345:u8glib/chessengine.c **** 	if ( my_color == COLOR_WHITE )
1346:u8glib/chessengine.c **** 	  loop_pos += 16;
1347:u8glib/chessengine.c **** 	else
1348:u8glib/chessengine.c **** 	  loop_pos -= 16;
1349:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp_GetFromBoard(loop_pos)) == PIECE_NONE )
1350:u8glib/chessengine.c **** 	{
1351:u8glib/chessengine.c **** 	  /* this is a special case, other promotions of the pawn can not occur */
1352:u8glib/chessengine.c **** 	  ce_LoopRecur(loop_pos);
1353:u8glib/chessengine.c **** 	}
1354:u8glib/chessengine.c ****       }
1355:u8glib/chessengine.c ****     }
1356:u8glib/chessengine.c ****   }
1357:u8glib/chessengine.c **** 
1358:u8glib/chessengine.c ****   /* capture */
1359:u8glib/chessengine.c ****   
1360:u8glib/chessengine.c ****   loop_pos = initial_pos;
1361:u8glib/chessengine.c ****   if ( my_color == COLOR_WHITE )
1362:u8glib/chessengine.c ****     loop_pos += 15;
1363:u8glib/chessengine.c ****   else
1364:u8glib/chessengine.c ****     loop_pos -= 15;
1365:u8glib/chessengine.c ****   ce_LoopPawnSideCapture(loop_pos);
1366:u8glib/chessengine.c **** 
1367:u8glib/chessengine.c **** 
1368:u8glib/chessengine.c ****   loop_pos = initial_pos;
1369:u8glib/chessengine.c ****   if ( my_color == COLOR_WHITE )
1370:u8glib/chessengine.c ****     loop_pos += 17;
1371:u8glib/chessengine.c ****   else
1372:u8glib/chessengine.c ****     loop_pos -= 17;
1373:u8glib/chessengine.c ****   ce_LoopPawnSideCapture(loop_pos);
1374:u8glib/chessengine.c **** }
1375:u8glib/chessengine.c **** 
1376:u8glib/chessengine.c **** /*==============================================================*/
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 58


1377:u8glib/chessengine.c **** /* attacked */
1378:u8glib/chessengine.c **** /*==============================================================*/
1379:u8glib/chessengine.c **** 
1380:u8glib/chessengine.c **** /*
1381:u8glib/chessengine.c ****   from a starting position, search for a piece, that might jump to that postion.
1382:u8glib/chessengine.c ****   return:
1383:u8glib/chessengine.c ****     the two global variables
1384:u8glib/chessengine.c ****       lrc_obj.find_piece_weight[0];
1385:u8glib/chessengine.c ****       lrc_obj.find_piece_weight[1];
1386:u8glib/chessengine.c ****   will be increased by the weight of the attacked pieces of that color.
1387:u8glib/chessengine.c ****   it is usually required to reset these global variables to zero, before using
1388:u8glib/chessengine.c ****   this function.
1389:u8glib/chessengine.c **** */
1390:u8glib/chessengine.c **** 
1391:u8glib/chessengine.c **** void ce_FindPieceByStep(uint8_t start_pos, uint8_t piece, const uint8_t *d, uint8_t is_multi_step)
1392:u8glib/chessengine.c **** {
 1726              		.loc 1 1392 0
 1727              		.cfi_startproc
 1728              		@ args = 0, pretend = 0, frame = 0
 1729              		@ frame_needed = 0, uses_anonymous_args = 0
 1730              	.LVL171:
 1731 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1732              	.LCFI20:
 1733              		.cfi_def_cfa_offset 32
 1734              		.cfi_offset 4, -32
 1735              		.cfi_offset 5, -28
 1736              		.cfi_offset 6, -24
 1737              		.cfi_offset 7, -20
 1738              		.cfi_offset 8, -16
 1739              		.cfi_offset 9, -12
 1740              		.cfi_offset 10, -8
 1741              		.cfi_offset 14, -4
 1742 0004 8046     		mov	r8, r0
 1743 0006 8946     		mov	r9, r1
 1744 0008 1746     		mov	r7, r2
 1745 000a 1E46     		mov	r6, r3
 1746              	.LVL172:
 1747              	.L140:
1393:u8glib/chessengine.c ****   uint8_t loop_pos, cp;
1394:u8glib/chessengine.c ****   
1395:u8glib/chessengine.c ****   /* with all directions */
1396:u8glib/chessengine.c ****   for(;;)
1397:u8glib/chessengine.c ****   {
1398:u8glib/chessengine.c ****     if ( u8g_pgm_read(d) == 0 )
 1748              		.loc 1 1398 0
 1749 000c 3D78     		ldrb	r5, [r7]	@ zero_extendqisi2
 1750 000e 2DB3     		cbz	r5, .L135
 1751 0010 4446     		mov	r4, r8
 1752              	.L139:
 1753              	.LVL173:
1399:u8glib/chessengine.c ****       break;
1400:u8glib/chessengine.c ****     
1401:u8glib/chessengine.c ****     /* start again from the initial position */
1402:u8glib/chessengine.c ****     loop_pos = start_pos;
1403:u8glib/chessengine.c ****     
1404:u8glib/chessengine.c ****     /* check direction */
1405:u8glib/chessengine.c ****     do
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 59


1406:u8glib/chessengine.c ****     {
1407:u8glib/chessengine.c ****       /* check next position into one direction */
1408:u8glib/chessengine.c ****       loop_pos += u8g_pgm_read(d);
 1754              		.loc 1 1408 0
 1755 0012 2C44     		add	r4, r4, r5
 1756              	.LVL174:
 1757 0014 E4B2     		uxtb	r4, r4
 1758              	.LVL175:
1409:u8glib/chessengine.c ****       
1410:u8glib/chessengine.c ****       /* check if the board boundary has been crossed */
1411:u8glib/chessengine.c ****       if ( (loop_pos & 0x088) != 0 )
 1759              		.loc 1 1411 0
 1760 0016 14F0880F 		tst	r4, #136
 1761 001a 1DD1     		bne	.L137
1412:u8glib/chessengine.c **** 	break;
1413:u8glib/chessengine.c ****       
1414:u8glib/chessengine.c ****       /* get the colored piece from the board */
1415:u8glib/chessengine.c ****       cp = cp_GetFromBoard(loop_pos);
 1762              		.loc 1 1415 0
 1763 001c 2046     		mov	r0, r4
 1764 001e FFF7FEFF 		bl	cp_GetFromBoard
 1765              	.LVL176:
 1766 0022 8246     		mov	r10, r0
 1767              	.LVL177:
1416:u8glib/chessengine.c ****       
1417:u8glib/chessengine.c ****       /* stop if we had hit another piece */
1418:u8glib/chessengine.c ****       if ( cp_GetPiece(cp) != PIECE_NONE )
 1768              		.loc 1 1418 0
 1769 0024 FFF7FEFF 		bl	cp_GetPiece
 1770              	.LVL178:
 1771 0028 A0B1     		cbz	r0, .L138
1419:u8glib/chessengine.c ****       {
1420:u8glib/chessengine.c **** 	/* if it is the piece we are looking for, then add the weight */
1421:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp) == piece )
 1772              		.loc 1 1421 0
 1773 002a 4845     		cmp	r0, r9
 1774 002c 14D1     		bne	.L137
1422:u8glib/chessengine.c **** 	{
1423:u8glib/chessengine.c **** 	  lrc_obj.find_piece_weight[cp_GetColor(cp)] += ce_piece_weight[piece];
 1775              		.loc 1 1423 0
 1776 002e 5046     		mov	r0, r10
 1777 0030 FFF7FEFF 		bl	cp_GetColor
 1778              	.LVL179:
 1779 0034 0A4B     		ldr	r3, .L142
 1780 0036 13F80920 		ldrb	r2, [r3, r9]	@ zero_extendqisi2
 1781 003a 0A4B     		ldr	r3, .L142+4
 1782 003c 1844     		add	r0, r0, r3
 1783 003e 90F84D30 		ldrb	r3, [r0, #77]	@ zero_extendqisi2
 1784 0042 1344     		add	r3, r3, r2
 1785 0044 80F84D30 		strb	r3, [r0, #77]
1424:u8glib/chessengine.c **** 	  lrc_obj.find_piece_cnt[cp_GetColor(cp)]++;
 1786              		.loc 1 1424 0
 1787 0048 90F84B30 		ldrb	r3, [r0, #75]	@ zero_extendqisi2
 1788 004c 0133     		adds	r3, r3, #1
 1789 004e 80F84B30 		strb	r3, [r0, #75]
 1790 0052 01E0     		b	.L137
 1791              	.L138:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 60


1425:u8glib/chessengine.c **** 	}
1426:u8glib/chessengine.c **** 	/* in any case, break out of the inner loop */
1427:u8glib/chessengine.c **** 	break;
1428:u8glib/chessengine.c ****       }
1429:u8glib/chessengine.c ****     } while( is_multi_step );
 1792              		.loc 1 1429 0
 1793 0054 002E     		cmp	r6, #0
 1794 0056 DCD1     		bne	.L139
 1795              	.LVL180:
 1796              	.L137:
1430:u8glib/chessengine.c ****     d++;
 1797              		.loc 1 1430 0
 1798 0058 0137     		adds	r7, r7, #1
 1799              	.LVL181:
1431:u8glib/chessengine.c ****   }
 1800              		.loc 1 1431 0
 1801 005a D7E7     		b	.L140
 1802              	.LVL182:
 1803              	.L135:
 1804 005c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1805              	.LVL183:
 1806              	.L143:
 1807              		.align	2
 1808              	.L142:
 1809 0060 00000000 		.word	.LANCHOR0
 1810 0064 00000000 		.word	lrc_obj
 1811              		.cfi_endproc
 1812              	.LFE36:
 1814              		.section	.text.ce_FindPawnPiece,"ax",%progbits
 1815              		.align	2
 1816              		.global	ce_FindPawnPiece
 1817              		.thumb
 1818              		.thumb_func
 1820              	ce_FindPawnPiece:
 1821              	.LFB37:
1432:u8glib/chessengine.c **** }
1433:u8glib/chessengine.c **** 
1434:u8glib/chessengine.c **** void ce_FindPawnPiece(uint8_t dest_pos, uint8_t color)
1435:u8glib/chessengine.c **** {
 1822              		.loc 1 1435 0
 1823              		.cfi_startproc
 1824              		@ args = 0, pretend = 0, frame = 0
 1825              		@ frame_needed = 0, uses_anonymous_args = 0
 1826              	.LVL184:
1436:u8glib/chessengine.c ****   uint8_t cp;
1437:u8glib/chessengine.c ****   /* check if the board boundary has been crossed */
1438:u8glib/chessengine.c ****   if ( (dest_pos & 0x088) == 0 )
 1827              		.loc 1 1438 0
 1828 0000 10F0880F 		tst	r0, #136
 1829 0004 1AD1     		bne	.L147
1435:u8glib/chessengine.c ****   uint8_t cp;
 1830              		.loc 1 1435 0
 1831 0006 38B5     		push	{r3, r4, r5, lr}
 1832              	.LCFI21:
 1833              		.cfi_def_cfa_offset 16
 1834              		.cfi_offset 3, -16
 1835              		.cfi_offset 4, -12
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 61


 1836              		.cfi_offset 5, -8
 1837              		.cfi_offset 14, -4
 1838 0008 0C46     		mov	r4, r1
1439:u8glib/chessengine.c ****   {
1440:u8glib/chessengine.c ****     /* get the colored piece from the board */
1441:u8glib/chessengine.c ****     cp = cp_GetFromBoard(dest_pos);
 1839              		.loc 1 1441 0
 1840 000a FFF7FEFF 		bl	cp_GetFromBoard
 1841              	.LVL185:
 1842 000e 0546     		mov	r5, r0
 1843              	.LVL186:
1442:u8glib/chessengine.c ****     /* only if there is a pawn of the matching color */
1443:u8glib/chessengine.c ****     if ( cp_GetPiece(cp) == PIECE_PAWN )
 1844              		.loc 1 1443 0
 1845 0010 FFF7FEFF 		bl	cp_GetPiece
 1846              	.LVL187:
 1847 0014 0128     		cmp	r0, #1
 1848 0016 10D1     		bne	.L144
1444:u8glib/chessengine.c ****     {
1445:u8glib/chessengine.c ****       if ( cp_GetColor(cp) == color )
 1849              		.loc 1 1445 0
 1850 0018 2846     		mov	r0, r5
 1851 001a FFF7FEFF 		bl	cp_GetColor
 1852              	.LVL188:
 1853 001e A042     		cmp	r0, r4
 1854 0020 0BD1     		bne	.L144
1446:u8glib/chessengine.c ****       {
1447:u8glib/chessengine.c **** 	/* the weight of the PAWN */
1448:u8glib/chessengine.c **** 	lrc_obj.find_piece_weight[color] += 1;
 1855              		.loc 1 1448 0
 1856 0022 0749     		ldr	r1, .L148
 1857 0024 2144     		add	r1, r1, r4
 1858 0026 91F84D30 		ldrb	r3, [r1, #77]	@ zero_extendqisi2
 1859 002a 0133     		adds	r3, r3, #1
 1860 002c 81F84D30 		strb	r3, [r1, #77]
1449:u8glib/chessengine.c **** 	lrc_obj.find_piece_cnt[color]++;
 1861              		.loc 1 1449 0
 1862 0030 91F84B30 		ldrb	r3, [r1, #75]	@ zero_extendqisi2
 1863 0034 0133     		adds	r3, r3, #1
 1864 0036 81F84B30 		strb	r3, [r1, #75]
 1865              	.L144:
 1866 003a 38BD     		pop	{r3, r4, r5, pc}
 1867              	.LVL189:
 1868              	.L147:
 1869              	.LCFI22:
 1870              		.cfi_def_cfa_offset 0
 1871              		.cfi_restore 3
 1872              		.cfi_restore 4
 1873              		.cfi_restore 5
 1874              		.cfi_restore 14
 1875 003c 7047     		bx	lr
 1876              	.L149:
 1877 003e 00BF     		.align	2
 1878              	.L148:
 1879 0040 00000000 		.word	lrc_obj
 1880              		.cfi_endproc
 1881              	.LFE37:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 62


 1883              		.section	.text.ce_CalculatePositionWeight,"ax",%progbits
 1884              		.align	2
 1885              		.global	ce_CalculatePositionWeight
 1886              		.thumb
 1887              		.thumb_func
 1889              	ce_CalculatePositionWeight:
 1890              	.LFB38:
1450:u8glib/chessengine.c ****       }
1451:u8glib/chessengine.c ****     }
1452:u8glib/chessengine.c ****   }
1453:u8glib/chessengine.c **** }
1454:u8glib/chessengine.c **** 
1455:u8glib/chessengine.c **** 
1456:u8glib/chessengine.c **** /*
1457:u8glib/chessengine.c ****   find out, which pieces do attack a specified field
1458:u8glib/chessengine.c ****   used to
1459:u8glib/chessengine.c ****   - check if the KING can do castling
1460:u8glib/chessengine.c ****   - check if the KING must move
1461:u8glib/chessengine.c **** 
1462:u8glib/chessengine.c ****   may be used in the eval procedure ... once...
1463:u8glib/chessengine.c **** 
1464:u8glib/chessengine.c ****   the result is stored in the global array
1465:u8glib/chessengine.c ****     uint8_t lrc_obj.find_piece_weight[2];
1466:u8glib/chessengine.c ****   which is indexed with the color.
1467:u8glib/chessengine.c ****   lrc_obj.find_piece_weight[COLOR_WHITE] is the sum of all white pieces
1468:u8glib/chessengine.c ****   which can directly move to this field.
1469:u8glib/chessengine.c **** 
1470:u8glib/chessengine.c ****   example:
1471:u8glib/chessengine.c ****     if the black KING is at "pos" and lrc_obj.find_piece_weight[COLOR_WHITE] is not zero 
1472:u8glib/chessengine.c ****     (after executing ce_CalculatePositionWeight(pos)) then the KING must be protected or moveed, be
1473:u8glib/chessengine.c ****     the KING was given check.
1474:u8glib/chessengine.c **** */
1475:u8glib/chessengine.c **** 
1476:u8glib/chessengine.c **** void ce_CalculatePositionWeight(uint8_t pos)
1477:u8glib/chessengine.c **** {
 1891              		.loc 1 1477 0
 1892              		.cfi_startproc
 1893              		@ args = 0, pretend = 0, frame = 0
 1894              		@ frame_needed = 0, uses_anonymous_args = 0
 1895              	.LVL190:
 1896 0000 38B5     		push	{r3, r4, r5, lr}
 1897              	.LCFI23:
 1898              		.cfi_def_cfa_offset 16
 1899              		.cfi_offset 3, -16
 1900              		.cfi_offset 4, -12
 1901              		.cfi_offset 5, -8
 1902              		.cfi_offset 14, -4
1478:u8glib/chessengine.c ****   
1479:u8glib/chessengine.c ****   lrc_obj.find_piece_weight[0] = 0;
 1903              		.loc 1 1479 0
 1904 0002 224B     		ldr	r3, .L153
 1905 0004 0022     		movs	r2, #0
 1906 0006 83F84D20 		strb	r2, [r3, #77]
1480:u8glib/chessengine.c ****   lrc_obj.find_piece_weight[1] = 0;
 1907              		.loc 1 1480 0
 1908 000a 83F84E20 		strb	r2, [r3, #78]
1481:u8glib/chessengine.c ****   lrc_obj.find_piece_cnt[0] = 0;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 63


 1909              		.loc 1 1481 0
 1910 000e 83F84B20 		strb	r2, [r3, #75]
1482:u8glib/chessengine.c ****   lrc_obj.find_piece_cnt[1] = 0;
 1911              		.loc 1 1482 0
 1912 0012 83F84C20 		strb	r2, [r3, #76]
1483:u8glib/chessengine.c ****   
1484:u8glib/chessengine.c ****   if ( (pos & 0x088) != 0 )
 1913              		.loc 1 1484 0
 1914 0016 10F0880F 		tst	r0, #136
 1915 001a 36D1     		bne	.L150
 1916 001c 0446     		mov	r4, r0
1485:u8glib/chessengine.c ****     return;
1486:u8glib/chessengine.c **** 
1487:u8glib/chessengine.c ****   ce_FindPieceByStep(pos, PIECE_ROOK, ce_dir_offset_rook, 1);
 1917              		.loc 1 1487 0
 1918 001e 0123     		movs	r3, #1
 1919 0020 1B4A     		ldr	r2, .L153+4
 1920 0022 0421     		movs	r1, #4
 1921 0024 FFF7FEFF 		bl	ce_FindPieceByStep
 1922              	.LVL191:
1488:u8glib/chessengine.c ****   ce_FindPieceByStep(pos, PIECE_BISHOP, ce_dir_offset_bishop, 1);
 1923              		.loc 1 1488 0
 1924 0028 0123     		movs	r3, #1
 1925 002a 1A4A     		ldr	r2, .L153+8
 1926 002c 0321     		movs	r1, #3
 1927 002e 2046     		mov	r0, r4
 1928 0030 FFF7FEFF 		bl	ce_FindPieceByStep
 1929              	.LVL192:
1489:u8glib/chessengine.c ****   ce_FindPieceByStep(pos, PIECE_QUEEN, ce_dir_offset_queen, 1);
 1930              		.loc 1 1489 0
 1931 0034 184D     		ldr	r5, .L153+12
 1932 0036 0123     		movs	r3, #1
 1933 0038 2A46     		mov	r2, r5
 1934 003a 0521     		movs	r1, #5
 1935 003c 2046     		mov	r0, r4
 1936 003e FFF7FEFF 		bl	ce_FindPieceByStep
 1937              	.LVL193:
1490:u8glib/chessengine.c ****   ce_FindPieceByStep(pos, PIECE_KNIGHT, ce_dir_offset_knight, 0);
 1938              		.loc 1 1490 0
 1939 0042 0023     		movs	r3, #0
 1940 0044 154A     		ldr	r2, .L153+16
 1941 0046 0221     		movs	r1, #2
 1942 0048 2046     		mov	r0, r4
 1943 004a FFF7FEFF 		bl	ce_FindPieceByStep
 1944              	.LVL194:
1491:u8glib/chessengine.c ****   ce_FindPieceByStep(pos, PIECE_KING, ce_dir_offset_queen, 0);
 1945              		.loc 1 1491 0
 1946 004e 0023     		movs	r3, #0
 1947 0050 2A46     		mov	r2, r5
 1948 0052 0621     		movs	r1, #6
 1949 0054 2046     		mov	r0, r4
 1950 0056 FFF7FEFF 		bl	ce_FindPieceByStep
 1951              	.LVL195:
1492:u8glib/chessengine.c **** 
1493:u8glib/chessengine.c ****   ce_FindPawnPiece(pos+17, COLOR_BLACK);
 1952              		.loc 1 1493 0
 1953 005a 04F11100 		add	r0, r4, #17
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 64


 1954 005e 0121     		movs	r1, #1
 1955 0060 C0B2     		uxtb	r0, r0
 1956 0062 FFF7FEFF 		bl	ce_FindPawnPiece
 1957              	.LVL196:
1494:u8glib/chessengine.c ****   ce_FindPawnPiece(pos+15, COLOR_BLACK);
 1958              		.loc 1 1494 0
 1959 0066 04F10F00 		add	r0, r4, #15
 1960 006a 0121     		movs	r1, #1
 1961 006c C0B2     		uxtb	r0, r0
 1962 006e FFF7FEFF 		bl	ce_FindPawnPiece
 1963              	.LVL197:
1495:u8glib/chessengine.c ****   ce_FindPawnPiece(pos-17, COLOR_WHITE);
 1964              		.loc 1 1495 0
 1965 0072 A4F11100 		sub	r0, r4, #17
 1966 0076 0021     		movs	r1, #0
 1967 0078 C0B2     		uxtb	r0, r0
 1968 007a FFF7FEFF 		bl	ce_FindPawnPiece
 1969              	.LVL198:
1496:u8glib/chessengine.c ****   ce_FindPawnPiece(pos-15, COLOR_WHITE);
 1970              		.loc 1 1496 0
 1971 007e A4F10F00 		sub	r0, r4, #15
 1972 0082 0021     		movs	r1, #0
 1973 0084 C0B2     		uxtb	r0, r0
 1974 0086 FFF7FEFF 		bl	ce_FindPawnPiece
 1975              	.LVL199:
 1976              	.L150:
 1977 008a 38BD     		pop	{r3, r4, r5, pc}
 1978              	.L154:
 1979              		.align	2
 1980              	.L153:
 1981 008c 00000000 		.word	lrc_obj
 1982 0090 00000000 		.word	.LANCHOR4
 1983 0094 00000000 		.word	.LANCHOR5
 1984 0098 00000000 		.word	.LANCHOR6
 1985 009c 00000000 		.word	.LANCHOR7
 1986              		.cfi_endproc
 1987              	.LFE38:
 1989              		.section	.text.ce_GetPositionAttackWeight,"ax",%progbits
 1990              		.align	2
 1991              		.global	ce_GetPositionAttackWeight
 1992              		.thumb
 1993              		.thumb_func
 1995              	ce_GetPositionAttackWeight:
 1996              	.LFB39:
1497:u8glib/chessengine.c **** }
1498:u8glib/chessengine.c **** 
1499:u8glib/chessengine.c **** /*
1500:u8glib/chessengine.c ****   calculate the summed weight of pieces with specified color which can move to a specified position
1501:u8glib/chessengine.c **** 
1502:u8glib/chessengine.c ****   argument:
1503:u8glib/chessengine.c ****     pos: 	the position which should be analysed
1504:u8glib/chessengine.c ****     color: 	the color of those pieces which should be analysed
1505:u8glib/chessengine.c **** 		e.g. if a black piece is at 'pos' and 'color' is white then this procedure returns the white atti
1506:u8glib/chessengine.c **** */
1507:u8glib/chessengine.c **** uint8_t ce_GetPositionAttackWeight(uint8_t pos, uint8_t color)
1508:u8glib/chessengine.c **** {
 1997              		.loc 1 1508 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 65


 1998              		.cfi_startproc
 1999              		@ args = 0, pretend = 0, frame = 0
 2000              		@ frame_needed = 0, uses_anonymous_args = 0
 2001              	.LVL200:
 2002 0000 10B5     		push	{r4, lr}
 2003              	.LCFI24:
 2004              		.cfi_def_cfa_offset 8
 2005              		.cfi_offset 4, -8
 2006              		.cfi_offset 14, -4
 2007 0002 0C46     		mov	r4, r1
1509:u8glib/chessengine.c ****   ce_CalculatePositionWeight(pos);
 2008              		.loc 1 1509 0
 2009 0004 FFF7FEFF 		bl	ce_CalculatePositionWeight
 2010              	.LVL201:
1510:u8glib/chessengine.c ****   return lrc_obj.find_piece_weight[color];
 2011              		.loc 1 1510 0
 2012 0008 024B     		ldr	r3, .L157
 2013 000a 1C44     		add	r4, r4, r3
1511:u8glib/chessengine.c **** }
 2014              		.loc 1 1511 0
 2015 000c 94F84D00 		ldrb	r0, [r4, #77]	@ zero_extendqisi2
 2016 0010 10BD     		pop	{r4, pc}
 2017              	.L158:
 2018 0012 00BF     		.align	2
 2019              	.L157:
 2020 0014 00000000 		.word	lrc_obj
 2021              		.cfi_endproc
 2022              	.LFE39:
 2024              		.section	.text.cu_IsKingCastling,"ax",%progbits
 2025              		.align	2
 2026              		.global	cu_IsKingCastling
 2027              		.thumb
 2028              		.thumb_func
 2030              	cu_IsKingCastling:
 2031              	.LFB32:
1184:u8glib/chessengine.c ****   uint8_t pos;
 2032              		.loc 1 1184 0
 2033              		.cfi_startproc
 2034              		@ args = 0, pretend = 0, frame = 0
 2035              		@ frame_needed = 0, uses_anonymous_args = 0
 2036              	.LVL202:
 2037 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2038              	.LCFI25:
 2039              		.cfi_def_cfa_offset 32
 2040              		.cfi_offset 3, -32
 2041              		.cfi_offset 4, -28
 2042              		.cfi_offset 5, -24
 2043              		.cfi_offset 6, -20
 2044              		.cfi_offset 7, -16
 2045              		.cfi_offset 8, -12
 2046              		.cfi_offset 9, -8
 2047              		.cfi_offset 14, -4
1189:u8glib/chessengine.c ****     return 0; 	/* castling not allowed */
 2048              		.loc 1 1189 0
 2049 0004 174B     		ldr	r3, .L165
 2050 0006 93F84430 		ldrb	r3, [r3, #68]	@ zero_extendqisi2
 2051 000a 13EA0005 		ands	r5, r3, r0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 66


 2052 000e 25D0     		beq	.L160
 2053 0010 8846     		mov	r8, r1
 2054 0012 1646     		mov	r6, r2
1193:u8glib/chessengine.c ****   
 2055              		.loc 1 1193 0
 2056 0014 FFF7FEFF 		bl	stack_GetCurrElement
 2057              	.LVL203:
 2058 0018 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 2059              	.LVL204:
1197:u8glib/chessengine.c ****   
 2060              		.loc 1 1197 0
 2061 001a 8778     		ldrb	r7, [r0, #2]	@ zero_extendqisi2
 2062 001c C7F10107 		rsb	r7, r7, #1
 2063 0020 FFB2     		uxtb	r7, r7
 2064              	.LVL205:
1200:u8glib/chessengine.c ****     return 0;
 2065              		.loc 1 1200 0
 2066 0022 3946     		mov	r1, r7
 2067 0024 2046     		mov	r0, r4
 2068 0026 FFF7FEFF 		bl	ce_GetPositionAttackWeight
 2069              	.LVL206:
 2070 002a 0546     		mov	r5, r0
 2071 002c 98B9     		cbnz	r0, .L162
 2072              	.LVL207:
 2073              	.L161:
1208:u8glib/chessengine.c ****     /* check for a piece */
 2074              		.loc 1 1208 0
 2075 002e 4444     		add	r4, r4, r8
 2076              	.LVL208:
 2077 0030 E4B2     		uxtb	r4, r4
 2078              	.LVL209:
1210:u8glib/chessengine.c ****       return 0;		/* castling not allowed */
 2079              		.loc 1 1210 0
 2080 0032 2046     		mov	r0, r4
 2081 0034 FFF7FEFF 		bl	cp_GetFromBoard
 2082              	.LVL210:
 2083 0038 FFF7FEFF 		bl	cp_GetPiece
 2084              	.LVL211:
 2085 003c 8146     		mov	r9, r0
 2086 003e 68B9     		cbnz	r0, .L160
1214:u8glib/chessengine.c ****       return 0;
 2087              		.loc 1 1214 0
 2088 0040 3946     		mov	r1, r7
 2089 0042 2046     		mov	r0, r4
 2090 0044 FFF7FEFF 		bl	ce_GetPositionAttackWeight
 2091              	.LVL212:
 2092 0048 38B9     		cbnz	r0, .L163
1217:u8glib/chessengine.c ****     if ( cnt == 0 )
 2093              		.loc 1 1217 0
 2094 004a 721E     		subs	r2, r6, #1
 2095              	.LVL213:
1218:u8glib/chessengine.c ****       break;
 2096              		.loc 1 1218 0
 2097 004c 12F0FF06 		ands	r6, r2, #255
 2098 0050 EDD1     		bne	.L161
1221:u8glib/chessengine.c **** }
 2099              		.loc 1 1221 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 67


 2100 0052 0125     		movs	r5, #1
 2101 0054 02E0     		b	.L160
 2102              	.LVL214:
 2103              	.L162:
1201:u8glib/chessengine.c **** 
 2104              		.loc 1 1201 0
 2105 0056 0025     		movs	r5, #0
 2106 0058 00E0     		b	.L160
 2107              	.LVL215:
 2108              	.L163:
1215:u8glib/chessengine.c ****     
 2109              		.loc 1 1215 0
 2110 005a 4D46     		mov	r5, r9
 2111              	.LVL216:
 2112              	.L160:
1222:u8glib/chessengine.c **** 
 2113              		.loc 1 1222 0
 2114 005c 2846     		mov	r0, r5
 2115 005e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 2116              	.L166:
 2117 0062 00BF     		.align	2
 2118              	.L165:
 2119 0064 00000000 		.word	lrc_obj
 2120              		.cfi_endproc
 2121              	.LFE32:
 2123              		.section	.text.ce_GetPositionAttackCount,"ax",%progbits
 2124              		.align	2
 2125              		.global	ce_GetPositionAttackCount
 2126              		.thumb
 2127              		.thumb_func
 2129              	ce_GetPositionAttackCount:
 2130              	.LFB40:
1512:u8glib/chessengine.c **** 
1513:u8glib/chessengine.c **** uint8_t ce_GetPositionAttackCount(uint8_t pos, uint8_t color)
1514:u8glib/chessengine.c **** {
 2131              		.loc 1 1514 0
 2132              		.cfi_startproc
 2133              		@ args = 0, pretend = 0, frame = 0
 2134              		@ frame_needed = 0, uses_anonymous_args = 0
 2135              	.LVL217:
 2136 0000 10B5     		push	{r4, lr}
 2137              	.LCFI26:
 2138              		.cfi_def_cfa_offset 8
 2139              		.cfi_offset 4, -8
 2140              		.cfi_offset 14, -4
 2141 0002 0C46     		mov	r4, r1
1515:u8glib/chessengine.c ****   ce_CalculatePositionWeight(pos);
 2142              		.loc 1 1515 0
 2143 0004 FFF7FEFF 		bl	ce_CalculatePositionWeight
 2144              	.LVL218:
1516:u8glib/chessengine.c ****   return lrc_obj.find_piece_cnt[color];
 2145              		.loc 1 1516 0
 2146 0008 024B     		ldr	r3, .L169
 2147 000a 1C44     		add	r4, r4, r3
1517:u8glib/chessengine.c **** }
 2148              		.loc 1 1517 0
 2149 000c 94F84B00 		ldrb	r0, [r4, #75]	@ zero_extendqisi2
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 68


 2150 0010 10BD     		pop	{r4, pc}
 2151              	.L170:
 2152 0012 00BF     		.align	2
 2153              	.L169:
 2154 0014 00000000 		.word	lrc_obj
 2155              		.cfi_endproc
 2156              	.LFE40:
 2158              		.section	.text.ce_LoopPieces,"ax",%progbits
 2159              		.align	2
 2160              		.global	ce_LoopPieces
 2161              		.thumb
 2162              		.thumb_func
 2164              	ce_LoopPieces:
 2165              	.LFB41:
1518:u8glib/chessengine.c **** 
1519:u8glib/chessengine.c **** 
1520:u8glib/chessengine.c **** /*==============================================================*/
1521:u8glib/chessengine.c **** /* depth search starts here: loop over all pieces of the current color on the board */
1522:u8glib/chessengine.c **** /*==============================================================*/
1523:u8glib/chessengine.c **** 
1524:u8glib/chessengine.c **** void ce_LoopPieces(void)
1525:u8glib/chessengine.c **** {
 2166              		.loc 1 1525 0
 2167              		.cfi_startproc
 2168              		@ args = 0, pretend = 0, frame = 0
 2169              		@ frame_needed = 0, uses_anonymous_args = 0
 2170 0000 70B5     		push	{r4, r5, r6, lr}
 2171              	.LCFI27:
 2172              		.cfi_def_cfa_offset 16
 2173              		.cfi_offset 4, -16
 2174              		.cfi_offset 5, -12
 2175              		.cfi_offset 6, -8
 2176              		.cfi_offset 14, -4
1526:u8glib/chessengine.c ****   stack_element_p e = stack_GetCurrElement();
 2177              		.loc 1 1526 0
 2178 0002 FFF7FEFF 		bl	stack_GetCurrElement
 2179              	.LVL219:
 2180 0006 0446     		mov	r4, r0
 2181              	.LVL220:
1527:u8glib/chessengine.c ****   /* start with lower left position (A1) */
1528:u8glib/chessengine.c ****   e->current_pos = 0;
 2182              		.loc 1 1528 0
 2183 0008 0023     		movs	r3, #0
 2184 000a 0370     		strb	r3, [r0]
 2185              	.LVL221:
 2186              	.L180:
1529:u8glib/chessengine.c ****   do
1530:u8glib/chessengine.c ****   {
1531:u8glib/chessengine.c ****     e->current_cp = cp_GetFromBoard(e->current_pos);
 2187              		.loc 1 1531 0
 2188 000c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2189 000e FFF7FEFF 		bl	cp_GetFromBoard
 2190              	.LVL222:
 2191 0012 0546     		mov	r5, r0
 2192 0014 6070     		strb	r0, [r4, #1]
1532:u8glib/chessengine.c ****     /* check if the position on the board is empty */
1533:u8glib/chessengine.c ****     if ( e->current_cp != 0 )
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 69


 2193              		.loc 1 1533 0
 2194 0016 00B3     		cbz	r0, .L172
1534:u8glib/chessengine.c ****     {
1535:u8glib/chessengine.c ****       /* only generate moves for the current color */
1536:u8glib/chessengine.c ****       if ( e->current_color == cp_GetColor(e->current_cp) )
 2195              		.loc 1 1536 0
 2196 0018 A678     		ldrb	r6, [r4, #2]	@ zero_extendqisi2
 2197 001a FFF7FEFF 		bl	cp_GetColor
 2198              	.LVL223:
 2199 001e 8642     		cmp	r6, r0
 2200 0020 1BD1     		bne	.L172
1537:u8glib/chessengine.c ****       {
1538:u8glib/chessengine.c **** 	chess_Thinking();
1539:u8glib/chessengine.c **** 	
1540:u8glib/chessengine.c **** 	/* find out which piece is used */
1541:u8glib/chessengine.c **** 	switch(cp_GetPiece(e->current_cp))
 2201              		.loc 1 1541 0
 2202 0022 2846     		mov	r0, r5
 2203 0024 FFF7FEFF 		bl	cp_GetPiece
 2204              	.LVL224:
 2205 0028 0138     		subs	r0, r0, #1
 2206 002a 0528     		cmp	r0, #5
 2207 002c 15D8     		bhi	.L172
 2208 002e DFE800F0 		tbb	[pc, r0]
 2209              	.L174:
 2210 0032 03       		.byte	(.L173-.L174)/2
 2211 0033 06       		.byte	(.L175-.L174)/2
 2212 0034 09       		.byte	(.L176-.L174)/2
 2213 0035 0C       		.byte	(.L177-.L174)/2
 2214 0036 0F       		.byte	(.L178-.L174)/2
 2215 0037 12       		.byte	(.L179-.L174)/2
 2216              		.p2align 1
 2217              	.L173:
1542:u8glib/chessengine.c **** 	{
1543:u8glib/chessengine.c **** 	  case PIECE_NONE:
1544:u8glib/chessengine.c **** 	    break;
1545:u8glib/chessengine.c **** 	  case PIECE_PAWN:
1546:u8glib/chessengine.c **** 	    ce_LoopPawn();
 2218              		.loc 1 1546 0
 2219 0038 FFF7FEFF 		bl	ce_LoopPawn
 2220              	.LVL225:
1547:u8glib/chessengine.c **** 	    break;
 2221              		.loc 1 1547 0
 2222 003c 0DE0     		b	.L172
 2223              	.L175:
1548:u8glib/chessengine.c **** 	  case PIECE_KNIGHT:
1549:u8glib/chessengine.c **** 	    ce_LoopKnight();
 2224              		.loc 1 1549 0
 2225 003e FFF7FEFF 		bl	ce_LoopKnight
 2226              	.LVL226:
1550:u8glib/chessengine.c **** 	    break;
 2227              		.loc 1 1550 0
 2228 0042 0AE0     		b	.L172
 2229              	.L176:
1551:u8glib/chessengine.c **** 	  case PIECE_BISHOP:
1552:u8glib/chessengine.c **** 	    ce_LoopBishop();
 2230              		.loc 1 1552 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 70


 2231 0044 FFF7FEFF 		bl	ce_LoopBishop
 2232              	.LVL227:
1553:u8glib/chessengine.c **** 	    break;
 2233              		.loc 1 1553 0
 2234 0048 07E0     		b	.L172
 2235              	.L177:
1554:u8glib/chessengine.c **** 	  case PIECE_ROOK:
1555:u8glib/chessengine.c **** 	    ce_LoopRook();
 2236              		.loc 1 1555 0
 2237 004a FFF7FEFF 		bl	ce_LoopRook
 2238              	.LVL228:
1556:u8glib/chessengine.c **** 	    break;
 2239              		.loc 1 1556 0
 2240 004e 04E0     		b	.L172
 2241              	.L178:
1557:u8glib/chessengine.c **** 	  case PIECE_QUEEN:
1558:u8glib/chessengine.c **** 	    ce_LoopQueen();
 2242              		.loc 1 1558 0
 2243 0050 FFF7FEFF 		bl	ce_LoopQueen
 2244              	.LVL229:
1559:u8glib/chessengine.c **** 	    break;
 2245              		.loc 1 1559 0
 2246 0054 01E0     		b	.L172
 2247              	.L179:
1560:u8glib/chessengine.c **** 	  case PIECE_KING:
1561:u8glib/chessengine.c **** 	    ce_LoopKing();
 2248              		.loc 1 1561 0
 2249 0056 FFF7FEFF 		bl	ce_LoopKing
 2250              	.LVL230:
 2251              	.L172:
1562:u8glib/chessengine.c **** 	    break;
1563:u8glib/chessengine.c **** 	}
1564:u8glib/chessengine.c ****       }
1565:u8glib/chessengine.c ****     }    
1566:u8glib/chessengine.c ****     e->current_pos = cu_NextPos(e->current_pos);
 2252              		.loc 1 1566 0
 2253 005a 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2254 005c FFF7FEFF 		bl	cu_NextPos
 2255              	.LVL231:
 2256 0060 2070     		strb	r0, [r4]
1567:u8glib/chessengine.c ****   } while( e->current_pos != 0 );
 2257              		.loc 1 1567 0
 2258 0062 0028     		cmp	r0, #0
 2259 0064 D2D1     		bne	.L180
1568:u8glib/chessengine.c **** }
 2260              		.loc 1 1568 0
 2261 0066 70BD     		pop	{r4, r5, r6, pc}
 2262              		.cfi_endproc
 2263              	.LFE41:
 2265              		.section	.text.ce_LoopRecur,"ax",%progbits
 2266              		.align	2
 2267              		.global	ce_LoopRecur
 2268              		.thumb
 2269              		.thumb_func
 2271              	ce_LoopRecur:
 2272              	.LFB26:
1037:u8glib/chessengine.c ****   eval_t eval;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 71


 2273              		.loc 1 1037 0
 2274              		.cfi_startproc
 2275              		@ args = 0, pretend = 0, frame = 0
 2276              		@ frame_needed = 0, uses_anonymous_args = 0
 2277              	.LVL232:
 2278 0000 38B5     		push	{r3, r4, r5, lr}
 2279              	.LCFI28:
 2280              		.cfi_def_cfa_offset 16
 2281              		.cfi_offset 3, -16
 2282              		.cfi_offset 4, -12
 2283              		.cfi_offset 5, -8
 2284              		.cfi_offset 14, -4
 2285 0002 0546     		mov	r5, r0
1042:u8glib/chessengine.c ****     return 0;
 2286              		.loc 1 1042 0
 2287 0004 FFF7FEFF 		bl	stack_GetCurrElement
 2288              	.LVL233:
 2289 0008 0446     		mov	r4, r0
 2290 000a 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 2291 000c 2846     		mov	r0, r5
 2292 000e FFF7FEFF 		bl	cu_IsIllegalPosition
 2293              	.LVL234:
 2294 0012 0028     		cmp	r0, #0
 2295 0014 41D1     		bne	.L187
1046:u8glib/chessengine.c **** 
 2296              		.loc 1 1046 0
 2297 0016 2946     		mov	r1, r5
 2298 0018 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2299 001a FFF7FEFF 		bl	cu_Move
 2300              	.LVL235:
1053:u8glib/chessengine.c ****   {
 2301              		.loc 1 1053 0
 2302 001e FFF7FEFF 		bl	stack_GetCurrElement
 2303              	.LVL236:
 2304 0022 8078     		ldrb	r0, [r0, #2]	@ zero_extendqisi2
 2305 0024 FFF7FEFF 		bl	stack_Push
 2306              	.LVL237:
 2307 0028 18B9     		cbnz	r0, .L184
1055:u8glib/chessengine.c ****   }
 2308              		.loc 1 1055 0
 2309 002a FFF7FEFF 		bl	ce_Eval
 2310              	.LVL238:
 2311 002e 0446     		mov	r4, r0
 2312              	.LVL239:
 2313 0030 0BE0     		b	.L185
 2314              	.LVL240:
 2315              	.L184:
1060:u8glib/chessengine.c ****     /* start over with ntext level */
 2316              		.loc 1 1060 0
 2317 0032 FFF7FEFF 		bl	stack_InitCurrElement
 2318              	.LVL241:
1062:u8glib/chessengine.c ****     /* get the best move from opponents view, so invert the result */
 2319              		.loc 1 1062 0
 2320 0036 FFF7FEFF 		bl	ce_LoopPieces
 2321              	.LVL242:
1064:u8glib/chessengine.c ****     stack_Pop();
 2322              		.loc 1 1064 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 72


 2323 003a FFF7FEFF 		bl	stack_GetCurrElement
 2324              	.LVL243:
 2325 003e B0F90640 		ldrsh	r4, [r0, #6]
 2326 0042 6442     		negs	r4, r4
 2327 0044 24B2     		sxth	r4, r4
 2328              	.LVL244:
1065:u8glib/chessengine.c ****   }
 2329              		.loc 1 1065 0
 2330 0046 FFF7FEFF 		bl	stack_Pop
 2331              	.LVL245:
 2332              	.L185:
1069:u8glib/chessengine.c ****   
 2333              		.loc 1 1069 0
 2334 004a 2946     		mov	r1, r5
 2335 004c 2046     		mov	r0, r4
 2336 004e FFF7FEFF 		bl	stack_SetMove
 2337              	.LVL246:
1072:u8glib/chessengine.c ****   
 2338              		.loc 1 1072 0
 2339 0052 FFF7FEFF 		bl	cu_UndoHalfMove
 2340              	.LVL247:
1077:u8glib/chessengine.c ****   {
 2341              		.loc 1 1077 0
 2342 0056 154B     		ldr	r3, .L192
 2343 0058 93F84A40 		ldrb	r4, [r3, #74]	@ zero_extendqisi2
 2344              	.LVL248:
 2345 005c FCB1     		cbz	r4, .L188
 2346              	.LBB2:
1079:u8glib/chessengine.c ****     if ( lrc_obj.check_mode == CHECK_MODE_MOVEABLE )
 2347              		.loc 1 1079 0
 2348 005e FFF7FEFF 		bl	stack_GetCurrElement
 2349              	.LVL249:
1080:u8glib/chessengine.c ****     {
 2350              		.loc 1 1080 0
 2351 0062 012C     		cmp	r4, #1
 2352 0064 06D1     		bne	.L186
1082:u8glib/chessengine.c ****     }
 2353              		.loc 1 1082 0
 2354 0066 4178     		ldrb	r1, [r0, #1]	@ zero_extendqisi2
 2355 0068 41F02001 		orr	r1, r1, #32
 2356 006c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2357              	.LVL250:
 2358 006e FFF7FEFF 		bl	cp_SetOnBoard
 2359              	.LVL251:
 2360 0072 19E0     		b	.L183
 2361              	.LVL252:
 2362              	.L186:
1084:u8glib/chessengine.c ****     {
 2363              		.loc 1 1084 0
 2364 0074 022C     		cmp	r4, #2
 2365 0076 14D1     		bne	.L189
1086:u8glib/chessengine.c ****       {
 2366              		.loc 1 1086 0
 2367 0078 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 2368 007a 0C4B     		ldr	r3, .L192
 2369 007c 93F84930 		ldrb	r3, [r3, #73]	@ zero_extendqisi2
 2370 0080 9A42     		cmp	r2, r3
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 73


 2371 0082 10D1     		bne	.L190
1088:u8glib/chessengine.c ****       }
 2372              		.loc 1 1088 0
 2373 0084 2846     		mov	r0, r5
 2374              	.LVL253:
 2375 0086 FFF7FEFF 		bl	cp_GetFromBoard
 2376              	.LVL254:
 2377 008a 40F02001 		orr	r1, r0, #32
 2378 008e C9B2     		uxtb	r1, r1
 2379 0090 2846     		mov	r0, r5
 2380 0092 FFF7FEFF 		bl	cp_SetOnBoard
 2381              	.LVL255:
 2382              	.LBE2:
1092:u8glib/chessengine.c **** }
 2383              		.loc 1 1092 0
 2384 0096 0124     		movs	r4, #1
 2385 0098 06E0     		b	.L183
 2386              	.L187:
1043:u8glib/chessengine.c **** 
 2387              		.loc 1 1043 0
 2388 009a 0024     		movs	r4, #0
 2389 009c 04E0     		b	.L183
 2390              	.L188:
1092:u8glib/chessengine.c **** }
 2391              		.loc 1 1092 0
 2392 009e 0124     		movs	r4, #1
 2393 00a0 02E0     		b	.L183
 2394              	.LVL256:
 2395              	.L189:
 2396 00a2 0124     		movs	r4, #1
 2397 00a4 00E0     		b	.L183
 2398              	.L190:
 2399 00a6 0124     		movs	r4, #1
 2400              	.LVL257:
 2401              	.L183:
1093:u8glib/chessengine.c **** 
 2402              		.loc 1 1093 0
 2403 00a8 2046     		mov	r0, r4
 2404 00aa 38BD     		pop	{r3, r4, r5, pc}
 2405              	.L193:
 2406              		.align	2
 2407              	.L192:
 2408 00ac 00000000 		.word	lrc_obj
 2409              		.cfi_endproc
 2410              	.LFE26:
 2412              		.section	.text.ce_LoopDirsSingleMultiStep,"ax",%progbits
 2413              		.align	2
 2414              		.global	ce_LoopDirsSingleMultiStep
 2415              		.thumb
 2416              		.thumb_func
 2418              	ce_LoopDirsSingleMultiStep:
 2419              	.LFB27:
1113:u8glib/chessengine.c ****   uint8_t loop_pos;
 2420              		.loc 1 1113 0
 2421              		.cfi_startproc
 2422              		@ args = 0, pretend = 0, frame = 0
 2423              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 74


 2424              	.LVL258:
 2425 0000 70B5     		push	{r4, r5, r6, lr}
 2426              	.LCFI29:
 2427              		.cfi_def_cfa_offset 16
 2428              		.cfi_offset 4, -16
 2429              		.cfi_offset 5, -12
 2430              		.cfi_offset 6, -8
 2431              		.cfi_offset 14, -4
 2432 0002 0546     		mov	r5, r0
 2433 0004 0E46     		mov	r6, r1
 2434              	.LVL259:
 2435              	.L198:
1119:u8glib/chessengine.c ****       break;
 2436              		.loc 1 1119 0
 2437 0006 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 2438 0008 9BB1     		cbz	r3, .L194
1123:u8glib/chessengine.c ****     
 2439              		.loc 1 1123 0
 2440 000a FFF7FEFF 		bl	stack_GetCurrElement
 2441              	.LVL260:
 2442 000e 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 2443              	.LVL261:
 2444              	.L197:
1129:u8glib/chessengine.c ****       
 2445              		.loc 1 1129 0
 2446 0010 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 2447 0012 1C44     		add	r4, r4, r3
 2448              	.LVL262:
 2449 0014 E4B2     		uxtb	r4, r4
 2450              	.LVL263:
1136:u8glib/chessengine.c **** 	break;
 2451              		.loc 1 1136 0
 2452 0016 2046     		mov	r0, r4
 2453 0018 FFF7FEFF 		bl	ce_LoopRecur
 2454              	.LVL264:
 2455 001c 38B1     		cbz	r0, .L196
1140:u8glib/chessengine.c **** 	break;
 2456              		.loc 1 1140 0
 2457 001e 2046     		mov	r0, r4
 2458 0020 FFF7FEFF 		bl	cp_GetFromBoard
 2459              	.LVL265:
 2460 0024 FFF7FEFF 		bl	cp_GetPiece
 2461              	.LVL266:
 2462 0028 08B9     		cbnz	r0, .L196
1142:u8glib/chessengine.c ****     d++;
 2463              		.loc 1 1142 0
 2464 002a 002E     		cmp	r6, #0
 2465 002c F0D1     		bne	.L197
 2466              	.L196:
1143:u8glib/chessengine.c ****   }
 2467              		.loc 1 1143 0
 2468 002e 0135     		adds	r5, r5, #1
 2469              	.LVL267:
1144:u8glib/chessengine.c **** }
 2470              		.loc 1 1144 0
 2471 0030 E9E7     		b	.L198
 2472              	.LVL268:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 75


 2473              	.L194:
 2474 0032 70BD     		pop	{r4, r5, r6, pc}
 2475              		.cfi_endproc
 2476              	.LFE27:
 2478              		.section	.text.ce_LoopRook,"ax",%progbits
 2479              		.align	2
 2480              		.global	ce_LoopRook
 2481              		.thumb
 2482              		.thumb_func
 2484              	ce_LoopRook:
 2485              	.LFB28:
1148:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_rook, 1);
 2486              		.loc 1 1148 0
 2487              		.cfi_startproc
 2488              		@ args = 0, pretend = 0, frame = 0
 2489              		@ frame_needed = 0, uses_anonymous_args = 0
 2490 0000 08B5     		push	{r3, lr}
 2491              	.LCFI30:
 2492              		.cfi_def_cfa_offset 8
 2493              		.cfi_offset 3, -8
 2494              		.cfi_offset 14, -4
1149:u8glib/chessengine.c **** }
 2495              		.loc 1 1149 0
 2496 0002 0121     		movs	r1, #1
 2497 0004 0148     		ldr	r0, .L202
 2498 0006 FFF7FEFF 		bl	ce_LoopDirsSingleMultiStep
 2499              	.LVL269:
 2500 000a 08BD     		pop	{r3, pc}
 2501              	.L203:
 2502              		.align	2
 2503              	.L202:
 2504 000c 00000000 		.word	.LANCHOR4
 2505              		.cfi_endproc
 2506              	.LFE28:
 2508              		.section	.text.ce_LoopBishop,"ax",%progbits
 2509              		.align	2
 2510              		.global	ce_LoopBishop
 2511              		.thumb
 2512              		.thumb_func
 2514              	ce_LoopBishop:
 2515              	.LFB29:
1153:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_bishop, 1);
 2516              		.loc 1 1153 0
 2517              		.cfi_startproc
 2518              		@ args = 0, pretend = 0, frame = 0
 2519              		@ frame_needed = 0, uses_anonymous_args = 0
 2520 0000 08B5     		push	{r3, lr}
 2521              	.LCFI31:
 2522              		.cfi_def_cfa_offset 8
 2523              		.cfi_offset 3, -8
 2524              		.cfi_offset 14, -4
1154:u8glib/chessengine.c **** }
 2525              		.loc 1 1154 0
 2526 0002 0121     		movs	r1, #1
 2527 0004 0148     		ldr	r0, .L206
 2528 0006 FFF7FEFF 		bl	ce_LoopDirsSingleMultiStep
 2529              	.LVL270:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 76


 2530 000a 08BD     		pop	{r3, pc}
 2531              	.L207:
 2532              		.align	2
 2533              	.L206:
 2534 000c 00000000 		.word	.LANCHOR5
 2535              		.cfi_endproc
 2536              	.LFE29:
 2538              		.section	.text.ce_LoopQueen,"ax",%progbits
 2539              		.align	2
 2540              		.global	ce_LoopQueen
 2541              		.thumb
 2542              		.thumb_func
 2544              	ce_LoopQueen:
 2545              	.LFB30:
1158:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_queen, 1);
 2546              		.loc 1 1158 0
 2547              		.cfi_startproc
 2548              		@ args = 0, pretend = 0, frame = 0
 2549              		@ frame_needed = 0, uses_anonymous_args = 0
 2550 0000 08B5     		push	{r3, lr}
 2551              	.LCFI32:
 2552              		.cfi_def_cfa_offset 8
 2553              		.cfi_offset 3, -8
 2554              		.cfi_offset 14, -4
1159:u8glib/chessengine.c **** }
 2555              		.loc 1 1159 0
 2556 0002 0121     		movs	r1, #1
 2557 0004 0148     		ldr	r0, .L210
 2558 0006 FFF7FEFF 		bl	ce_LoopDirsSingleMultiStep
 2559              	.LVL271:
 2560 000a 08BD     		pop	{r3, pc}
 2561              	.L211:
 2562              		.align	2
 2563              	.L210:
 2564 000c 00000000 		.word	.LANCHOR6
 2565              		.cfi_endproc
 2566              	.LFE30:
 2568              		.section	.text.ce_LoopKnight,"ax",%progbits
 2569              		.align	2
 2570              		.global	ce_LoopKnight
 2571              		.thumb
 2572              		.thumb_func
 2574              	ce_LoopKnight:
 2575              	.LFB31:
1163:u8glib/chessengine.c ****   ce_LoopDirsSingleMultiStep(ce_dir_offset_knight, 0);
 2576              		.loc 1 1163 0
 2577              		.cfi_startproc
 2578              		@ args = 0, pretend = 0, frame = 0
 2579              		@ frame_needed = 0, uses_anonymous_args = 0
 2580 0000 08B5     		push	{r3, lr}
 2581              	.LCFI33:
 2582              		.cfi_def_cfa_offset 8
 2583              		.cfi_offset 3, -8
 2584              		.cfi_offset 14, -4
1164:u8glib/chessengine.c **** }
 2585              		.loc 1 1164 0
 2586 0002 0021     		movs	r1, #0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 77


 2587 0004 0148     		ldr	r0, .L214
 2588 0006 FFF7FEFF 		bl	ce_LoopDirsSingleMultiStep
 2589              	.LVL272:
 2590 000a 08BD     		pop	{r3, pc}
 2591              	.L215:
 2592              		.align	2
 2593              	.L214:
 2594 000c 00000000 		.word	.LANCHOR7
 2595              		.cfi_endproc
 2596              	.LFE31:
 2598              		.section	.text.ce_LoopKing,"ax",%progbits
 2599              		.align	2
 2600              		.global	ce_LoopKing
 2601              		.thumb
 2602              		.thumb_func
 2604              	ce_LoopKing:
 2605              	.LFB33:
1225:u8glib/chessengine.c ****   /*
 2606              		.loc 1 1225 0
 2607              		.cfi_startproc
 2608              		@ args = 0, pretend = 0, frame = 0
 2609              		@ frame_needed = 0, uses_anonymous_args = 0
 2610 0000 08B5     		push	{r3, lr}
 2611              	.LCFI34:
 2612              		.cfi_def_cfa_offset 8
 2613              		.cfi_offset 3, -8
 2614              		.cfi_offset 14, -4
1234:u8glib/chessengine.c ****   {
 2615              		.loc 1 1234 0
 2616 0002 FFF7FEFF 		bl	stack_GetCurrElement
 2617              	.LVL273:
 2618 0006 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2619 0008 DBB9     		cbnz	r3, .L217
1237:u8glib/chessengine.c ****     {
 2620              		.loc 1 1237 0
 2621 000a 0322     		movs	r2, #3
 2622 000c 4FF0FF31 		mov	r1, #-1
 2623 0010 0120     		movs	r0, #1
 2624 0012 FFF7FEFF 		bl	cu_IsKingCastling
 2625              	.LVL274:
 2626 0016 30B1     		cbz	r0, .L218
1240:u8glib/chessengine.c ****     }
 2627              		.loc 1 1240 0
 2628 0018 FFF7FEFF 		bl	stack_GetCurrElement
 2629              	.LVL275:
 2630 001c 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2631 001e 0238     		subs	r0, r0, #2
 2632 0020 C0B2     		uxtb	r0, r0
 2633 0022 FFF7FEFF 		bl	ce_LoopRecur
 2634              	.LVL276:
 2635              	.L218:
1243:u8glib/chessengine.c ****     {
 2636              		.loc 1 1243 0
 2637 0026 0222     		movs	r2, #2
 2638 0028 0121     		movs	r1, #1
 2639 002a 1046     		mov	r0, r2
 2640 002c FFF7FEFF 		bl	cu_IsKingCastling
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 78


 2641              	.LVL277:
 2642 0030 10B3     		cbz	r0, .L219
1246:u8glib/chessengine.c ****     }
 2643              		.loc 1 1246 0
 2644 0032 FFF7FEFF 		bl	stack_GetCurrElement
 2645              	.LVL278:
 2646 0036 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2647 0038 0230     		adds	r0, r0, #2
 2648 003a C0B2     		uxtb	r0, r0
 2649 003c FFF7FEFF 		bl	ce_LoopRecur
 2650              	.LVL279:
 2651 0040 1AE0     		b	.L219
 2652              	.L217:
1252:u8glib/chessengine.c ****     {
 2653              		.loc 1 1252 0
 2654 0042 0322     		movs	r2, #3
 2655 0044 4FF0FF31 		mov	r1, #-1
 2656 0048 0420     		movs	r0, #4
 2657 004a FFF7FEFF 		bl	cu_IsKingCastling
 2658              	.LVL280:
 2659 004e 30B1     		cbz	r0, .L220
1255:u8glib/chessengine.c ****     }
 2660              		.loc 1 1255 0
 2661 0050 FFF7FEFF 		bl	stack_GetCurrElement
 2662              	.LVL281:
 2663 0054 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2664 0056 0238     		subs	r0, r0, #2
 2665 0058 C0B2     		uxtb	r0, r0
 2666 005a FFF7FEFF 		bl	ce_LoopRecur
 2667              	.LVL282:
 2668              	.L220:
1258:u8glib/chessengine.c ****     {
 2669              		.loc 1 1258 0
 2670 005e 0222     		movs	r2, #2
 2671 0060 0121     		movs	r1, #1
 2672 0062 0820     		movs	r0, #8
 2673 0064 FFF7FEFF 		bl	cu_IsKingCastling
 2674              	.LVL283:
 2675 0068 30B1     		cbz	r0, .L219
1261:u8glib/chessengine.c ****     }
 2676              		.loc 1 1261 0
 2677 006a FFF7FEFF 		bl	stack_GetCurrElement
 2678              	.LVL284:
 2679 006e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 2680 0070 0230     		adds	r0, r0, #2
 2681 0072 C0B2     		uxtb	r0, r0
 2682 0074 FFF7FEFF 		bl	ce_LoopRecur
 2683              	.LVL285:
 2684              	.L219:
1266:u8glib/chessengine.c **** }
 2685              		.loc 1 1266 0
 2686 0078 0021     		movs	r1, #0
 2687 007a 0248     		ldr	r0, .L222
 2688 007c FFF7FEFF 		bl	ce_LoopDirsSingleMultiStep
 2689              	.LVL286:
 2690 0080 08BD     		pop	{r3, pc}
 2691              	.L223:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 79


 2692 0082 00BF     		.align	2
 2693              	.L222:
 2694 0084 00000000 		.word	.LANCHOR6
 2695              		.cfi_endproc
 2696              	.LFE33:
 2698              		.section	.text.ce_LoopPawnSideCapture,"ax",%progbits
 2699              		.align	2
 2700              		.global	ce_LoopPawnSideCapture
 2701              		.thumb
 2702              		.thumb_func
 2704              	ce_LoopPawnSideCapture:
 2705              	.LFB34:
1279:u8glib/chessengine.c ****   if ( gpos_IsIllegal(loop_pos) == 0 )
 2706              		.loc 1 1279 0
 2707              		.cfi_startproc
 2708              		@ args = 0, pretend = 0, frame = 0
 2709              		@ frame_needed = 0, uses_anonymous_args = 0
 2710              	.LVL287:
1280:u8glib/chessengine.c ****   {
 2711              		.loc 1 1280 0
 2712 0000 10F0880F 		tst	r0, #136
 2713 0004 23D1     		bne	.L229
1279:u8glib/chessengine.c ****   if ( gpos_IsIllegal(loop_pos) == 0 )
 2714              		.loc 1 1279 0
 2715 0006 10B5     		push	{r4, lr}
 2716              	.LCFI35:
 2717              		.cfi_def_cfa_offset 8
 2718              		.cfi_offset 4, -8
 2719              		.cfi_offset 14, -4
 2720 0008 0446     		mov	r4, r0
1284:u8glib/chessengine.c ****     {
 2721              		.loc 1 1284 0
 2722 000a FFF7FEFF 		bl	cp_GetFromBoard
 2723              	.LVL288:
 2724 000e FFF7FEFF 		bl	cp_GetPiece
 2725              	.LVL289:
 2726 0012 18B1     		cbz	r0, .L226
1287:u8glib/chessengine.c ****       /* TODO: check for pawn conversion/promotion */
 2727              		.loc 1 1287 0
 2728 0014 2046     		mov	r0, r4
 2729 0016 FFF7FEFF 		bl	ce_LoopRecur
 2730              	.LVL290:
 2731 001a 10BD     		pop	{r4, pc}
 2732              	.L226:
1293:u8glib/chessengine.c ****       {
 2733              		.loc 1 1293 0
 2734 001c FFF7FEFF 		bl	stack_GetCurrElement
 2735              	.LVL291:
 2736 0020 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 2737 0022 4BB9     		cbnz	r3, .L227
1295:u8glib/chessengine.c **** 	{
 2738              		.loc 1 1295 0
 2739 0024 0A4B     		ldr	r3, .L230
 2740 0026 93F84330 		ldrb	r3, [r3, #67]	@ zero_extendqisi2
 2741 002a 1033     		adds	r3, r3, #16
 2742 002c A342     		cmp	r3, r4
 2743 002e 0DD1     		bne	.L224
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 80


1297:u8glib/chessengine.c **** 	  /* note: pawn conversion/promotion can not occur */
 2744              		.loc 1 1297 0
 2745 0030 2046     		mov	r0, r4
 2746 0032 FFF7FEFF 		bl	ce_LoopRecur
 2747              	.LVL292:
 2748 0036 10BD     		pop	{r4, pc}
 2749              	.L227:
1303:u8glib/chessengine.c **** 	{
 2750              		.loc 1 1303 0
 2751 0038 054B     		ldr	r3, .L230
 2752 003a 93F84220 		ldrb	r2, [r3, #66]	@ zero_extendqisi2
 2753 003e 04F11003 		add	r3, r4, #16
 2754 0042 9A42     		cmp	r2, r3
 2755 0044 02D1     		bne	.L224
1305:u8glib/chessengine.c **** 	  /* note: pawn conversion/promotion can not occur */
 2756              		.loc 1 1305 0
 2757 0046 2046     		mov	r0, r4
 2758 0048 FFF7FEFF 		bl	ce_LoopRecur
 2759              	.LVL293:
 2760              	.L224:
 2761 004c 10BD     		pop	{r4, pc}
 2762              	.LVL294:
 2763              	.L229:
 2764              	.LCFI36:
 2765              		.cfi_def_cfa_offset 0
 2766              		.cfi_restore 4
 2767              		.cfi_restore 14
 2768 004e 7047     		bx	lr
 2769              	.L231:
 2770              		.align	2
 2771              	.L230:
 2772 0050 00000000 		.word	lrc_obj
 2773              		.cfi_endproc
 2774              	.LFE34:
 2776              		.section	.text.ce_LoopPawn,"ax",%progbits
 2777              		.align	2
 2778              		.global	ce_LoopPawn
 2779              		.thumb
 2780              		.thumb_func
 2782              	ce_LoopPawn:
 2783              	.LFB35:
1314:u8glib/chessengine.c ****   uint8_t initial_pos = stack_GetCurrElement()->current_pos; 
 2784              		.loc 1 1314 0
 2785              		.cfi_startproc
 2786              		@ args = 0, pretend = 0, frame = 0
 2787              		@ frame_needed = 0, uses_anonymous_args = 0
 2788 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2789              	.LCFI37:
 2790              		.cfi_def_cfa_offset 24
 2791              		.cfi_offset 3, -24
 2792              		.cfi_offset 4, -20
 2793              		.cfi_offset 5, -16
 2794              		.cfi_offset 6, -12
 2795              		.cfi_offset 7, -8
 2796              		.cfi_offset 14, -4
1315:u8glib/chessengine.c ****   uint8_t my_color = stack_GetCurrElement()->current_color;
 2797              		.loc 1 1315 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 81


 2798 0002 FFF7FEFF 		bl	stack_GetCurrElement
 2799              	.LVL295:
 2800 0006 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 2801              	.LVL296:
1316:u8glib/chessengine.c ****   
 2802              		.loc 1 1316 0
 2803 0008 8678     		ldrb	r6, [r0, #2]	@ zero_extendqisi2
 2804              	.LVL297:
1325:u8glib/chessengine.c ****   if ( my_color == COLOR_WHITE )
 2805              		.loc 1 1325 0
 2806 000a 2709     		lsrs	r7, r4, #4
 2807              	.LVL298:
1326:u8glib/chessengine.c ****     loop_pos += 16;
 2808              		.loc 1 1326 0
 2809 000c 1EB9     		cbnz	r6, .L233
1327:u8glib/chessengine.c ****   else
 2810              		.loc 1 1327 0
 2811 000e 04F11005 		add	r5, r4, #16
 2812 0012 EDB2     		uxtb	r5, r5
 2813              	.LVL299:
 2814 0014 02E0     		b	.L234
 2815              	.LVL300:
 2816              	.L233:
1329:u8glib/chessengine.c ****   if ( gpos_IsIllegal(loop_pos) == 0 )
 2817              		.loc 1 1329 0
 2818 0016 A4F11005 		sub	r5, r4, #16
 2819 001a EDB2     		uxtb	r5, r5
 2820              	.LVL301:
 2821              	.L234:
1330:u8glib/chessengine.c ****   {
 2822              		.loc 1 1330 0
 2823 001c 15F0880F 		tst	r5, #136
 2824 0020 1ED1     		bne	.L235
1333:u8glib/chessengine.c ****     {
 2825              		.loc 1 1333 0
 2826 0022 2846     		mov	r0, r5
 2827 0024 FFF7FEFF 		bl	cp_GetFromBoard
 2828              	.LVL302:
 2829 0028 FFF7FEFF 		bl	cp_GetPiece
 2830              	.LVL303:
 2831 002c C0B9     		cbnz	r0, .L235
1336:u8glib/chessengine.c **** 
 2832              		.loc 1 1336 0
 2833 002e 2846     		mov	r0, r5
 2834 0030 FFF7FEFF 		bl	ce_LoopRecur
 2835              	.LVL304:
1341:u8glib/chessengine.c ****       {
 2836              		.loc 1 1341 0
 2837 0034 0EB9     		cbnz	r6, .L236
1341:u8glib/chessengine.c ****       {
 2838              		.loc 1 1341 0 is_stmt 0 discriminator 1
 2839 0036 012F     		cmp	r7, #1
 2840 0038 03D0     		beq	.L237
 2841              	.L236:
1341:u8glib/chessengine.c ****       {
 2842              		.loc 1 1341 0 discriminator 3
 2843 003a 012E     		cmp	r6, #1
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 82


 2844 003c 10D1     		bne	.L235
1341:u8glib/chessengine.c ****       {
 2845              		.loc 1 1341 0 discriminator 4
 2846 003e 062F     		cmp	r7, #6
 2847 0040 0ED1     		bne	.L235
 2848              	.L237:
1345:u8glib/chessengine.c **** 	  loop_pos += 16;
 2849              		.loc 1 1345 0 is_stmt 1
 2850 0042 16B9     		cbnz	r6, .L238
1346:u8glib/chessengine.c **** 	else
 2851              		.loc 1 1346 0
 2852 0044 1035     		adds	r5, r5, #16
 2853              	.LVL305:
 2854 0046 EDB2     		uxtb	r5, r5
 2855              	.LVL306:
 2856 0048 01E0     		b	.L239
 2857              	.L238:
1348:u8glib/chessengine.c **** 	if ( cp_GetPiece(cp_GetFromBoard(loop_pos)) == PIECE_NONE )
 2858              		.loc 1 1348 0
 2859 004a 103D     		subs	r5, r5, #16
 2860              	.LVL307:
 2861 004c EDB2     		uxtb	r5, r5
 2862              	.LVL308:
 2863              	.L239:
1349:u8glib/chessengine.c **** 	{
 2864              		.loc 1 1349 0
 2865 004e 2846     		mov	r0, r5
 2866 0050 FFF7FEFF 		bl	cp_GetFromBoard
 2867              	.LVL309:
 2868 0054 FFF7FEFF 		bl	cp_GetPiece
 2869              	.LVL310:
 2870 0058 10B9     		cbnz	r0, .L235
1352:u8glib/chessengine.c **** 	}
 2871              		.loc 1 1352 0
 2872 005a 2846     		mov	r0, r5
 2873 005c FFF7FEFF 		bl	ce_LoopRecur
 2874              	.LVL311:
 2875              	.L235:
1361:u8glib/chessengine.c ****     loop_pos += 15;
 2876              		.loc 1 1361 0
 2877 0060 1EB9     		cbnz	r6, .L240
1362:u8glib/chessengine.c ****   else
 2878              		.loc 1 1362 0
 2879 0062 04F10F00 		add	r0, r4, #15
 2880 0066 C0B2     		uxtb	r0, r0
 2881              	.LVL312:
 2882 0068 02E0     		b	.L241
 2883              	.LVL313:
 2884              	.L240:
1364:u8glib/chessengine.c ****   ce_LoopPawnSideCapture(loop_pos);
 2885              		.loc 1 1364 0
 2886 006a A4F10F00 		sub	r0, r4, #15
 2887 006e C0B2     		uxtb	r0, r0
 2888              	.LVL314:
 2889              	.L241:
1365:u8glib/chessengine.c **** 
 2890              		.loc 1 1365 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 83


 2891 0070 FFF7FEFF 		bl	ce_LoopPawnSideCapture
 2892              	.LVL315:
1369:u8glib/chessengine.c ****     loop_pos += 17;
 2893              		.loc 1 1369 0
 2894 0074 16B9     		cbnz	r6, .L242
1370:u8glib/chessengine.c ****   else
 2895              		.loc 1 1370 0
 2896 0076 1134     		adds	r4, r4, #17
 2897              	.LVL316:
 2898 0078 E0B2     		uxtb	r0, r4
 2899              	.LVL317:
 2900 007a 01E0     		b	.L243
 2901              	.LVL318:
 2902              	.L242:
1372:u8glib/chessengine.c ****   ce_LoopPawnSideCapture(loop_pos);
 2903              		.loc 1 1372 0
 2904 007c 113C     		subs	r4, r4, #17
 2905              	.LVL319:
 2906 007e E0B2     		uxtb	r0, r4
 2907              	.LVL320:
 2908              	.L243:
1373:u8glib/chessengine.c **** }
 2909              		.loc 1 1373 0
 2910 0080 FFF7FEFF 		bl	ce_LoopPawnSideCapture
 2911              	.LVL321:
 2912 0084 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2913              		.cfi_endproc
 2914              	.LFE35:
 2916              		.section	.text.chess_ClearMarks,"ax",%progbits
 2917              		.align	2
 2918              		.global	chess_ClearMarks
 2919              		.thumb
 2920              		.thumb_func
 2922              	chess_ClearMarks:
 2923              	.LFB42:
1569:u8glib/chessengine.c **** 
1570:u8glib/chessengine.c **** /*==============================================================*/
1571:u8glib/chessengine.c **** /* user interface */
1572:u8glib/chessengine.c **** /*==============================================================*/
1573:u8glib/chessengine.c **** 
1574:u8glib/chessengine.c **** /*
1575:u8glib/chessengine.c **** eval_t chess_EvalCurrBoard(uint8_t color)
1576:u8glib/chessengine.c **** {
1577:u8glib/chessengine.c ****   stack_Init(0);
1578:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color = color;
1579:u8glib/chessengine.c ****   ce_LoopPieces();
1580:u8glib/chessengine.c ****   return stack_GetCurrElement()->best_eval;
1581:u8glib/chessengine.c **** }
1582:u8glib/chessengine.c **** */
1583:u8glib/chessengine.c **** 
1584:u8glib/chessengine.c **** /* clear any marks on the board */
1585:u8glib/chessengine.c **** void chess_ClearMarks(void)
1586:u8glib/chessengine.c **** {
 2924              		.loc 1 1586 0
 2925              		.cfi_startproc
 2926              		@ args = 0, pretend = 0, frame = 0
 2927              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 84


 2928              		@ link register save eliminated.
 2929              	.LVL322:
1587:u8glib/chessengine.c ****   uint8_t i;
1588:u8glib/chessengine.c ****   for( i = 0; i < 64; i++ )
 2930              		.loc 1 1588 0
 2931 0000 0023     		movs	r3, #0
 2932 0002 07E0     		b	.L246
 2933              	.LVL323:
 2934              	.L247:
1589:u8glib/chessengine.c ****      lrc_obj.board[i] &= ~CP_MARK_MASK;
 2935              		.loc 1 1589 0 discriminator 3
 2936 0004 054A     		ldr	r2, .L248
 2937 0006 1A44     		add	r2, r2, r3
 2938 0008 9178     		ldrb	r1, [r2, #2]	@ zero_extendqisi2
 2939 000a 21F02001 		bic	r1, r1, #32
 2940 000e 9170     		strb	r1, [r2, #2]
1588:u8glib/chessengine.c ****      lrc_obj.board[i] &= ~CP_MARK_MASK;
 2941              		.loc 1 1588 0 discriminator 3
 2942 0010 0133     		adds	r3, r3, #1
 2943              	.LVL324:
 2944 0012 DBB2     		uxtb	r3, r3
 2945              	.LVL325:
 2946              	.L246:
1588:u8glib/chessengine.c ****      lrc_obj.board[i] &= ~CP_MARK_MASK;
 2947              		.loc 1 1588 0 is_stmt 0 discriminator 1
 2948 0014 3F2B     		cmp	r3, #63
 2949 0016 F5D9     		bls	.L247
1590:u8glib/chessengine.c **** }
 2950              		.loc 1 1590 0 is_stmt 1
 2951 0018 7047     		bx	lr
 2952              	.L249:
 2953 001a 00BF     		.align	2
 2954              	.L248:
 2955 001c 00000000 		.word	lrc_obj
 2956              		.cfi_endproc
 2957              	.LFE42:
 2959              		.section	.text.chess_MarkMovable,"ax",%progbits
 2960              		.align	2
 2961              		.global	chess_MarkMovable
 2962              		.thumb
 2963              		.thumb_func
 2965              	chess_MarkMovable:
 2966              	.LFB43:
1591:u8glib/chessengine.c **** 
1592:u8glib/chessengine.c **** /*
1593:u8glib/chessengine.c ****   Mark all pieces which can do moves. This is done by setting flags on the global board
1594:u8glib/chessengine.c **** */
1595:u8glib/chessengine.c **** void chess_MarkMovable(void)
1596:u8glib/chessengine.c **** {
 2967              		.loc 1 1596 0
 2968              		.cfi_startproc
 2969              		@ args = 0, pretend = 0, frame = 0
 2970              		@ frame_needed = 0, uses_anonymous_args = 0
 2971 0000 08B5     		push	{r3, lr}
 2972              	.LCFI38:
 2973              		.cfi_def_cfa_offset 8
 2974              		.cfi_offset 3, -8
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 85


 2975              		.cfi_offset 14, -4
1597:u8glib/chessengine.c ****   stack_Init(0);
 2976              		.loc 1 1597 0
 2977 0002 0020     		movs	r0, #0
 2978 0004 FFF7FEFF 		bl	stack_Init
 2979              	.LVL326:
1598:u8glib/chessengine.c ****   //stack_GetCurrElement()->current_color = color;
1599:u8glib/chessengine.c ****   lrc_obj.check_mode = CHECK_MODE_MOVEABLE;
 2980              		.loc 1 1599 0
 2981 0008 0122     		movs	r2, #1
 2982 000a 034B     		ldr	r3, .L252
 2983 000c 83F84A20 		strb	r2, [r3, #74]
1600:u8glib/chessengine.c ****   ce_LoopPieces();
 2984              		.loc 1 1600 0
 2985 0010 FFF7FEFF 		bl	ce_LoopPieces
 2986              	.LVL327:
 2987 0014 08BD     		pop	{r3, pc}
 2988              	.L253:
 2989 0016 00BF     		.align	2
 2990              	.L252:
 2991 0018 00000000 		.word	lrc_obj
 2992              		.cfi_endproc
 2993              	.LFE43:
 2995              		.section	.text.chess_MarkTargetMoves,"ax",%progbits
 2996              		.align	2
 2997              		.global	chess_MarkTargetMoves
 2998              		.thumb
 2999              		.thumb_func
 3001              	chess_MarkTargetMoves:
 3002              	.LFB44:
1601:u8glib/chessengine.c **** }
1602:u8glib/chessengine.c **** 
1603:u8glib/chessengine.c **** /*
1604:u8glib/chessengine.c ****   Checks, if the piece can move from src_pos to dest_pos
1605:u8glib/chessengine.c **** 
1606:u8glib/chessengine.c ****   src_pos: The game position of a piece on the chess board
1607:u8glib/chessengine.c **** */
1608:u8glib/chessengine.c **** void chess_MarkTargetMoves(uint8_t src_pos)
1609:u8glib/chessengine.c **** {
 3003              		.loc 1 1609 0
 3004              		.cfi_startproc
 3005              		@ args = 0, pretend = 0, frame = 0
 3006              		@ frame_needed = 0, uses_anonymous_args = 0
 3007              	.LVL328:
 3008 0000 38B5     		push	{r3, r4, r5, lr}
 3009              	.LCFI39:
 3010              		.cfi_def_cfa_offset 16
 3011              		.cfi_offset 3, -16
 3012              		.cfi_offset 4, -12
 3013              		.cfi_offset 5, -8
 3014              		.cfi_offset 14, -4
 3015 0002 0446     		mov	r4, r0
1610:u8glib/chessengine.c ****   stack_Init(0);
 3016              		.loc 1 1610 0
 3017 0004 0020     		movs	r0, #0
 3018              	.LVL329:
 3019 0006 FFF7FEFF 		bl	stack_Init
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 86


 3020              	.LVL330:
1611:u8glib/chessengine.c ****   stack_GetCurrElement()->current_color = cp_GetColor(cp_GetFromBoard(src_pos));
 3021              		.loc 1 1611 0
 3022 000a FFF7FEFF 		bl	stack_GetCurrElement
 3023              	.LVL331:
 3024 000e 0546     		mov	r5, r0
 3025 0010 2046     		mov	r0, r4
 3026 0012 FFF7FEFF 		bl	cp_GetFromBoard
 3027              	.LVL332:
 3028 0016 FFF7FEFF 		bl	cp_GetColor
 3029              	.LVL333:
 3030 001a A870     		strb	r0, [r5, #2]
1612:u8glib/chessengine.c ****   lrc_obj.check_src_pos = src_pos;
 3031              		.loc 1 1612 0
 3032 001c 044B     		ldr	r3, .L256
 3033 001e 83F84940 		strb	r4, [r3, #73]
1613:u8glib/chessengine.c ****   lrc_obj.check_mode = CHECK_MODE_TARGET_MOVE;  
 3034              		.loc 1 1613 0
 3035 0022 0222     		movs	r2, #2
 3036 0024 83F84A20 		strb	r2, [r3, #74]
1614:u8glib/chessengine.c ****   ce_LoopPieces();
 3037              		.loc 1 1614 0
 3038 0028 FFF7FEFF 		bl	ce_LoopPieces
 3039              	.LVL334:
 3040 002c 38BD     		pop	{r3, r4, r5, pc}
 3041              	.L257:
 3042 002e 00BF     		.align	2
 3043              	.L256:
 3044 0030 00000000 		.word	lrc_obj
 3045              		.cfi_endproc
 3046              	.LFE44:
 3048              		.section	.text.chess_GetNextMarked,"ax",%progbits
 3049              		.align	2
 3050              		.global	chess_GetNextMarked
 3051              		.thumb
 3052              		.thumb_func
 3054              	chess_GetNextMarked:
 3055              	.LFB45:
1615:u8glib/chessengine.c **** }
1616:u8glib/chessengine.c **** 
1617:u8glib/chessengine.c **** /*
1618:u8glib/chessengine.c ****   first call should start with 255
1619:u8glib/chessengine.c ****   this procedure will return 255 if 
1620:u8glib/chessengine.c ****       - there are no marks at all
1621:u8glib/chessengine.c ****       - it has looped over all marks once
1622:u8glib/chessengine.c **** */
1623:u8glib/chessengine.c **** uint8_t chess_GetNextMarked(uint8_t arg, uint8_t is_prev)
1624:u8glib/chessengine.c **** {
 3056              		.loc 1 1624 0
 3057              		.cfi_startproc
 3058              		@ args = 0, pretend = 0, frame = 0
 3059              		@ frame_needed = 0, uses_anonymous_args = 0
 3060              	.LVL335:
 3061 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3062              	.LCFI40:
 3063              		.cfi_def_cfa_offset 24
 3064              		.cfi_offset 3, -24
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 87


 3065              		.cfi_offset 4, -20
 3066              		.cfi_offset 5, -16
 3067              		.cfi_offset 6, -12
 3068              		.cfi_offset 7, -8
 3069              		.cfi_offset 14, -4
 3070 0002 0646     		mov	r6, r0
 3071 0004 0F46     		mov	r7, r1
 3072              	.LVL336:
1625:u8glib/chessengine.c ****   uint8_t i;
1626:u8glib/chessengine.c ****   uint8_t pos = arg;
 3073              		.loc 1 1626 0
 3074 0006 0546     		mov	r5, r0
1627:u8glib/chessengine.c ****   for(i = 0; i < 64; i++)
 3075              		.loc 1 1627 0
 3076 0008 0024     		movs	r4, #0
 3077 000a 14E0     		b	.L259
 3078              	.LVL337:
 3079              	.L264:
1628:u8glib/chessengine.c ****   {
1629:u8glib/chessengine.c ****     if ( is_prev != 0 )
 3080              		.loc 1 1629 0
 3081 000c 27B1     		cbz	r7, .L260
1630:u8glib/chessengine.c ****       pos = cu_PrevPos(pos);
 3082              		.loc 1 1630 0
 3083 000e 2846     		mov	r0, r5
 3084 0010 FFF7FEFF 		bl	cu_PrevPos
 3085              	.LVL338:
 3086 0014 0546     		mov	r5, r0
 3087              	.LVL339:
 3088 0016 03E0     		b	.L261
 3089              	.L260:
1631:u8glib/chessengine.c ****     else
1632:u8glib/chessengine.c ****       pos = cu_NextPos(pos);
 3090              		.loc 1 1632 0
 3091 0018 2846     		mov	r0, r5
 3092 001a FFF7FEFF 		bl	cu_NextPos
 3093              	.LVL340:
 3094 001e 0546     		mov	r5, r0
 3095              	.LVL341:
 3096              	.L261:
1633:u8glib/chessengine.c ****     if ( arg != 255 && pos == 0 )
 3097              		.loc 1 1633 0
 3098 0020 FF2E     		cmp	r6, #255
 3099 0022 00D0     		beq	.L262
 3100              		.loc 1 1633 0 is_stmt 0 discriminator 1
 3101 0024 5DB1     		cbz	r5, .L265
 3102              	.L262:
1634:u8glib/chessengine.c ****       return 255;
1635:u8glib/chessengine.c ****     if ( cp_IsMarked(cp_GetFromBoard(pos)) )
 3103              		.loc 1 1635 0 is_stmt 1
 3104 0026 2846     		mov	r0, r5
 3105 0028 FFF7FEFF 		bl	cp_GetFromBoard
 3106              	.LVL342:
 3107 002c 10F0200F 		tst	r0, #32
 3108 0030 07D1     		bne	.L266
1627:u8glib/chessengine.c ****   {
 3109              		.loc 1 1627 0 discriminator 2
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 88


 3110 0032 0134     		adds	r4, r4, #1
 3111              	.LVL343:
 3112 0034 E4B2     		uxtb	r4, r4
 3113              	.LVL344:
 3114              	.L259:
1627:u8glib/chessengine.c ****   {
 3115              		.loc 1 1627 0 is_stmt 0 discriminator 1
 3116 0036 3F2C     		cmp	r4, #63
 3117 0038 E8D9     		bls	.L264
1636:u8glib/chessengine.c ****       return pos;
1637:u8glib/chessengine.c ****   }
1638:u8glib/chessengine.c ****   return 255;
 3118              		.loc 1 1638 0 is_stmt 1
 3119 003a FF20     		movs	r0, #255
 3120 003c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3121              	.LVL345:
 3122              	.L265:
1634:u8glib/chessengine.c ****     if ( cp_IsMarked(cp_GetFromBoard(pos)) )
 3123              		.loc 1 1634 0
 3124 003e FF20     		movs	r0, #255
 3125 0040 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3126              	.LVL346:
 3127              	.L266:
1636:u8glib/chessengine.c ****       return pos;
 3128              		.loc 1 1636 0
 3129 0042 2846     		mov	r0, r5
1639:u8glib/chessengine.c **** }
 3130              		.loc 1 1639 0
 3131 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3132              		.cfi_endproc
 3133              	.LFE45:
 3135 0046 00BF     		.section	.text.chess_ManualMove,"ax",%progbits
 3136              		.align	2
 3137              		.global	chess_ManualMove
 3138              		.thumb
 3139              		.thumb_func
 3141              	chess_ManualMove:
 3142              	.LFB46:
1640:u8glib/chessengine.c **** 
1641:u8glib/chessengine.c **** 
1642:u8glib/chessengine.c **** /* make a manual move: this is a little bit more than cu_Move() */
1643:u8glib/chessengine.c **** void chess_ManualMove(uint8_t src, uint8_t dest)
1644:u8glib/chessengine.c **** {
 3143              		.loc 1 1644 0
 3144              		.cfi_startproc
 3145              		@ args = 0, pretend = 0, frame = 0
 3146              		@ frame_needed = 0, uses_anonymous_args = 0
 3147              	.LVL347:
 3148 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3149              	.LCFI41:
 3150              		.cfi_def_cfa_offset 24
 3151              		.cfi_offset 3, -24
 3152              		.cfi_offset 4, -20
 3153              		.cfi_offset 5, -16
 3154              		.cfi_offset 6, -12
 3155              		.cfi_offset 7, -8
 3156              		.cfi_offset 14, -4
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 89


 3157 0002 0546     		mov	r5, r0
 3158 0004 0C46     		mov	r4, r1
1645:u8glib/chessengine.c ****   uint8_t cp;
1646:u8glib/chessengine.c ****   
1647:u8glib/chessengine.c ****   /* printf("chess_ManualMove %02x -> %02x\n", src, dest); */
1648:u8glib/chessengine.c ****   
1649:u8glib/chessengine.c ****   /* if all other things fail, this is the place where the game is to be decided: */
1650:u8glib/chessengine.c ****   /* ... if the KING is captured */
1651:u8glib/chessengine.c ****   cp = cp_GetFromBoard(dest);
 3159              		.loc 1 1651 0
 3160 0006 0846     		mov	r0, r1
 3161              	.LVL348:
 3162 0008 FFF7FEFF 		bl	cp_GetFromBoard
 3163              	.LVL349:
 3164 000c 0646     		mov	r6, r0
 3165              	.LVL350:
1652:u8glib/chessengine.c ****   if ( cp_GetPiece(cp) == PIECE_KING )
 3166              		.loc 1 1652 0
 3167 000e FFF7FEFF 		bl	cp_GetPiece
 3168              	.LVL351:
 3169 0012 0628     		cmp	r0, #6
 3170 0014 08D1     		bne	.L269
1653:u8glib/chessengine.c ****   {
1654:u8glib/chessengine.c ****     lrc_obj.is_game_end = 1;
 3171              		.loc 1 1654 0
 3172 0016 284F     		ldr	r7, .L275
 3173 0018 0123     		movs	r3, #1
 3174 001a 87F84730 		strb	r3, [r7, #71]
1655:u8glib/chessengine.c ****     lrc_obj.lost_side_color = cp_GetColor(cp);    
 3175              		.loc 1 1655 0
 3176 001e 3046     		mov	r0, r6
 3177 0020 FFF7FEFF 		bl	cp_GetColor
 3178              	.LVL352:
 3179 0024 87F84800 		strb	r0, [r7, #72]
 3180              	.L269:
1656:u8glib/chessengine.c ****   }
1657:u8glib/chessengine.c **** 
1658:u8glib/chessengine.c ****   /* clear ply history here, to avoid memory overflow */
1659:u8glib/chessengine.c ****   /* may be the last X moves can be kept here */
1660:u8glib/chessengine.c ****   cu_ReduceHistoryByFullMove();
 3181              		.loc 1 1660 0
 3182 0028 FFF7FEFF 		bl	cu_ReduceHistoryByFullMove
 3183              	.LVL353:
1661:u8glib/chessengine.c ****   /* perform the move on the board */
1662:u8glib/chessengine.c ****   cu_Move(src, dest);
 3184              		.loc 1 1662 0
 3185 002c 2146     		mov	r1, r4
 3186 002e 2846     		mov	r0, r5
 3187 0030 FFF7FEFF 		bl	cu_Move
 3188              	.LVL354:
1663:u8glib/chessengine.c ****   
1664:u8glib/chessengine.c ****   /* update en passant double move positions: en passant position is removed after two half moves  
1665:u8glib/chessengine.c ****   lrc_obj.pawn_dbl_move[lrc_obj.ply_count&1]  = ILLEGAL_POSITION;
 3189              		.loc 1 1665 0
 3190 0034 204A     		ldr	r2, .L275
 3191 0036 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3192 0038 03F00101 		and	r1, r3, #1
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 90


 3193 003c 1144     		add	r1, r1, r2
 3194 003e FF20     		movs	r0, #255
 3195 0040 81F84200 		strb	r0, [r1, #66]
1666:u8glib/chessengine.c ****   
1667:u8glib/chessengine.c ****   /* update the global half move counter */
1668:u8glib/chessengine.c ****   lrc_obj.ply_count++;
 3196              		.loc 1 1668 0
 3197 0044 0133     		adds	r3, r3, #1
 3198 0046 1370     		strb	r3, [r2]
1669:u8glib/chessengine.c **** 
1670:u8glib/chessengine.c **** 
1671:u8glib/chessengine.c ****   /* make a small check about the end of the game */
1672:u8glib/chessengine.c ****   /* use at least depth 1, because we must know if the king can still move */
1673:u8glib/chessengine.c ****   /* this is: King moves at level 0 and will be captured at level 1 */
1674:u8glib/chessengine.c ****   /* so we check if the king can move and will not be captured at search level 1 */
1675:u8glib/chessengine.c ****   
1676:u8glib/chessengine.c ****   stack_Init(1);
 3199              		.loc 1 1676 0
 3200 0048 0120     		movs	r0, #1
 3201 004a FFF7FEFF 		bl	stack_Init
 3202              	.LVL355:
1677:u8glib/chessengine.c ****   ce_LoopPieces(); 
 3203              		.loc 1 1677 0
 3204 004e FFF7FEFF 		bl	ce_LoopPieces
 3205              	.LVL356:
1678:u8glib/chessengine.c **** 
1679:u8glib/chessengine.c ****   /* printf("chess_ManualMove/analysis best_from_pos %02x -> best_to_pos %02x\n", stack_GetCurrElem
1680:u8glib/chessengine.c **** 
1681:u8glib/chessengine.c ****   /* analyse the eval result */
1682:u8glib/chessengine.c ****   
1683:u8glib/chessengine.c ****   /* check if the other player has any moves left */
1684:u8glib/chessengine.c ****   if ( stack_GetCurrElement()->best_from_pos == ILLEGAL_POSITION )
 3206              		.loc 1 1684 0
 3207 0052 FFF7FEFF 		bl	stack_GetCurrElement
 3208              	.LVL357:
 3209 0056 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 3210 0058 FF2B     		cmp	r3, #255
 3211 005a 2CD1     		bne	.L268
 3212              	.LVL358:
 3213              	.LBB3:
1685:u8glib/chessengine.c ****   {
1686:u8glib/chessengine.c ****     uint8_t color;
1687:u8glib/chessengine.c ****     /* conditions: */
1688:u8glib/chessengine.c ****     /* 1. no King, should never happen, opposite color has won */
1689:u8glib/chessengine.c ****     /*		this is already checked above at the beginning if this procedure */
1690:u8glib/chessengine.c ****     /* 2. King is under attack, opposite color has won */
1691:u8glib/chessengine.c ****     /* 3. King is not under attack, game is a draw */
1692:u8glib/chessengine.c **** 
1693:u8glib/chessengine.c ****     uint8_t i = 0;
1694:u8glib/chessengine.c ****     color = lrc_obj.ply_count;
 3214              		.loc 1 1694 0
 3215 005c 164B     		ldr	r3, .L275
 3216 005e 1E78     		ldrb	r6, [r3]	@ zero_extendqisi2
 3217              	.LVL359:
1695:u8glib/chessengine.c ****     color &= 1;
 3218              		.loc 1 1695 0
 3219 0060 06F00106 		and	r6, r6, #1
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 91


 3220              	.LVL360:
1693:u8glib/chessengine.c ****     color = lrc_obj.ply_count;
 3221              		.loc 1 1693 0
 3222 0064 0024     		movs	r4, #0
 3223              	.LVL361:
 3224              	.L273:
1696:u8glib/chessengine.c ****     do
1697:u8glib/chessengine.c ****     {
1698:u8glib/chessengine.c ****       cp = cp_GetFromBoard(i);
 3225              		.loc 1 1698 0
 3226 0066 2046     		mov	r0, r4
 3227 0068 FFF7FEFF 		bl	cp_GetFromBoard
 3228              	.LVL362:
 3229 006c 0546     		mov	r5, r0
 3230              	.LVL363:
1699:u8glib/chessengine.c ****       /* look for the King */
1700:u8glib/chessengine.c ****       if ( cp_GetPiece(cp) == PIECE_KING )
 3231              		.loc 1 1700 0
 3232 006e FFF7FEFF 		bl	cp_GetPiece
 3233              	.LVL364:
 3234 0072 0628     		cmp	r0, #6
 3235 0074 19D1     		bne	.L271
1701:u8glib/chessengine.c ****       {
1702:u8glib/chessengine.c **** 	if ( cp_GetColor(cp) == color )
 3236              		.loc 1 1702 0
 3237 0076 2846     		mov	r0, r5
 3238 0078 FFF7FEFF 		bl	cp_GetColor
 3239              	.LVL365:
 3240 007c 8642     		cmp	r6, r0
 3241 007e 14D1     		bne	.L271
1703:u8glib/chessengine.c **** 	{
1704:u8glib/chessengine.c **** 	  /* check if  KING is attacked */
1705:u8glib/chessengine.c **** 	  if ( ce_GetPositionAttackCount(i, color^1) != 0 )
 3242              		.loc 1 1705 0
 3243 0080 86F00101 		eor	r1, r6, #1
 3244 0084 2046     		mov	r0, r4
 3245 0086 FFF7FEFF 		bl	ce_GetPositionAttackCount
 3246              	.LVL366:
 3247 008a 30B1     		cbz	r0, .L272
1706:u8glib/chessengine.c **** 	  {
1707:u8glib/chessengine.c **** 	    /* KING is under attack (check) and can not move: Game is lost */
1708:u8glib/chessengine.c **** 	    lrc_obj.is_game_end = 1;
 3248              		.loc 1 1708 0
 3249 008c 0A4B     		ldr	r3, .L275
 3250 008e 0122     		movs	r2, #1
 3251 0090 83F84720 		strb	r2, [r3, #71]
1709:u8glib/chessengine.c **** 	    lrc_obj.lost_side_color = color; 
 3252              		.loc 1 1709 0
 3253 0094 83F84860 		strb	r6, [r3, #72]
 3254 0098 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3255              	.LVL367:
 3256              	.L272:
1710:u8glib/chessengine.c **** 	  }
1711:u8glib/chessengine.c **** 	  else
1712:u8glib/chessengine.c **** 	  {
1713:u8glib/chessengine.c **** 	    /* KING is NOT under attack (check) but can not move: Game is a draw */
1714:u8glib/chessengine.c **** 	    lrc_obj.is_game_end = 1;
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 92


 3257              		.loc 1 1714 0
 3258 009a 074B     		ldr	r3, .L275
 3259 009c 0122     		movs	r2, #1
 3260 009e 83F84720 		strb	r2, [r3, #71]
1715:u8glib/chessengine.c **** 	    lrc_obj.lost_side_color = 2; 
 3261              		.loc 1 1715 0
 3262 00a2 0222     		movs	r2, #2
 3263 00a4 83F84820 		strb	r2, [r3, #72]
 3264 00a8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3265              	.LVL368:
 3266              	.L271:
1716:u8glib/chessengine.c **** 	  }
1717:u8glib/chessengine.c **** 	  /* break out of the loop */
1718:u8glib/chessengine.c **** 	  break;	  
1719:u8glib/chessengine.c **** 	}
1720:u8glib/chessengine.c ****       }
1721:u8glib/chessengine.c ****       i = cu_NextPos(i);
 3267              		.loc 1 1721 0
 3268 00aa 2046     		mov	r0, r4
 3269 00ac FFF7FEFF 		bl	cu_NextPos
 3270              	.LVL369:
1722:u8glib/chessengine.c ****     } while( i != 0 );
 3271              		.loc 1 1722 0
 3272 00b0 0446     		mov	r4, r0
 3273 00b2 0028     		cmp	r0, #0
 3274 00b4 D7D1     		bne	.L273
 3275              	.LVL370:
 3276              	.L268:
 3277 00b6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3278              	.L276:
 3279              		.align	2
 3280              	.L275:
 3281 00b8 00000000 		.word	lrc_obj
 3282              	.LBE3:
 3283              		.cfi_endproc
 3284              	.LFE46:
 3286              		.section	.text.chess_ComputerMove,"ax",%progbits
 3287              		.align	2
 3288              		.global	chess_ComputerMove
 3289              		.thumb
 3290              		.thumb_func
 3292              	chess_ComputerMove:
 3293              	.LFB47:
1723:u8glib/chessengine.c ****   }
1724:u8glib/chessengine.c **** }
1725:u8glib/chessengine.c **** 
1726:u8glib/chessengine.c **** /* let the computer do a move */
1727:u8glib/chessengine.c **** void chess_ComputerMove(uint8_t depth)
1728:u8glib/chessengine.c **** {
 3294              		.loc 1 1728 0
 3295              		.cfi_startproc
 3296              		@ args = 0, pretend = 0, frame = 0
 3297              		@ frame_needed = 0, uses_anonymous_args = 0
 3298              	.LVL371:
 3299 0000 08B5     		push	{r3, lr}
 3300              	.LCFI42:
 3301              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 93


 3302              		.cfi_offset 3, -8
 3303              		.cfi_offset 14, -4
1729:u8glib/chessengine.c ****   stack_Init(depth);
 3304              		.loc 1 1729 0
 3305 0002 FFF7FEFF 		bl	stack_Init
 3306              	.LVL372:
1730:u8glib/chessengine.c ****   
1731:u8glib/chessengine.c ****   //stack_GetCurrElement()->current_color = lrc_obj.ply_count;
1732:u8glib/chessengine.c ****   //stack_GetCurrElement()->current_color &= 1;
1733:u8glib/chessengine.c ****   
1734:u8glib/chessengine.c ****   cu_ReduceHistoryByFullMove();
 3307              		.loc 1 1734 0
 3308 0006 FFF7FEFF 		bl	cu_ReduceHistoryByFullMove
 3309              	.LVL373:
1735:u8glib/chessengine.c ****   ce_LoopPieces();
 3310              		.loc 1 1735 0
 3311 000a FFF7FEFF 		bl	ce_LoopPieces
 3312              	.LVL374:
1736:u8glib/chessengine.c **** 
1737:u8glib/chessengine.c ****   chess_ManualMove(stack_GetCurrElement()->best_from_pos, stack_GetCurrElement()->best_to_pos);
 3313              		.loc 1 1737 0
 3314 000e FFF7FEFF 		bl	stack_GetCurrElement
 3315              	.LVL375:
 3316 0012 0179     		ldrb	r1, [r0, #4]	@ zero_extendqisi2
 3317 0014 C078     		ldrb	r0, [r0, #3]	@ zero_extendqisi2
 3318 0016 FFF7FEFF 		bl	chess_ManualMove
 3319              	.LVL376:
 3320 001a 08BD     		pop	{r3, pc}
 3321              		.cfi_endproc
 3322              	.LFE47:
 3324              		.section	.text.mnu_DrawHome,"ax",%progbits
 3325              		.align	2
 3326              		.global	mnu_DrawHome
 3327              		.thumb
 3328              		.thumb_func
 3330              	mnu_DrawHome:
 3331              	.LFB48:
1738:u8glib/chessengine.c **** }
1739:u8glib/chessengine.c **** 
1740:u8glib/chessengine.c **** 
1741:u8glib/chessengine.c **** /*==============================================================*/
1742:u8glib/chessengine.c **** /* unix code */
1743:u8glib/chessengine.c **** /*==============================================================*/
1744:u8glib/chessengine.c **** 
1745:u8glib/chessengine.c **** #ifdef UNIX_MAIN
1746:u8glib/chessengine.c **** 
1747:u8glib/chessengine.c **** #include <stdio.h>
1748:u8glib/chessengine.c **** #include <string.h>
1749:u8glib/chessengine.c **** 
1750:u8glib/chessengine.c **** char *piece_str[] = {
1751:u8glib/chessengine.c ****   /* 0x00 */
1752:u8glib/chessengine.c ****   "  ", 
1753:u8glib/chessengine.c ****   "wP", 
1754:u8glib/chessengine.c ****   "wN", 
1755:u8glib/chessengine.c ****   "wB", 
1756:u8glib/chessengine.c ****   
1757:u8glib/chessengine.c ****   /* 0x04 */
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 94


1758:u8glib/chessengine.c ****   "wR", 
1759:u8glib/chessengine.c ****   "wQ", 
1760:u8glib/chessengine.c ****   "wK", 
1761:u8glib/chessengine.c ****   "w?", 
1762:u8glib/chessengine.c **** 
1763:u8glib/chessengine.c ****   /* 0x08 */
1764:u8glib/chessengine.c ****   "w?", 
1765:u8glib/chessengine.c ****   "w?", 
1766:u8glib/chessengine.c ****   "w?", 
1767:u8glib/chessengine.c ****   "w?", 
1768:u8glib/chessengine.c ****   
1769:u8glib/chessengine.c ****   /* 0x0c */
1770:u8glib/chessengine.c ****   "w?", 
1771:u8glib/chessengine.c ****   "w?", 
1772:u8glib/chessengine.c ****   "w?", 
1773:u8glib/chessengine.c ****   "w?", 
1774:u8glib/chessengine.c **** 
1775:u8glib/chessengine.c ****   /* 0x10 */
1776:u8glib/chessengine.c ****   "b ",
1777:u8glib/chessengine.c ****   "bP", 
1778:u8glib/chessengine.c ****   "bN", 
1779:u8glib/chessengine.c ****   "bB", 
1780:u8glib/chessengine.c ****   "bR", 
1781:u8glib/chessengine.c ****   "bQ", 
1782:u8glib/chessengine.c ****   "bK", 
1783:u8glib/chessengine.c ****   "b?", 
1784:u8glib/chessengine.c **** 
1785:u8glib/chessengine.c ****   "b?", 
1786:u8glib/chessengine.c ****   "b?", 
1787:u8glib/chessengine.c ****   "b?", 
1788:u8glib/chessengine.c ****   "b?", 
1789:u8glib/chessengine.c ****   "b?", 
1790:u8glib/chessengine.c ****   "b?", 
1791:u8glib/chessengine.c ****   "b?", 
1792:u8glib/chessengine.c ****   "b?"
1793:u8glib/chessengine.c **** };
1794:u8glib/chessengine.c **** 
1795:u8glib/chessengine.c **** void chess_Thinking(void)
1796:u8glib/chessengine.c **** {
1797:u8glib/chessengine.c ****   uint8_t i;
1798:u8glib/chessengine.c ****   uint8_t cp = cp_GetPiece(stack_GetCurrElement()->current_cp);
1799:u8glib/chessengine.c ****   
1800:u8glib/chessengine.c ****   printf("Thinking:  ", piece_str[cp], stack_GetCurrElement()->current_pos);
1801:u8glib/chessengine.c ****   
1802:u8glib/chessengine.c ****   for( i = 0; i <= lrc_obj.curr_depth; i++ )
1803:u8glib/chessengine.c ****     printf("%s ", piece_str[(lrc_obj.stack_memory+i)->current_cp]);
1804:u8glib/chessengine.c ****   
1805:u8glib/chessengine.c ****   printf("    \r");
1806:u8glib/chessengine.c **** }
1807:u8glib/chessengine.c **** 
1808:u8glib/chessengine.c **** void board_Show(void)
1809:u8glib/chessengine.c **** {
1810:u8glib/chessengine.c ****   uint8_t i, j, cp;
1811:u8glib/chessengine.c ****   char buf[10];
1812:u8glib/chessengine.c ****   for ( i = 0; i < 8; i++ )
1813:u8glib/chessengine.c ****   {
1814:u8glib/chessengine.c ****     printf("%1d ", 7-i);
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 95


1815:u8glib/chessengine.c ****     for ( j = 0; j < 8; j++ )
1816:u8glib/chessengine.c ****     {
1817:u8glib/chessengine.c ****       /* get piece from global board */
1818:u8glib/chessengine.c ****       cp = lrc_obj.board[(7-i)*8+j];
1819:u8glib/chessengine.c ****       strcpy(buf, piece_str[cp&COLOR_PIECE_MASK]);
1820:u8glib/chessengine.c ****       
1821:u8glib/chessengine.c ****       if ( (cp & CP_MARK_MASK) != 0 )
1822:u8glib/chessengine.c ****       {
1823:u8glib/chessengine.c **** 	buf[0] = '#';
1824:u8glib/chessengine.c ****       }
1825:u8glib/chessengine.c ****       
1826:u8glib/chessengine.c ****       /* mask out any bits except color and piece index */
1827:u8glib/chessengine.c ****       cp &= COLOR_PIECE_MASK;
1828:u8glib/chessengine.c ****       printf("%s %02x ", buf, cp);
1829:u8glib/chessengine.c ****       
1830:u8glib/chessengine.c ****     }
1831:u8glib/chessengine.c ****     printf("\n");
1832:u8glib/chessengine.c ****   }
1833:u8glib/chessengine.c **** }
1834:u8glib/chessengine.c **** 
1835:u8glib/chessengine.c **** int main(void)
1836:u8glib/chessengine.c **** {
1837:u8glib/chessengine.c ****   uint8_t depth = 3;
1838:u8glib/chessengine.c ****   chess_SetupBoard();
1839:u8glib/chessengine.c ****   board_Show();
1840:u8glib/chessengine.c ****   puts("");
1841:u8glib/chessengine.c ****     
1842:u8glib/chessengine.c ****  
1843:u8glib/chessengine.c ****  /* 
1844:u8glib/chessengine.c ****   chess_ClearMarks();
1845:u8glib/chessengine.c ****   chess_MarkMovable(COLOR_WHITE);
1846:u8glib/chessengine.c ****   board_Show();
1847:u8glib/chessengine.c ****   */
1848:u8glib/chessengine.c ****   
1849:u8glib/chessengine.c ****   chess_ManualMove(0x006, 0x066);
1850:u8glib/chessengine.c ****   
1851:u8glib/chessengine.c ****   printf("lrc_obj.is_game_end: %d\n" , lrc_obj.is_game_end);
1852:u8glib/chessengine.c ****   printf("lrc_obj.lost_side_color: %d\n" , lrc_obj.lost_side_color);
1853:u8glib/chessengine.c **** 
1854:u8glib/chessengine.c ****   chess_ComputerMove(2);
1855:u8glib/chessengine.c **** 
1856:u8glib/chessengine.c ****   printf("lrc_obj.is_game_end: %d\n" , lrc_obj.is_game_end);
1857:u8glib/chessengine.c ****   printf("lrc_obj.lost_side_color: %d\n" , lrc_obj.lost_side_color);
1858:u8glib/chessengine.c ****   
1859:u8glib/chessengine.c ****   board_Show();
1860:u8glib/chessengine.c **** 
1861:u8glib/chessengine.c **** }
1862:u8glib/chessengine.c **** 
1863:u8glib/chessengine.c **** 
1864:u8glib/chessengine.c **** 
1865:u8glib/chessengine.c **** #else
1866:u8glib/chessengine.c **** 
1867:u8glib/chessengine.c **** /*==============================================================*/
1868:u8glib/chessengine.c **** /* display menu */
1869:u8glib/chessengine.c **** /*==============================================================*/
1870:u8glib/chessengine.c **** 
1871:u8glib/chessengine.c **** //#define MNU_FONT font_5x7
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 96


1872:u8glib/chessengine.c **** #define MNU_FONT u8g_font_5x8r
1873:u8glib/chessengine.c **** //#define MNU_FONT font_6x9
1874:u8glib/chessengine.c **** #define MNU_ENTRY_HEIGHT 9
1875:u8glib/chessengine.c **** 
1876:u8glib/chessengine.c **** char *mnu_title = "Little Rook Chess";
1877:u8glib/chessengine.c **** char *mnu_list[] = { "New Game (White)", "New Game (Black)", "Undo Move", "Return" };
1878:u8glib/chessengine.c **** uint8_t mnu_pos = 0;
1879:u8glib/chessengine.c **** uint8_t mnu_max = 4;
1880:u8glib/chessengine.c **** 
1881:u8glib/chessengine.c **** void mnu_DrawHome(uint8_t is_highlight)
1882:u8glib/chessengine.c **** {
 3332              		.loc 1 1882 0
 3333              		.cfi_startproc
 3334              		@ args = 0, pretend = 0, frame = 0
 3335              		@ frame_needed = 0, uses_anonymous_args = 0
 3336              	.LVL377:
 3337 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3338              	.LCFI43:
 3339              		.cfi_def_cfa_offset 24
 3340              		.cfi_offset 4, -24
 3341              		.cfi_offset 5, -20
 3342              		.cfi_offset 6, -16
 3343              		.cfi_offset 7, -12
 3344              		.cfi_offset 8, -8
 3345              		.cfi_offset 14, -4
 3346 0004 82B0     		sub	sp, sp, #8
 3347              	.LCFI44:
 3348              		.cfi_def_cfa_offset 32
 3349 0006 8046     		mov	r8, r0
1883:u8glib/chessengine.c ****   uint8_t x = lrc_u8g->width - 35;  
 3350              		.loc 1 1883 0
 3351 0008 134C     		ldr	r4, .L282
 3352 000a 2068     		ldr	r0, [r4]
 3353              	.LVL378:
 3354 000c 0678     		ldrb	r6, [r0]	@ zero_extendqisi2
 3355 000e A6F12305 		sub	r5, r6, #35
 3356 0012 EDB2     		uxtb	r5, r5
 3357              	.LVL379:
1884:u8glib/chessengine.c ****   uint8_t y = (lrc_u8g->height-1);
 3358              		.loc 1 1884 0
 3359 0014 4778     		ldrb	r7, [r0, #1]	@ zero_extendqisi2
 3360              	.LVL380:
1885:u8glib/chessengine.c ****   uint8_t t;
1886:u8glib/chessengine.c ****   
1887:u8glib/chessengine.c ****   u8g_SetFont(lrc_u8g, u8g_font_5x7r);
 3361              		.loc 1 1887 0
 3362 0016 1149     		ldr	r1, .L282+4
 3363 0018 FFF7FEFF 		bl	u8g_SetFont
 3364              	.LVL381:
1888:u8glib/chessengine.c ****   u8g_SetDefaultForegroundColor(lrc_u8g);
 3365              		.loc 1 1888 0
 3366 001c 2068     		ldr	r0, [r4]
 3367 001e FFF7FEFF 		bl	u8g_SetDefaultForegroundColor
 3368              	.LVL382:
1889:u8glib/chessengine.c ****   t = u8g_DrawStrP(lrc_u8g, x, y -1, U8G_PSTR("Options"));
 3369              		.loc 1 1889 0
 3370 0022 BA1E     		subs	r2, r7, #2
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 97


 3371 0024 0E4B     		ldr	r3, .L282+8
 3372 0026 D2B2     		uxtb	r2, r2
 3373 0028 2946     		mov	r1, r5
 3374 002a 2068     		ldr	r0, [r4]
 3375 002c FFF7FEFF 		bl	u8g_DrawStrP
 3376              	.LVL383:
1890:u8glib/chessengine.c ****     
1891:u8glib/chessengine.c ****   if ( is_highlight )
 3377              		.loc 1 1891 0
 3378 0030 B8F1000F 		cmp	r8, #0
 3379 0034 0CD0     		beq	.L279
1892:u8glib/chessengine.c ****     u8g_DrawFrame(lrc_u8g, x-1, y - MNU_ENTRY_HEIGHT +1, t, MNU_ENTRY_HEIGHT);  
 3380              		.loc 1 1892 0
 3381 0036 A7F10902 		sub	r2, r7, #9
 3382 003a A6F12401 		sub	r1, r6, #36
 3383 003e 2468     		ldr	r4, [r4]
 3384 0040 0923     		movs	r3, #9
 3385 0042 0093     		str	r3, [sp]
 3386 0044 0346     		mov	r3, r0
 3387 0046 D2B2     		uxtb	r2, r2
 3388 0048 C9B2     		uxtb	r1, r1
 3389 004a 2046     		mov	r0, r4
 3390              	.LVL384:
 3391 004c FFF7FEFF 		bl	u8g_DrawFrame
 3392              	.LVL385:
 3393              	.L279:
1893:u8glib/chessengine.c **** }
 3394              		.loc 1 1893 0
 3395 0050 02B0     		add	sp, sp, #8
 3396              	.LCFI45:
 3397              		.cfi_def_cfa_offset 24
 3398              		@ sp needed
 3399 0052 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3400              	.LVL386:
 3401              	.L283:
 3402 0056 00BF     		.align	2
 3403              	.L282:
 3404 0058 00000000 		.word	lrc_u8g
 3405 005c 00000000 		.word	u8g_font_5x7r
 3406 0060 00000000 		.word	.LC0
 3407              		.cfi_endproc
 3408              	.LFE48:
 3410              		.section	.text.mnu_DrawEntry,"ax",%progbits
 3411              		.align	2
 3412              		.global	mnu_DrawEntry
 3413              		.thumb
 3414              		.thumb_func
 3416              	mnu_DrawEntry:
 3417              	.LFB49:
1894:u8glib/chessengine.c **** 
1895:u8glib/chessengine.c **** void mnu_DrawEntry(uint8_t y, char *str, uint8_t is_clr_background, uint8_t is_highlight)
1896:u8glib/chessengine.c **** {
 3418              		.loc 1 1896 0
 3419              		.cfi_startproc
 3420              		@ args = 0, pretend = 0, frame = 0
 3421              		@ frame_needed = 0, uses_anonymous_args = 0
 3422              	.LVL387:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 98


 3423 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3424              	.LCFI46:
 3425              		.cfi_def_cfa_offset 28
 3426              		.cfi_offset 4, -28
 3427              		.cfi_offset 5, -24
 3428              		.cfi_offset 6, -20
 3429              		.cfi_offset 7, -16
 3430              		.cfi_offset 8, -12
 3431              		.cfi_offset 9, -8
 3432              		.cfi_offset 14, -4
 3433 0004 83B0     		sub	sp, sp, #12
 3434              	.LCFI47:
 3435              		.cfi_def_cfa_offset 40
 3436 0006 0746     		mov	r7, r0
 3437 0008 0D46     		mov	r5, r1
 3438 000a 9146     		mov	r9, r2
 3439 000c 9846     		mov	r8, r3
1897:u8glib/chessengine.c ****   uint8_t t, x;
1898:u8glib/chessengine.c ****   u8g_SetFont(lrc_u8g, MNU_FONT);
 3440              		.loc 1 1898 0
 3441 000e 234C     		ldr	r4, .L288
 3442 0010 2349     		ldr	r1, .L288+4
 3443              	.LVL388:
 3444 0012 2068     		ldr	r0, [r4]
 3445              	.LVL389:
 3446 0014 FFF7FEFF 		bl	u8g_SetFont
 3447              	.LVL390:
1899:u8glib/chessengine.c ****   t = u8g_GetStrWidth(lrc_u8g, str);
 3448              		.loc 1 1899 0
 3449 0018 2946     		mov	r1, r5
 3450 001a 2068     		ldr	r0, [r4]
 3451 001c FFF7FEFF 		bl	u8g_GetStrWidth
 3452              	.LVL391:
 3453 0020 0646     		mov	r6, r0
 3454              	.LVL392:
1900:u8glib/chessengine.c ****   x = u8g_GetWidth(lrc_u8g);
 3455              		.loc 1 1900 0
 3456 0022 2068     		ldr	r0, [r4]
 3457 0024 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
 3458              	.LVL393:
1901:u8glib/chessengine.c ****   x -= t;
 3459              		.loc 1 1901 0
 3460 0026 A41B     		subs	r4, r4, r6
 3461              	.LVL394:
1902:u8glib/chessengine.c ****   x >>= 1;
 3462              		.loc 1 1902 0
 3463 0028 C4F34604 		ubfx	r4, r4, #1, #7
 3464              	.LVL395:
1903:u8glib/chessengine.c ****   
1904:u8glib/chessengine.c ****   if ( is_clr_background )
 3465              		.loc 1 1904 0
 3466 002c B9F1000F 		cmp	r9, #0
 3467 0030 11D0     		beq	.L285
1905:u8glib/chessengine.c ****   {
1906:u8glib/chessengine.c ****     u8g_SetDefaultBackgroundColor(lrc_u8g);
 3468              		.loc 1 1906 0
 3469 0032 FFF7FEFF 		bl	u8g_SetDefaultBackgroundColor
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 99


 3470              	.LVL396:
1907:u8glib/chessengine.c ****     u8g_DrawBox(lrc_u8g, x-3, (lrc_u8g->height-1) - (y+MNU_ENTRY_HEIGHT-1+2), t+5, MNU_ENTRY_HEIGHT
 3471              		.loc 1 1907 0
 3472 0036 194B     		ldr	r3, .L288
 3473 0038 1868     		ldr	r0, [r3]
 3474 003a 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 3475 003c 731D     		adds	r3, r6, #5
 3476 003e D21B     		subs	r2, r2, r7
 3477 0040 0B3A     		subs	r2, r2, #11
 3478 0042 E11E     		subs	r1, r4, #3
 3479 0044 4FF00D0E 		mov	lr, #13
 3480 0048 CDF800E0 		str	lr, [sp]
 3481 004c DBB2     		uxtb	r3, r3
 3482 004e D2B2     		uxtb	r2, r2
 3483 0050 C9B2     		uxtb	r1, r1
 3484 0052 FFF7FEFF 		bl	u8g_DrawBox
 3485              	.LVL397:
 3486              	.L285:
1908:u8glib/chessengine.c ****   }
1909:u8glib/chessengine.c ****   
1910:u8glib/chessengine.c ****   u8g_SetDefaultForegroundColor(lrc_u8g);
 3487              		.loc 1 1910 0
 3488 0056 DFF84490 		ldr	r9, .L288
 3489 005a D9F80000 		ldr	r0, [r9]
 3490 005e FFF7FEFF 		bl	u8g_SetDefaultForegroundColor
 3491              	.LVL398:
1911:u8glib/chessengine.c ****   u8g_DrawStr(lrc_u8g, x, (lrc_u8g->height-1) - y, str);
 3492              		.loc 1 1911 0
 3493 0062 D9F80000 		ldr	r0, [r9]
 3494 0066 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 3495 0068 D21B     		subs	r2, r2, r7
 3496 006a 013A     		subs	r2, r2, #1
 3497 006c 2B46     		mov	r3, r5
 3498 006e D2B2     		uxtb	r2, r2
 3499 0070 2146     		mov	r1, r4
 3500 0072 FFF7FEFF 		bl	u8g_DrawStr
 3501              	.LVL399:
1912:u8glib/chessengine.c ****   
1913:u8glib/chessengine.c ****   if ( is_highlight )
 3502              		.loc 1 1913 0
 3503 0076 B8F1000F 		cmp	r8, #0
 3504 007a 0CD0     		beq	.L284
1914:u8glib/chessengine.c ****   {
1915:u8glib/chessengine.c ****     u8g_DrawFrame(lrc_u8g, x-1, (lrc_u8g->height-1) - y -MNU_ENTRY_HEIGHT +1, t, MNU_ENTRY_HEIGHT);
 3505              		.loc 1 1915 0
 3506 007c D9F80000 		ldr	r0, [r9]
 3507 0080 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 3508 0082 D21B     		subs	r2, r2, r7
 3509 0084 093A     		subs	r2, r2, #9
 3510 0086 611E     		subs	r1, r4, #1
 3511 0088 0923     		movs	r3, #9
 3512 008a 0093     		str	r3, [sp]
 3513 008c 3346     		mov	r3, r6
 3514 008e D2B2     		uxtb	r2, r2
 3515 0090 C9B2     		uxtb	r1, r1
 3516 0092 FFF7FEFF 		bl	u8g_DrawFrame
 3517              	.LVL400:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 100


 3518              	.L284:
1916:u8glib/chessengine.c ****   }
1917:u8glib/chessengine.c **** }
 3519              		.loc 1 1917 0
 3520 0096 03B0     		add	sp, sp, #12
 3521              	.LCFI48:
 3522              		.cfi_def_cfa_offset 28
 3523              		@ sp needed
 3524 0098 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3525              	.LVL401:
 3526              	.L289:
 3527              		.align	2
 3528              	.L288:
 3529 009c 00000000 		.word	lrc_u8g
 3530 00a0 00000000 		.word	u8g_font_5x8r
 3531              		.cfi_endproc
 3532              	.LFE49:
 3534              		.section	.text.mnu_Draw,"ax",%progbits
 3535              		.align	2
 3536              		.global	mnu_Draw
 3537              		.thumb
 3538              		.thumb_func
 3540              	mnu_Draw:
 3541              	.LFB50:
1918:u8glib/chessengine.c **** 
1919:u8glib/chessengine.c **** void mnu_Draw(void)
1920:u8glib/chessengine.c **** {
 3542              		.loc 1 1920 0
 3543              		.cfi_startproc
 3544              		@ args = 0, pretend = 0, frame = 0
 3545              		@ frame_needed = 0, uses_anonymous_args = 0
 3546 0000 38B5     		push	{r3, r4, r5, lr}
 3547              	.LCFI49:
 3548              		.cfi_def_cfa_offset 16
 3549              		.cfi_offset 3, -16
 3550              		.cfi_offset 4, -12
 3551              		.cfi_offset 5, -8
 3552              		.cfi_offset 14, -4
1921:u8glib/chessengine.c ****   uint8_t i;
1922:u8glib/chessengine.c ****   uint8_t t,y;
1923:u8glib/chessengine.c ****   /* calculate hight of the complete menu */
1924:u8glib/chessengine.c ****   y = mnu_max;
 3553              		.loc 1 1924 0
 3554 0002 194B     		ldr	r3, .L294
 3555 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3556              	.LVL402:
1925:u8glib/chessengine.c ****   y++; 					/* consider also some space for the title */
1926:u8glib/chessengine.c ****   y++; 					/* consider also some space for the title */
 3557              		.loc 1 1926 0
 3558 0006 0233     		adds	r3, r3, #2
 3559              	.LVL403:
 3560 0008 DBB2     		uxtb	r3, r3
 3561              	.LVL404:
1927:u8glib/chessengine.c ****   y *= MNU_ENTRY_HEIGHT;
 3562              		.loc 1 1927 0
 3563 000a 03EBC305 		add	r5, r3, r3, lsl #3
 3564 000e EDB2     		uxtb	r5, r5
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 101


 3565              	.LVL405:
1928:u8glib/chessengine.c ****   
1929:u8glib/chessengine.c ****   /* calculate how much space will be left */
1930:u8glib/chessengine.c ****   t = u8g_GetHeight(lrc_u8g);			
 3566              		.loc 1 1930 0
 3567 0010 164B     		ldr	r3, .L294+4
 3568 0012 1B68     		ldr	r3, [r3]
 3569 0014 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3570              	.LVL406:
1931:u8glib/chessengine.c ****   t -= y;
 3571              		.loc 1 1931 0
 3572 0016 5D1B     		subs	r5, r3, r5
 3573              	.LVL407:
1932:u8glib/chessengine.c ****   
1933:u8glib/chessengine.c ****   /* topmost pos start half of that empty space from the top */
1934:u8glib/chessengine.c ****   t >>= 1;
 3574              		.loc 1 1934 0
 3575 0018 C5F34605 		ubfx	r5, r5, #1, #7
 3576              	.LVL408:
1935:u8glib/chessengine.c ****   y = u8g_GetHeight(lrc_u8g);
1936:u8glib/chessengine.c ****   y -= t;
 3577              		.loc 1 1936 0
 3578 001c 5D1B     		subs	r5, r3, r5
 3579              	.LVL409:
 3580 001e EDB2     		uxtb	r5, r5
 3581              	.LVL410:
1937:u8glib/chessengine.c ****   
1938:u8glib/chessengine.c ****   y -= MNU_ENTRY_HEIGHT;
 3582              		.loc 1 1938 0
 3583 0020 A5F10900 		sub	r0, r5, #9
 3584              	.LVL411:
1939:u8glib/chessengine.c ****   mnu_DrawEntry(y, mnu_title, 0, 0);
 3585              		.loc 1 1939 0
 3586 0024 0023     		movs	r3, #0
 3587              	.LVL412:
 3588 0026 1A46     		mov	r2, r3
 3589 0028 1149     		ldr	r1, .L294+8
 3590 002a 0968     		ldr	r1, [r1]
 3591 002c C0B2     		uxtb	r0, r0
 3592 002e FFF7FEFF 		bl	mnu_DrawEntry
 3593              	.LVL413:
1940:u8glib/chessengine.c ****   
1941:u8glib/chessengine.c ****   y -= MNU_ENTRY_HEIGHT;
 3594              		.loc 1 1941 0
 3595 0032 123D     		subs	r5, r5, #18
 3596              	.LVL414:
 3597 0034 EDB2     		uxtb	r5, r5
 3598              	.LVL415:
1942:u8glib/chessengine.c ****   
1943:u8glib/chessengine.c ****   
1944:u8glib/chessengine.c ****   for( i = 0; i < mnu_max; i++ )
 3599              		.loc 1 1944 0
 3600 0036 0024     		movs	r4, #0
 3601 0038 10E0     		b	.L291
 3602              	.LVL416:
 3603              	.L292:
1945:u8glib/chessengine.c ****   {
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 102


1946:u8glib/chessengine.c ****     y -= MNU_ENTRY_HEIGHT;
 3604              		.loc 1 1946 0 discriminator 3
 3605 003a 093D     		subs	r5, r5, #9
 3606              	.LVL417:
 3607 003c EDB2     		uxtb	r5, r5
 3608              	.LVL418:
1947:u8glib/chessengine.c ****     mnu_DrawEntry(y, mnu_list[i], 0, i == mnu_pos);
 3609              		.loc 1 1947 0 discriminator 3
 3610 003e 0D4B     		ldr	r3, .L294+12
 3611 0040 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3612 0042 A342     		cmp	r3, r4
 3613 0044 14BF     		ite	ne
 3614 0046 0023     		movne	r3, #0
 3615 0048 0123     		moveq	r3, #1
 3616 004a 0022     		movs	r2, #0
 3617 004c 0A49     		ldr	r1, .L294+16
 3618 004e 51F82410 		ldr	r1, [r1, r4, lsl #2]
 3619 0052 2846     		mov	r0, r5
 3620 0054 FFF7FEFF 		bl	mnu_DrawEntry
 3621              	.LVL419:
1944:u8glib/chessengine.c ****   {
 3622              		.loc 1 1944 0 discriminator 3
 3623 0058 0134     		adds	r4, r4, #1
 3624              	.LVL420:
 3625 005a E4B2     		uxtb	r4, r4
 3626              	.LVL421:
 3627              	.L291:
1944:u8glib/chessengine.c ****   {
 3628              		.loc 1 1944 0 is_stmt 0 discriminator 1
 3629 005c 024B     		ldr	r3, .L294
 3630 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3631 0060 9C42     		cmp	r4, r3
 3632 0062 EAD3     		bcc	.L292
1948:u8glib/chessengine.c ****   }
1949:u8glib/chessengine.c **** }
 3633              		.loc 1 1949 0 is_stmt 1
 3634 0064 38BD     		pop	{r3, r4, r5, pc}
 3635              	.LVL422:
 3636              	.L295:
 3637 0066 00BF     		.align	2
 3638              	.L294:
 3639 0068 00000000 		.word	.LANCHOR8
 3640 006c 00000000 		.word	lrc_u8g
 3641 0070 00000000 		.word	.LANCHOR9
 3642 0074 00000000 		.word	.LANCHOR10
 3643 0078 00000000 		.word	.LANCHOR11
 3644              		.cfi_endproc
 3645              	.LFE50:
 3647              		.section	.text.mnu_Step,"ax",%progbits
 3648              		.align	2
 3649              		.global	mnu_Step
 3650              		.thumb
 3651              		.thumb_func
 3653              	mnu_Step:
 3654              	.LFB51:
1950:u8glib/chessengine.c **** 
1951:u8glib/chessengine.c **** void mnu_Step(uint8_t key_cmd)
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 103


1952:u8glib/chessengine.c **** {
 3655              		.loc 1 1952 0
 3656              		.cfi_startproc
 3657              		@ args = 0, pretend = 0, frame = 0
 3658              		@ frame_needed = 0, uses_anonymous_args = 0
 3659              		@ link register save eliminated.
 3660              	.LVL423:
1953:u8glib/chessengine.c ****     if ( key_cmd == CHESS_KEY_NEXT )
 3661              		.loc 1 1953 0
 3662 0000 0128     		cmp	r0, #1
 3663 0002 09D1     		bne	.L297
1954:u8glib/chessengine.c ****     {
1955:u8glib/chessengine.c ****       if ( mnu_pos+1 < mnu_max )
 3664              		.loc 1 1955 0
 3665 0004 094B     		ldr	r3, .L299
 3666 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3667 0008 591C     		adds	r1, r3, #1
 3668 000a 094A     		ldr	r2, .L299+4
 3669 000c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3670 000e 9142     		cmp	r1, r2
 3671 0010 0ADA     		bge	.L296
1956:u8glib/chessengine.c **** 	mnu_pos++;
 3672              		.loc 1 1956 0
 3673 0012 064A     		ldr	r2, .L299
 3674 0014 1170     		strb	r1, [r2]
 3675 0016 7047     		bx	lr
 3676              	.L297:
1957:u8glib/chessengine.c ****     }
1958:u8glib/chessengine.c ****     else if ( key_cmd == CHESS_KEY_PREV )
 3677              		.loc 1 1958 0
 3678 0018 0228     		cmp	r0, #2
 3679 001a 05D1     		bne	.L296
1959:u8glib/chessengine.c ****     {
1960:u8glib/chessengine.c ****       if ( mnu_pos > 0 )
 3680              		.loc 1 1960 0
 3681 001c 034B     		ldr	r3, .L299
 3682 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3683 0020 13B1     		cbz	r3, .L296
1961:u8glib/chessengine.c **** 	mnu_pos--;
 3684              		.loc 1 1961 0
 3685 0022 013B     		subs	r3, r3, #1
 3686 0024 014A     		ldr	r2, .L299
 3687 0026 1370     		strb	r3, [r2]
 3688              	.L296:
 3689 0028 7047     		bx	lr
 3690              	.L300:
 3691 002a 00BF     		.align	2
 3692              	.L299:
 3693 002c 00000000 		.word	.LANCHOR10
 3694 0030 00000000 		.word	.LANCHOR8
 3695              		.cfi_endproc
 3696              	.LFE51:
 3698              		.section	.text.chess_DrawFrame,"ax",%progbits
 3699              		.align	2
 3700              		.global	chess_DrawFrame
 3701              		.thumb
 3702              		.thumb_func
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 104


 3704              	chess_DrawFrame:
 3705              	.LFB52:
1962:u8glib/chessengine.c ****     }
1963:u8glib/chessengine.c **** }
1964:u8glib/chessengine.c **** 
1965:u8glib/chessengine.c **** 
1966:u8glib/chessengine.c **** 
1967:u8glib/chessengine.c **** 
1968:u8glib/chessengine.c **** uint8_t chess_key_code = 0;
1969:u8glib/chessengine.c **** uint8_t chess_key_cmd = 0;
1970:u8glib/chessengine.c **** #define CHESS_STATE_MENU 0
1971:u8glib/chessengine.c **** #define CHESS_STATE_SELECT_START 1
1972:u8glib/chessengine.c **** #define CHESS_STATE_SELECT_PIECE 2
1973:u8glib/chessengine.c **** #define CHESS_STATE_SELECT_TARGET_POS 3
1974:u8glib/chessengine.c **** #define CHESS_STATE_THINKING 4
1975:u8glib/chessengine.c **** #define CHESS_STATE_GAME_END 5
1976:u8glib/chessengine.c **** uint8_t chess_state = CHESS_STATE_MENU;
1977:u8glib/chessengine.c **** uint8_t chess_source_pos = 255;
1978:u8glib/chessengine.c **** uint8_t chess_target_pos = 255;
1979:u8glib/chessengine.c **** 
1980:u8glib/chessengine.c **** const uint8_t chess_pieces_body_bm[] PROGMEM = 
1981:u8glib/chessengine.c **** {
1982:u8glib/chessengine.c ****   /* PAWN */ 		0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, /* 0x00, 0x00, 0x00, 0x0c, 0x0c, 0x0
1983:u8glib/chessengine.c ****   /* KNIGHT */		0x00, 0x00, 0x1c, 0x2c, 0x04, 0x04, 0x0e, 0x00,
1984:u8glib/chessengine.c ****   /* BISHOP */		0x00, 0x00, 0x1c, 0x1c, 0x1c, 0x08, 0x00, 0x00, /* 0x00, 0x00, 0x08, 0x1c, 0x1c, 0x
1985:u8glib/chessengine.c ****   /* ROOK */		0x00, 0x00, 0x00, 0x1c, 0x1c, 0x1c, 0x1c, 0x00,
1986:u8glib/chessengine.c ****   /* QUEEN */		0x00, 0x00, 0x14, 0x1c, 0x08, 0x1c, 0x08, 0x00,
1987:u8glib/chessengine.c ****   /* KING */		0x00, 0x00, 0x00, 0x08, 0x3e, 0x1c, 0x08, 0x00,
1988:u8glib/chessengine.c **** };
1989:u8glib/chessengine.c **** 
1990:u8glib/chessengine.c **** #ifdef NOT_REQUIRED
1991:u8glib/chessengine.c **** /* white pieces are constructed by painting black pieces and cutting out the white area */
1992:u8glib/chessengine.c **** const uint8_t chess_white_pieces_bm[] PROGMEM = 
1993:u8glib/chessengine.c **** {
1994:u8glib/chessengine.c ****   /* PAWN */ 		0x00, 0x00, 0x0c, 0x12, 0x12, 0x0c, 0x1e, 0x00, 
1995:u8glib/chessengine.c ****   /* KNIGHT */		0x00, 0x1c, 0x22, 0x52, 0x6a, 0x0a, 0x11, 0x1f,
1996:u8glib/chessengine.c ****   /* BISHOP */		0x00, 0x08, 0x14, 0x22, 0x22, 0x14, 0x08, 0x7f,
1997:u8glib/chessengine.c ****   /* ROOK */		0x00, 0x55, 0x7f, 0x22, 0x22, 0x22, 0x22, 0x7f,
1998:u8glib/chessengine.c ****   /* QUEEN */		0x00, 0x55, 0x2a, 0x22, 0x14, 0x22, 0x14, 0x7f,
1999:u8glib/chessengine.c ****   /* KING */		0x08, 0x1c, 0x49, 0x77, 0x41, 0x22, 0x14, 0x7f,
2000:u8glib/chessengine.c **** };
2001:u8glib/chessengine.c **** #endif
2002:u8glib/chessengine.c **** 
2003:u8glib/chessengine.c **** const uint8_t chess_black_pieces_bm[] PROGMEM = 
2004:u8glib/chessengine.c **** {
2005:u8glib/chessengine.c ****   /* PAWN */ 		0x00, 0x00, 0x18, 0x3c, 0x3c, 0x18, 0x3c, 0x00, /* 0x00, 0x00, 0x0c, 0x1e, 0x1e, 0x0
2006:u8glib/chessengine.c ****   /* KNIGHT */		0x00, 0x1c, 0x3e, 0x7e, 0x6e, 0x0e, 0x1f, 0x1f,
2007:u8glib/chessengine.c ****   /* BISHOP */		0x00, 0x1c, 0x2e, 0x3e, 0x3e, 0x1c, 0x08, 0x7f,  /*0x00, 0x08, 0x1c, 0x3e, 0x3e, 0x
2008:u8glib/chessengine.c ****   /* ROOK */		0x00, 0x55, 0x7f, 0x3e, 0x3e, 0x3e, 0x3e, 0x7f,
2009:u8glib/chessengine.c ****   /* QUEEN */		0x00, 0x55, 0x3e, 0x3e, 0x1c, 0x3e, 0x1c, 0x7f,
2010:u8glib/chessengine.c ****   /* KING -*/		0x08, 0x1c, 0x49, 0x7f, 0x7f, 0x3e, 0x1c, 0x7f,
2011:u8glib/chessengine.c **** };
2012:u8glib/chessengine.c **** 
2013:u8glib/chessengine.c **** 
2014:u8glib/chessengine.c **** #if defined(DOGXL160_HW_GR)
2015:u8glib/chessengine.c **** #define BOXSIZE 13
2016:u8glib/chessengine.c **** #define BOXOFFSET 3
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 105


2017:u8glib/chessengine.c **** #else
2018:u8glib/chessengine.c **** #define BOXSIZE 8
2019:u8glib/chessengine.c **** #define BOXOFFSET 1
2020:u8glib/chessengine.c **** #endif
2021:u8glib/chessengine.c **** 
2022:u8glib/chessengine.c **** u8g_uint_t chess_low_edge;
2023:u8glib/chessengine.c **** uint8_t chess_boxsize = 8;
2024:u8glib/chessengine.c **** uint8_t chess_boxoffset = 1;
2025:u8glib/chessengine.c **** 
2026:u8glib/chessengine.c **** 
2027:u8glib/chessengine.c **** void chess_DrawFrame(uint8_t pos, uint8_t is_bold)
2028:u8glib/chessengine.c **** {
 3706              		.loc 1 2028 0
 3707              		.cfi_startproc
 3708              		@ args = 0, pretend = 0, frame = 0
 3709              		@ frame_needed = 0, uses_anonymous_args = 0
 3710              	.LVL424:
 3711 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3712              	.LCFI50:
 3713              		.cfi_def_cfa_offset 24
 3714              		.cfi_offset 4, -24
 3715              		.cfi_offset 5, -20
 3716              		.cfi_offset 6, -16
 3717              		.cfi_offset 7, -12
 3718              		.cfi_offset 8, -8
 3719              		.cfi_offset 14, -4
 3720 0004 82B0     		sub	sp, sp, #8
 3721              	.LCFI51:
 3722              		.cfi_def_cfa_offset 32
 3723 0006 0C46     		mov	r4, r1
 3724              	.LVL425:
2029:u8glib/chessengine.c ****   u8g_uint_t x0, y0;
2030:u8glib/chessengine.c **** 
2031:u8glib/chessengine.c ****   x0 = pos;
2032:u8glib/chessengine.c ****   x0 &= 15;
 3725              		.loc 1 2032 0
 3726 0008 00F00F05 		and	r5, r0, #15
 3727              	.LVL426:
2033:u8glib/chessengine.c ****   if ( lrc_obj.orientation != COLOR_WHITE )
 3728              		.loc 1 2033 0
 3729 000c 1D4B     		ldr	r3, .L306
 3730 000e 93F84530 		ldrb	r3, [r3, #69]	@ zero_extendqisi2
 3731 0012 0BB1     		cbz	r3, .L302
2034:u8glib/chessengine.c ****     x0 ^= 7;
 3732              		.loc 1 2034 0
 3733 0014 85F00705 		eor	r5, r5, #7
 3734              	.LVL427:
 3735              	.L302:
2035:u8glib/chessengine.c **** 
2036:u8glib/chessengine.c ****   y0 = pos;
2037:u8glib/chessengine.c ****   y0>>= 4;
 3736              		.loc 1 2037 0
 3737 0018 0009     		lsrs	r0, r0, #4
 3738              	.LVL428:
2038:u8glib/chessengine.c ****   if ( lrc_obj.orientation != COLOR_WHITE )
 3739              		.loc 1 2038 0
 3740 001a 0BB1     		cbz	r3, .L303
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 106


2039:u8glib/chessengine.c ****     y0 ^= 7;
 3741              		.loc 1 2039 0
 3742 001c 80F00700 		eor	r0, r0, #7
 3743              	.LVL429:
 3744              	.L303:
2040:u8glib/chessengine.c ****   
2041:u8glib/chessengine.c ****   x0 *= chess_boxsize;
 3745              		.loc 1 2041 0
 3746 0020 DFF86C80 		ldr	r8, .L306+12
 3747 0024 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 3748 0028 15FB03F5 		smulbb	r5, r5, r3
 3749              	.LVL430:
 3750 002c EDB2     		uxtb	r5, r5
 3751              	.LVL431:
2042:u8glib/chessengine.c ****   y0 *= chess_boxsize;
 3752              		.loc 1 2042 0
 3753 002e 10FB03F0 		smulbb	r0, r0, r3
 3754              	.LVL432:
 3755 0032 C6B2     		uxtb	r6, r0
 3756              	.LVL433:
2043:u8glib/chessengine.c ****   
2044:u8glib/chessengine.c ****   u8g_SetDefaultForegroundColor(lrc_u8g);
 3757              		.loc 1 2044 0
 3758 0034 144F     		ldr	r7, .L306+4
 3759 0036 3868     		ldr	r0, [r7]
 3760 0038 FFF7FEFF 		bl	u8g_SetDefaultForegroundColor
 3761              	.LVL434:
2045:u8glib/chessengine.c ****   u8g_DrawFrame(lrc_u8g, x0, chess_low_edge - y0 - chess_boxsize+1, chess_boxsize, chess_boxsize);
 3762              		.loc 1 2045 0
 3763 003c 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 3764 0040 124A     		ldr	r2, .L306+8
 3765 0042 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3766 0044 921B     		subs	r2, r2, r6
 3767 0046 D21A     		subs	r2, r2, r3
 3768 0048 0132     		adds	r2, r2, #1
 3769 004a 3868     		ldr	r0, [r7]
 3770 004c 0093     		str	r3, [sp]
 3771 004e D2B2     		uxtb	r2, r2
 3772 0050 2946     		mov	r1, r5
 3773 0052 FFF7FEFF 		bl	u8g_DrawFrame
 3774              	.LVL435:
2046:u8glib/chessengine.c ****   
2047:u8glib/chessengine.c ****   
2048:u8glib/chessengine.c ****   if ( is_bold )
 3775              		.loc 1 2048 0
 3776 0056 8CB1     		cbz	r4, .L301
2049:u8glib/chessengine.c ****   {
2050:u8glib/chessengine.c ****       x0--;
 3777              		.loc 1 2050 0
 3778 0058 691E     		subs	r1, r5, #1
 3779              	.LVL436:
2051:u8glib/chessengine.c ****       y0++;
 3780              		.loc 1 2051 0
 3781 005a 0136     		adds	r6, r6, #1
 3782              	.LVL437:
 3783 005c F6B2     		uxtb	r6, r6
 3784              	.LVL438:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 107


2052:u8glib/chessengine.c ****   
2053:u8glib/chessengine.c ****     u8g_DrawFrame(lrc_u8g, x0, chess_low_edge - y0 - chess_boxsize +1, chess_boxsize+2, chess_boxsi
 3785              		.loc 1 2053 0
 3786 005e 98F80020 		ldrb	r2, [r8]	@ zero_extendqisi2
 3787 0062 931C     		adds	r3, r2, #2
 3788 0064 DBB2     		uxtb	r3, r3
 3789 0066 0948     		ldr	r0, .L306+8
 3790 0068 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 3791 006a 861B     		subs	r6, r0, r6
 3792              	.LVL439:
 3793 006c B21A     		subs	r2, r6, r2
 3794 006e 0132     		adds	r2, r2, #1
 3795 0070 3868     		ldr	r0, [r7]
 3796 0072 0093     		str	r3, [sp]
 3797 0074 D2B2     		uxtb	r2, r2
 3798 0076 C9B2     		uxtb	r1, r1
 3799 0078 FFF7FEFF 		bl	u8g_DrawFrame
 3800              	.LVL440:
 3801              	.L301:
2054:u8glib/chessengine.c ****   }
2055:u8glib/chessengine.c **** }
 3802              		.loc 1 2055 0
 3803 007c 02B0     		add	sp, sp, #8
 3804              	.LCFI52:
 3805              		.cfi_def_cfa_offset 24
 3806              		@ sp needed
 3807 007e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3808              	.L307:
 3809 0082 00BF     		.align	2
 3810              	.L306:
 3811 0084 00000000 		.word	lrc_obj
 3812 0088 00000000 		.word	lrc_u8g
 3813 008c 00000000 		.word	chess_low_edge
 3814 0090 00000000 		.word	.LANCHOR12
 3815              		.cfi_endproc
 3816              	.LFE52:
 3818              		.section	.text.chess_DrawBoard,"ax",%progbits
 3819              		.align	2
 3820              		.global	chess_DrawBoard
 3821              		.thumb
 3822              		.thumb_func
 3824              	chess_DrawBoard:
 3825              	.LFB53:
2056:u8glib/chessengine.c **** 
2057:u8glib/chessengine.c **** 
2058:u8glib/chessengine.c **** void chess_DrawBoard(void)
2059:u8glib/chessengine.c **** {
 3826              		.loc 1 2059 0
 3827              		.cfi_startproc
 3828              		@ args = 0, pretend = 0, frame = 0
 3829              		@ frame_needed = 0, uses_anonymous_args = 0
 3830 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3831              	.LCFI53:
 3832              		.cfi_def_cfa_offset 32
 3833              		.cfi_offset 4, -32
 3834              		.cfi_offset 5, -28
 3835              		.cfi_offset 6, -24
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 108


 3836              		.cfi_offset 7, -20
 3837              		.cfi_offset 8, -16
 3838              		.cfi_offset 9, -12
 3839              		.cfi_offset 10, -8
 3840              		.cfi_offset 14, -4
 3841 0004 82B0     		sub	sp, sp, #8
 3842              	.LCFI54:
 3843              		.cfi_def_cfa_offset 40
2060:u8glib/chessengine.c ****   uint8_t i, j, cp;
2061:u8glib/chessengine.c ****   const uint8_t *ptr;  /* pointer into PROGMEM */
2062:u8glib/chessengine.c ****   
2063:u8glib/chessengine.c ****   if ( U8G_MODE_GET_BITS_PER_PIXEL(u8g_GetMode(lrc_u8g)) > 1 )
 3844              		.loc 1 2063 0
 3845 0006 9D4B     		ldr	r3, .L334
 3846 0008 1868     		ldr	r0, [r3]
 3847 000a C37C     		ldrb	r3, [r0, #19]	@ zero_extendqisi2
 3848 000c 03F01F03 		and	r3, r3, #31
 3849 0010 012B     		cmp	r3, #1
 3850 0012 2DDC     		bgt	.L328
 3851 0014 30E0     		b	.L332
 3852              	.LVL441:
 3853              	.L313:
 3854              	.LBB4:
2064:u8glib/chessengine.c ****   {
2065:u8glib/chessengine.c ****     for( i = 0; i < 8; i++ )
2066:u8glib/chessengine.c ****       for( j = 0; j < 8; j++ )
2067:u8glib/chessengine.c ****       {
2068:u8glib/chessengine.c ****         uint8_t x,y;
2069:u8glib/chessengine.c ****         x = i;
2070:u8glib/chessengine.c ****         x*=chess_boxsize;
 3855              		.loc 1 2070 0
 3856 0016 9A4B     		ldr	r3, .L334+4
 3857 0018 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3858 001a 16FB02F5 		smulbb	r5, r6, r2
 3859 001e EDB2     		uxtb	r5, r5
 3860              	.LVL442:
2071:u8glib/chessengine.c ****         y = j;
2072:u8glib/chessengine.c ****         y*=chess_boxsize;
 3861              		.loc 1 2072 0
 3862 0020 14FB02F2 		smulbb	r2, r4, r2
 3863 0024 D7B2     		uxtb	r7, r2
 3864              	.LVL443:
2073:u8glib/chessengine.c ****         if ( ((i^j) & 1)  == 0 )
 3865              		.loc 1 2073 0
 3866 0026 86EA0403 		eor	r3, r6, r4
 3867 002a 13F0010F 		tst	r3, #1
 3868 002e 04D1     		bne	.L311
2074:u8glib/chessengine.c ****           u8g_SetDefaultMidColor(lrc_u8g);  
 3869              		.loc 1 2074 0
 3870 0030 924B     		ldr	r3, .L334
 3871 0032 1868     		ldr	r0, [r3]
 3872 0034 FFF7FEFF 		bl	u8g_SetDefaultMidColor
 3873              	.LVL444:
 3874 0038 03E0     		b	.L312
 3875              	.L311:
2075:u8glib/chessengine.c ****         else
2076:u8glib/chessengine.c ****           u8g_SetDefaultBackgroundColor(lrc_u8g);  
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 109


 3876              		.loc 1 2076 0
 3877 003a 904B     		ldr	r3, .L334
 3878 003c 1868     		ldr	r0, [r3]
 3879 003e FFF7FEFF 		bl	u8g_SetDefaultBackgroundColor
 3880              	.LVL445:
 3881              	.L312:
2077:u8glib/chessengine.c ****         u8g_DrawBox(lrc_u8g, x,chess_low_edge-y-chess_boxsize+1,chess_boxsize,chess_boxsize);
 3882              		.loc 1 2077 0 discriminator 2
 3883 0042 8F4B     		ldr	r3, .L334+4
 3884 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3885 0046 8F4A     		ldr	r2, .L334+8
 3886 0048 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3887 004a D21B     		subs	r2, r2, r7
 3888 004c D21A     		subs	r2, r2, r3
 3889 004e 0132     		adds	r2, r2, #1
 3890 0050 8A49     		ldr	r1, .L334
 3891 0052 0868     		ldr	r0, [r1]
 3892 0054 0093     		str	r3, [sp]
 3893 0056 D2B2     		uxtb	r2, r2
 3894 0058 2946     		mov	r1, r5
 3895 005a FFF7FEFF 		bl	u8g_DrawBox
 3896              	.LVL446:
 3897              	.LBE4:
2066:u8glib/chessengine.c ****       {
 3898              		.loc 1 2066 0 discriminator 2
 3899 005e 0134     		adds	r4, r4, #1
 3900              	.LVL447:
 3901 0060 E4B2     		uxtb	r4, r4
 3902              	.LVL448:
 3903 0062 00E0     		b	.L314
 3904              	.LVL449:
 3905              	.L329:
 3906 0064 0024     		movs	r4, #0
 3907              	.L314:
 3908              	.LVL450:
2066:u8glib/chessengine.c ****       {
 3909              		.loc 1 2066 0 is_stmt 0 discriminator 1
 3910 0066 072C     		cmp	r4, #7
 3911 0068 D5D9     		bls	.L313
2065:u8glib/chessengine.c ****       for( j = 0; j < 8; j++ )
 3912              		.loc 1 2065 0 is_stmt 1 discriminator 2
 3913 006a 0136     		adds	r6, r6, #1
 3914              	.LVL451:
 3915 006c F6B2     		uxtb	r6, r6
 3916              	.LVL452:
 3917 006e 00E0     		b	.L309
 3918              	.LVL453:
 3919              	.L328:
 3920 0070 0026     		movs	r6, #0
 3921              	.L309:
 3922              	.LVL454:
2065:u8glib/chessengine.c ****       for( j = 0; j < 8; j++ )
 3923              		.loc 1 2065 0 is_stmt 0 discriminator 1
 3924 0072 072E     		cmp	r6, #7
 3925 0074 F6D9     		bls	.L329
 3926 0076 80E0     		b	.L315
 3927              	.LVL455:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 110


 3928              	.L332:
 3929              	.LBB5:
2078:u8glib/chessengine.c ****       }
2079:u8glib/chessengine.c ****     //u8g_SetDefaultForegroundColor(lrc_u8g);  
2080:u8glib/chessengine.c ****   }
2081:u8glib/chessengine.c ****   else
2082:u8glib/chessengine.c ****   {
2083:u8glib/chessengine.c ****     uint8_t x_offset = 1;
2084:u8glib/chessengine.c ****     u8g_SetDefaultForegroundColor(lrc_u8g);  
 3930              		.loc 1 2084 0 is_stmt 1
 3931 0078 FFF7FEFF 		bl	u8g_SetDefaultForegroundColor
 3932              	.LVL456:
2085:u8glib/chessengine.c ****     for( i = 0; i < 8*8; i+=8 )
 3933              		.loc 1 2085 0
 3934 007c 0027     		movs	r7, #0
 3935 007e 7AE0     		b	.L316
 3936              	.LVL457:
 3937              	.L318:
2086:u8glib/chessengine.c ****     {
2087:u8glib/chessengine.c ****       for( j = 0; j < 8*8; j+=8 )
2088:u8glib/chessengine.c ****       {
2089:u8glib/chessengine.c ****         if ( ((i^j) & 8)  == 0 )
 3938              		.loc 1 2089 0
 3939 0080 87EA0403 		eor	r3, r7, r4
 3940 0084 13F0080F 		tst	r3, #8
 3941 0088 6DD1     		bne	.L317
2090:u8glib/chessengine.c ****         {
2091:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+0+x_offset, chess_low_edge - i-0);
 3942              		.loc 1 2091 0
 3943 008a 04F10108 		add	r8, r4, #1
 3944 008e 5FFA88F8 		uxtb	r8, r8
 3945 0092 7C4E     		ldr	r6, .L334+8
 3946 0094 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 3947 0096 D21B     		subs	r2, r2, r7
 3948 0098 784D     		ldr	r5, .L334
 3949 009a D2B2     		uxtb	r2, r2
 3950 009c 4146     		mov	r1, r8
 3951 009e 2868     		ldr	r0, [r5]
 3952 00a0 FFF7FEFF 		bl	u8g_DrawPixel
 3953              	.LVL458:
2092:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+0+x_offset, chess_low_edge - i-2);
 3954              		.loc 1 2092 0
 3955 00a4 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 3956 00a6 D21B     		subs	r2, r2, r7
 3957 00a8 023A     		subs	r2, r2, #2
 3958 00aa D2B2     		uxtb	r2, r2
 3959 00ac 4146     		mov	r1, r8
 3960 00ae 2868     		ldr	r0, [r5]
 3961 00b0 FFF7FEFF 		bl	u8g_DrawPixel
 3962              	.LVL459:
2093:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+0+x_offset, chess_low_edge - i-4);
 3963              		.loc 1 2093 0
 3964 00b4 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 3965 00b6 D21B     		subs	r2, r2, r7
 3966 00b8 043A     		subs	r2, r2, #4
 3967 00ba D2B2     		uxtb	r2, r2
 3968 00bc 4146     		mov	r1, r8
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 111


 3969 00be 2868     		ldr	r0, [r5]
 3970 00c0 FFF7FEFF 		bl	u8g_DrawPixel
 3971              	.LVL460:
2094:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+0+x_offset, chess_low_edge - i-6);
 3972              		.loc 1 2094 0
 3973 00c4 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 3974 00c6 D21B     		subs	r2, r2, r7
 3975 00c8 063A     		subs	r2, r2, #6
 3976 00ca D2B2     		uxtb	r2, r2
 3977 00cc 4146     		mov	r1, r8
 3978 00ce 2868     		ldr	r0, [r5]
 3979 00d0 FFF7FEFF 		bl	u8g_DrawPixel
 3980              	.LVL461:
2095:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+2+x_offset, chess_low_edge - i-0);
 3981              		.loc 1 2095 0
 3982 00d4 04F10308 		add	r8, r4, #3
 3983 00d8 5FFA88F8 		uxtb	r8, r8
 3984 00dc 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 3985 00de D21B     		subs	r2, r2, r7
 3986 00e0 D2B2     		uxtb	r2, r2
 3987 00e2 4146     		mov	r1, r8
 3988 00e4 2868     		ldr	r0, [r5]
 3989 00e6 FFF7FEFF 		bl	u8g_DrawPixel
 3990              	.LVL462:
2096:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+2+x_offset, chess_low_edge - i-6);
 3991              		.loc 1 2096 0
 3992 00ea 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 3993 00ec D21B     		subs	r2, r2, r7
 3994 00ee 063A     		subs	r2, r2, #6
 3995 00f0 D2B2     		uxtb	r2, r2
 3996 00f2 4146     		mov	r1, r8
 3997 00f4 2868     		ldr	r0, [r5]
 3998 00f6 FFF7FEFF 		bl	u8g_DrawPixel
 3999              	.LVL463:
2097:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+4+x_offset, chess_low_edge - i-0);
 4000              		.loc 1 2097 0
 4001 00fa 04F10508 		add	r8, r4, #5
 4002 00fe 5FFA88F8 		uxtb	r8, r8
 4003 0102 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 4004 0104 D21B     		subs	r2, r2, r7
 4005 0106 D2B2     		uxtb	r2, r2
 4006 0108 4146     		mov	r1, r8
 4007 010a 2868     		ldr	r0, [r5]
 4008 010c FFF7FEFF 		bl	u8g_DrawPixel
 4009              	.LVL464:
2098:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+4+x_offset, chess_low_edge - i-6);
 4010              		.loc 1 2098 0
 4011 0110 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 4012 0112 D21B     		subs	r2, r2, r7
 4013 0114 063A     		subs	r2, r2, #6
 4014 0116 D2B2     		uxtb	r2, r2
 4015 0118 4146     		mov	r1, r8
 4016 011a 2868     		ldr	r0, [r5]
 4017 011c FFF7FEFF 		bl	u8g_DrawPixel
 4018              	.LVL465:
2099:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+6+x_offset, chess_low_edge - i-0);
 4019              		.loc 1 2099 0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 112


 4020 0120 04F10708 		add	r8, r4, #7
 4021 0124 5FFA88F8 		uxtb	r8, r8
 4022 0128 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 4023 012a D21B     		subs	r2, r2, r7
 4024 012c D2B2     		uxtb	r2, r2
 4025 012e 4146     		mov	r1, r8
 4026 0130 2868     		ldr	r0, [r5]
 4027 0132 FFF7FEFF 		bl	u8g_DrawPixel
 4028              	.LVL466:
2100:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+6+x_offset, chess_low_edge - i-2);
 4029              		.loc 1 2100 0
 4030 0136 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 4031 0138 D21B     		subs	r2, r2, r7
 4032 013a 023A     		subs	r2, r2, #2
 4033 013c D2B2     		uxtb	r2, r2
 4034 013e 4146     		mov	r1, r8
 4035 0140 2868     		ldr	r0, [r5]
 4036 0142 FFF7FEFF 		bl	u8g_DrawPixel
 4037              	.LVL467:
2101:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+6+x_offset, chess_low_edge - i-4);
 4038              		.loc 1 2101 0
 4039 0146 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 4040 0148 D21B     		subs	r2, r2, r7
 4041 014a 043A     		subs	r2, r2, #4
 4042 014c D2B2     		uxtb	r2, r2
 4043 014e 4146     		mov	r1, r8
 4044 0150 2868     		ldr	r0, [r5]
 4045 0152 FFF7FEFF 		bl	u8g_DrawPixel
 4046              	.LVL468:
2102:u8glib/chessengine.c ****           u8g_DrawPixel(lrc_u8g, j+6+x_offset, chess_low_edge - i-6);
 4047              		.loc 1 2102 0
 4048 0156 3278     		ldrb	r2, [r6]	@ zero_extendqisi2
 4049 0158 D21B     		subs	r2, r2, r7
 4050 015a 063A     		subs	r2, r2, #6
 4051 015c D2B2     		uxtb	r2, r2
 4052 015e 4146     		mov	r1, r8
 4053 0160 2868     		ldr	r0, [r5]
 4054 0162 FFF7FEFF 		bl	u8g_DrawPixel
 4055              	.LVL469:
 4056              	.L317:
2087:u8glib/chessengine.c ****       {
 4057              		.loc 1 2087 0 discriminator 2
 4058 0166 0834     		adds	r4, r4, #8
 4059              	.LVL470:
 4060 0168 E4B2     		uxtb	r4, r4
 4061              	.LVL471:
 4062 016a 00E0     		b	.L319
 4063              	.LVL472:
 4064              	.L330:
 4065 016c 0024     		movs	r4, #0
 4066              	.L319:
 4067              	.LVL473:
2087:u8glib/chessengine.c ****       {
 4068              		.loc 1 2087 0 is_stmt 0 discriminator 1
 4069 016e 3F2C     		cmp	r4, #63
 4070 0170 86D9     		bls	.L318
2085:u8glib/chessengine.c ****     {
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 113


 4071              		.loc 1 2085 0 is_stmt 1 discriminator 2
 4072 0172 0837     		adds	r7, r7, #8
 4073              	.LVL474:
 4074 0174 FFB2     		uxtb	r7, r7
 4075              	.LVL475:
 4076              	.L316:
2085:u8glib/chessengine.c ****     {
 4077              		.loc 1 2085 0 is_stmt 0 discriminator 1
 4078 0176 3F2F     		cmp	r7, #63
 4079 0178 F8D9     		bls	.L330
 4080              	.LVL476:
 4081              	.L315:
 4082              	.LBE5:
 4083 017a 0026     		movs	r6, #0
 4084 017c 68E0     		b	.L320
 4085              	.LVL477:
 4086              	.L324:
2103:u8glib/chessengine.c ****         }
2104:u8glib/chessengine.c ****       }
2105:u8glib/chessengine.c ****     }
2106:u8glib/chessengine.c ****   }
2107:u8glib/chessengine.c ****   
2108:u8glib/chessengine.c ****   for ( i = 0; i < 8; i++ )
2109:u8glib/chessengine.c ****   {
2110:u8glib/chessengine.c ****     for ( j = 0; j < 8; j++ )
2111:u8glib/chessengine.c ****     {
2112:u8glib/chessengine.c ****       /* get piece from global board */
2113:u8glib/chessengine.c ****       if ( lrc_obj.orientation == COLOR_WHITE )
 4087              		.loc 1 2113 0 is_stmt 1
 4088 017e 424B     		ldr	r3, .L334+12
 4089 0180 93F84530 		ldrb	r3, [r3, #69]	@ zero_extendqisi2
 4090 0184 2BB9     		cbnz	r3, .L321
2114:u8glib/chessengine.c ****       {
2115:u8glib/chessengine.c **** 	cp =  lrc_obj.board[i*8+j];
 4091              		.loc 1 2115 0
 4092 0186 04EBC603 		add	r3, r4, r6, lsl #3
 4093 018a 3F4A     		ldr	r2, .L334+12
 4094 018c 1344     		add	r3, r3, r2
 4095 018e 9F78     		ldrb	r7, [r3, #2]	@ zero_extendqisi2
 4096              	.LVL478:
 4097 0190 07E0     		b	.L322
 4098              	.LVL479:
 4099              	.L321:
2116:u8glib/chessengine.c ****       }
2117:u8glib/chessengine.c ****       else
2118:u8glib/chessengine.c ****       {
2119:u8glib/chessengine.c **** 	cp =  lrc_obj.board[(7-i)*8+7-j];
 4100              		.loc 1 2119 0
 4101 0192 C6F10703 		rsb	r3, r6, #7
 4102 0196 DB00     		lsls	r3, r3, #3
 4103 0198 0733     		adds	r3, r3, #7
 4104 019a 1B1B     		subs	r3, r3, r4
 4105 019c 3A4A     		ldr	r2, .L334+12
 4106 019e 1344     		add	r3, r3, r2
 4107 01a0 9F78     		ldrb	r7, [r3, #2]	@ zero_extendqisi2
 4108              	.LVL480:
 4109              	.L322:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 114


2120:u8glib/chessengine.c ****       }
2121:u8glib/chessengine.c ****       if ( cp_GetPiece(cp) != PIECE_NONE )
 4110              		.loc 1 2121 0
 4111 01a2 3846     		mov	r0, r7
 4112 01a4 FFF7FEFF 		bl	cp_GetPiece
 4113              	.LVL481:
 4114 01a8 0028     		cmp	r0, #0
 4115 01aa 49D0     		beq	.L323
 4116              	.LVL482:
2122:u8glib/chessengine.c ****       {
2123:u8glib/chessengine.c **** 	ptr = chess_black_pieces_bm;
2124:u8glib/chessengine.c **** 	ptr += (cp_GetPiece(cp)-1)*8;
 4117              		.loc 1 2124 0
 4118 01ac 451E     		subs	r5, r0, #1
 4119 01ae ED00     		lsls	r5, r5, #3
 4120 01b0 364B     		ldr	r3, .L334+16
 4121 01b2 03EB0509 		add	r9, r3, r5
 4122              	.LVL483:
2125:u8glib/chessengine.c ****         u8g_SetDefaultForegroundColor(lrc_u8g);
 4123              		.loc 1 2125 0
 4124 01b6 DFF8C4A0 		ldr	r10, .L334
 4125 01ba DAF80000 		ldr	r0, [r10]
 4126 01be FFF7FEFF 		bl	u8g_SetDefaultForegroundColor
 4127              	.LVL484:
2126:u8glib/chessengine.c ****         u8g_DrawBitmapP(lrc_u8g, j*chess_boxsize+chess_boxoffset-1, chess_low_edge - (i*chess_boxsi
 4128              		.loc 1 2126 0
 4129 01c2 2F4B     		ldr	r3, .L334+4
 4130 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4131 01c6 324A     		ldr	r2, .L334+20
 4132 01c8 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 4133 01ca 06F10108 		add	r8, r6, #1
 4134 01ce 5FFA88F8 		uxtb	r8, r8
 4135 01d2 03FB1810 		mls	r0, r3, r8, r1
 4136 01d6 2B4A     		ldr	r2, .L334+8
 4137 01d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4138 01da 0244     		add	r2, r2, r0
 4139 01dc 04FB0311 		mla	r1, r4, r3, r1
 4140 01e0 0139     		subs	r1, r1, #1
 4141 01e2 DAF80000 		ldr	r0, [r10]
 4142 01e6 CDF80490 		str	r9, [sp, #4]
 4143 01ea 0823     		movs	r3, #8
 4144 01ec 0093     		str	r3, [sp]
 4145 01ee 0123     		movs	r3, #1
 4146 01f0 D2B2     		uxtb	r2, r2
 4147 01f2 C9B2     		uxtb	r1, r1
 4148 01f4 FFF7FEFF 		bl	u8g_DrawBitmapP
 4149              	.LVL485:
2127:u8glib/chessengine.c ****         
2128:u8glib/chessengine.c **** 	if ( cp_GetColor(cp) == lrc_obj.strike_out_color ) 
 4150              		.loc 1 2128 0
 4151 01f8 3846     		mov	r0, r7
 4152 01fa FFF7FEFF 		bl	cp_GetColor
 4153              	.LVL486:
 4154 01fe 224B     		ldr	r3, .L334+12
 4155 0200 93F84630 		ldrb	r3, [r3, #70]	@ zero_extendqisi2
 4156 0204 9842     		cmp	r0, r3
 4157 0206 1BD1     		bne	.L323
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 115


 4158              	.LVL487:
2129:u8glib/chessengine.c **** 	{
2130:u8glib/chessengine.c **** 	  ptr = chess_pieces_body_bm;
2131:u8glib/chessengine.c **** 	  ptr += (cp_GetPiece(cp)-1)*8;
 4159              		.loc 1 2131 0
 4160 0208 224B     		ldr	r3, .L334+24
 4161 020a 1D44     		add	r5, r5, r3
 4162              	.LVL488:
2132:u8glib/chessengine.c ****           u8g_SetDefaultBackgroundColor(lrc_u8g);
 4163              		.loc 1 2132 0
 4164 020c DAF80000 		ldr	r0, [r10]
 4165 0210 FFF7FEFF 		bl	u8g_SetDefaultBackgroundColor
 4166              	.LVL489:
2133:u8glib/chessengine.c ****           u8g_DrawBitmapP(lrc_u8g, j*chess_boxsize+chess_boxoffset-1, chess_low_edge - (i*chess_box
 4167              		.loc 1 2133 0
 4168 0214 1A4B     		ldr	r3, .L334+4
 4169 0216 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4170 0218 1D4A     		ldr	r2, .L334+20
 4171 021a 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 4172 021c 08FB1318 		mls	r8, r8, r3, r1
 4173 0220 184A     		ldr	r2, .L334+8
 4174 0222 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4175 0224 4244     		add	r2, r2, r8
 4176 0226 04FB0313 		mla	r3, r4, r3, r1
 4177 022a 591E     		subs	r1, r3, #1
 4178 022c DAF80000 		ldr	r0, [r10]
 4179 0230 0195     		str	r5, [sp, #4]
 4180 0232 0823     		movs	r3, #8
 4181 0234 0093     		str	r3, [sp]
 4182 0236 0123     		movs	r3, #1
 4183 0238 D2B2     		uxtb	r2, r2
 4184 023a C9B2     		uxtb	r1, r1
 4185 023c FFF7FEFF 		bl	u8g_DrawBitmapP
 4186              	.LVL490:
 4187              	.L323:
2110:u8glib/chessengine.c ****     {
 4188              		.loc 1 2110 0 discriminator 2
 4189 0240 0134     		adds	r4, r4, #1
 4190              	.LVL491:
 4191 0242 E4B2     		uxtb	r4, r4
 4192              	.LVL492:
 4193 0244 00E0     		b	.L325
 4194              	.LVL493:
 4195              	.L331:
 4196 0246 0024     		movs	r4, #0
 4197              	.L325:
 4198              	.LVL494:
2110:u8glib/chessengine.c ****     {
 4199              		.loc 1 2110 0 is_stmt 0 discriminator 1
 4200 0248 072C     		cmp	r4, #7
 4201 024a 98D9     		bls	.L324
2108:u8glib/chessengine.c ****   {
 4202              		.loc 1 2108 0 is_stmt 1 discriminator 2
 4203 024c 0136     		adds	r6, r6, #1
 4204              	.LVL495:
 4205 024e F6B2     		uxtb	r6, r6
 4206              	.LVL496:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 116


 4207              	.L320:
2108:u8glib/chessengine.c ****   {
 4208              		.loc 1 2108 0 is_stmt 0 discriminator 1
 4209 0250 072E     		cmp	r6, #7
 4210 0252 F8D9     		bls	.L331
2134:u8glib/chessengine.c **** 	}
2135:u8glib/chessengine.c ****       }
2136:u8glib/chessengine.c ****     }
2137:u8glib/chessengine.c ****   }
2138:u8glib/chessengine.c ****   
2139:u8glib/chessengine.c ****   if ( (chess_source_pos & 0x88) == 0 )
 4211              		.loc 1 2139 0 is_stmt 1
 4212 0254 104B     		ldr	r3, .L334+28
 4213 0256 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 4214 0258 10F0880F 		tst	r0, #136
 4215 025c 02D1     		bne	.L326
2140:u8glib/chessengine.c ****   {
2141:u8glib/chessengine.c ****     chess_DrawFrame(chess_source_pos, 1);
 4216              		.loc 1 2141 0
 4217 025e 0121     		movs	r1, #1
 4218 0260 FFF7FEFF 		bl	chess_DrawFrame
 4219              	.LVL497:
 4220              	.L326:
2142:u8glib/chessengine.c ****   }
2143:u8glib/chessengine.c **** 
2144:u8glib/chessengine.c ****   if ( (chess_target_pos & 0x88) == 0 )
 4221              		.loc 1 2144 0
 4222 0264 0D4B     		ldr	r3, .L334+32
 4223 0266 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 4224 0268 10F0880F 		tst	r0, #136
 4225 026c 02D1     		bne	.L308
2145:u8glib/chessengine.c ****   {
2146:u8glib/chessengine.c ****     chess_DrawFrame(chess_target_pos, 0);
 4226              		.loc 1 2146 0
 4227 026e 0021     		movs	r1, #0
 4228 0270 FFF7FEFF 		bl	chess_DrawFrame
 4229              	.LVL498:
 4230              	.L308:
2147:u8glib/chessengine.c ****   }
2148:u8glib/chessengine.c ****   
2149:u8glib/chessengine.c **** }
 4231              		.loc 1 2149 0
 4232 0274 02B0     		add	sp, sp, #8
 4233              	.LCFI55:
 4234              		.cfi_def_cfa_offset 32
 4235              		@ sp needed
 4236 0276 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 4237              	.LVL499:
 4238              	.L335:
 4239 027a 00BF     		.align	2
 4240              	.L334:
 4241 027c 00000000 		.word	lrc_u8g
 4242 0280 00000000 		.word	.LANCHOR12
 4243 0284 00000000 		.word	chess_low_edge
 4244 0288 00000000 		.word	lrc_obj
 4245 028c 00000000 		.word	.LANCHOR13
 4246 0290 00000000 		.word	.LANCHOR14
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 117


 4247 0294 00000000 		.word	.LANCHOR15
 4248 0298 00000000 		.word	.LANCHOR16
 4249 029c 00000000 		.word	.LANCHOR17
 4250              		.cfi_endproc
 4251              	.LFE53:
 4253              		.section	.text.chess_Thinking,"ax",%progbits
 4254              		.align	2
 4255              		.global	chess_Thinking
 4256              		.thumb
 4257              		.thumb_func
 4259              	chess_Thinking:
 4260              	.LFB54:
2150:u8glib/chessengine.c **** 
2151:u8glib/chessengine.c **** 
2152:u8glib/chessengine.c **** void chess_Thinking(void)
2153:u8glib/chessengine.c **** {
 4261              		.loc 1 2153 0
 4262              		.cfi_startproc
 4263              		@ args = 0, pretend = 0, frame = 0
 4264              		@ frame_needed = 0, uses_anonymous_args = 0
 4265              		@ link register save eliminated.
 4266 0000 7047     		bx	lr
 4267              		.cfi_endproc
 4268              	.LFE54:
 4270 0002 00BF     		.section	.text.chess_Init,"ax",%progbits
 4271              		.align	2
 4272              		.global	chess_Init
 4273              		.thumb
 4274              		.thumb_func
 4276              	chess_Init:
 4277              	.LFB55:
2154:u8glib/chessengine.c **** }
2155:u8glib/chessengine.c **** 
2156:u8glib/chessengine.c **** void chess_Init(u8g_t *u8g, uint8_t body_color)
2157:u8glib/chessengine.c **** {
 4278              		.loc 1 2157 0
 4279              		.cfi_startproc
 4280              		@ args = 0, pretend = 0, frame = 0
 4281              		@ frame_needed = 0, uses_anonymous_args = 0
 4282              	.LVL500:
 4283              		.loc 1 2157 0
 4284 0000 10B5     		push	{r4, lr}
 4285              	.LCFI56:
 4286              		.cfi_def_cfa_offset 8
 4287              		.cfi_offset 4, -8
 4288              		.cfi_offset 14, -4
2158:u8glib/chessengine.c ****   lrc_u8g = u8g;
 4289              		.loc 1 2158 0
 4290 0002 1B4B     		ldr	r3, .L343
 4291 0004 1860     		str	r0, [r3]
2159:u8glib/chessengine.c **** 
2160:u8glib/chessengine.c ****   chess_low_edge = u8g_GetHeight(lrc_u8g);
 4292              		.loc 1 2160 0
 4293 0006 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
2161:u8glib/chessengine.c ****   chess_low_edge--;
 4294              		.loc 1 2161 0
 4295 0008 541E     		subs	r4, r2, #1
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 118


 4296 000a 1A4B     		ldr	r3, .L343+4
 4297 000c 1C70     		strb	r4, [r3]
2162:u8glib/chessengine.c ****   
2163:u8glib/chessengine.c **** 
2164:u8glib/chessengine.c ****   if ( U8G_MODE_GET_BITS_PER_PIXEL(u8g_GetMode(lrc_u8g)) == 1 )
 4298              		.loc 1 2164 0
 4299 000e C37C     		ldrb	r3, [r0, #19]	@ zero_extendqisi2
 4300 0010 03F01F03 		and	r3, r3, #31
 4301 0014 012B     		cmp	r3, #1
 4302 0016 06D1     		bne	.L338
2165:u8glib/chessengine.c ****   {
2166:u8glib/chessengine.c ****   
2167:u8glib/chessengine.c ****     chess_boxsize = 8;
 4303              		.loc 1 2167 0
 4304 0018 0822     		movs	r2, #8
 4305 001a 174B     		ldr	r3, .L343+8
 4306 001c 1A70     		strb	r2, [r3]
2168:u8glib/chessengine.c ****     chess_boxoffset = 1;
 4307              		.loc 1 2168 0
 4308 001e 0122     		movs	r2, #1
 4309 0020 164B     		ldr	r3, .L343+12
 4310 0022 1A70     		strb	r2, [r3]
 4311 0024 1EE0     		b	.L339
 4312              	.L338:
2169:u8glib/chessengine.c ****   }
2170:u8glib/chessengine.c ****   else
2171:u8glib/chessengine.c ****   {
2172:u8glib/chessengine.c **** 
2173:u8glib/chessengine.c ****     /*    
2174:u8glib/chessengine.c ****     if ( u8g_GetHeight(lrc_u8g) >= 12*8 )
2175:u8glib/chessengine.c ****     {
2176:u8glib/chessengine.c ****       chess_boxsize = 12;
2177:u8glib/chessengine.c ****       chess_boxoffset = 3;
2178:u8glib/chessengine.c ****     }
2179:u8glib/chessengine.c ****     else */ if ( u8g_GetHeight(lrc_u8g) >= 11*8 )
 4313              		.loc 1 2179 0
 4314 0026 572A     		cmp	r2, #87
 4315 0028 06D9     		bls	.L340
2180:u8glib/chessengine.c ****     {
2181:u8glib/chessengine.c ****       chess_boxsize = 10;
 4316              		.loc 1 2181 0
 4317 002a 0A22     		movs	r2, #10
 4318 002c 124B     		ldr	r3, .L343+8
 4319 002e 1A70     		strb	r2, [r3]
2182:u8glib/chessengine.c ****       chess_boxoffset = 2;
 4320              		.loc 1 2182 0
 4321 0030 0222     		movs	r2, #2
 4322 0032 124B     		ldr	r3, .L343+12
 4323 0034 1A70     		strb	r2, [r3]
 4324 0036 05E0     		b	.L341
 4325              	.L340:
2183:u8glib/chessengine.c ****     }
2184:u8glib/chessengine.c ****     else
2185:u8glib/chessengine.c ****     {
2186:u8glib/chessengine.c ****       chess_boxsize = 8;
 4326              		.loc 1 2186 0
 4327 0038 0822     		movs	r2, #8
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 119


 4328 003a 0F4B     		ldr	r3, .L343+8
 4329 003c 1A70     		strb	r2, [r3]
2187:u8glib/chessengine.c ****       chess_boxoffset = 1;      
 4330              		.loc 1 2187 0
 4331 003e 0122     		movs	r2, #1
 4332 0040 0E4B     		ldr	r3, .L343+12
 4333 0042 1A70     		strb	r2, [r3]
 4334              	.L341:
2188:u8glib/chessengine.c ****     }
2189:u8glib/chessengine.c ****     
2190:u8glib/chessengine.c ****     if ( u8g_GetHeight(lrc_u8g) > 64 )
 4335              		.loc 1 2190 0
 4336 0044 0A4B     		ldr	r3, .L343
 4337 0046 1B68     		ldr	r3, [r3]
 4338 0048 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4339 004a 402B     		cmp	r3, #64
 4340 004c 0AD9     		bls	.L339
2191:u8glib/chessengine.c ****       chess_low_edge -= (u8g_GetHeight(lrc_u8g)-chess_boxsize*8) / 2;
 4341              		.loc 1 2191 0
 4342 004e 0A4A     		ldr	r2, .L343+8
 4343 0050 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4344 0052 A3EBC203 		sub	r3, r3, r2, lsl #3
 4345 0056 03EBD373 		add	r3, r3, r3, lsr #31
 4346 005a 0648     		ldr	r0, .L343+4
 4347              	.LVL501:
 4348 005c 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 4349 005e A2EB6303 		sub	r3, r2, r3, asr #1
 4350 0062 0370     		strb	r3, [r0]
 4351              	.L339:
2192:u8glib/chessengine.c ****     
2193:u8glib/chessengine.c ****   }
2194:u8glib/chessengine.c ****     
2195:u8glib/chessengine.c ****   lrc_obj.strike_out_color = body_color;
 4352              		.loc 1 2195 0
 4353 0064 064B     		ldr	r3, .L343+16
 4354 0066 83F84610 		strb	r1, [r3, #70]
2196:u8glib/chessengine.c ****   chess_SetupBoard();
 4355              		.loc 1 2196 0
 4356 006a FFF7FEFF 		bl	chess_SetupBoard
 4357              	.LVL502:
 4358 006e 10BD     		pop	{r4, pc}
 4359              	.L344:
 4360              		.align	2
 4361              	.L343:
 4362 0070 00000000 		.word	lrc_u8g
 4363 0074 00000000 		.word	chess_low_edge
 4364 0078 00000000 		.word	.LANCHOR12
 4365 007c 00000000 		.word	.LANCHOR14
 4366 0080 00000000 		.word	lrc_obj
 4367              		.cfi_endproc
 4368              	.LFE55:
 4370              		.section	.text.chess_Draw,"ax",%progbits
 4371              		.align	2
 4372              		.global	chess_Draw
 4373              		.thumb
 4374              		.thumb_func
 4376              	chess_Draw:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 120


 4377              	.LFB56:
2197:u8glib/chessengine.c **** }
2198:u8glib/chessengine.c **** 
2199:u8glib/chessengine.c **** 
2200:u8glib/chessengine.c **** 
2201:u8glib/chessengine.c **** void chess_Draw(void)
2202:u8glib/chessengine.c **** {
 4378              		.loc 1 2202 0
 4379              		.cfi_startproc
 4380              		@ args = 0, pretend = 0, frame = 0
 4381              		@ frame_needed = 0, uses_anonymous_args = 0
 4382 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4383              	.LCFI57:
 4384              		.cfi_def_cfa_offset 24
 4385              		.cfi_offset 3, -24
 4386              		.cfi_offset 4, -20
 4387              		.cfi_offset 5, -16
 4388              		.cfi_offset 6, -12
 4389              		.cfi_offset 7, -8
 4390              		.cfi_offset 14, -4
2203:u8glib/chessengine.c ****   if ( chess_state == CHESS_STATE_MENU )
 4391              		.loc 1 2203 0
 4392 0002 414B     		ldr	r3, .L362
 4393 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4394 0006 63B9     		cbnz	r3, .L346
2204:u8glib/chessengine.c ****   {
2205:u8glib/chessengine.c ****     if ( lrc_obj.ply_count == 0)
 4395              		.loc 1 2205 0
 4396 0008 404B     		ldr	r3, .L362+4
 4397 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4398 000c 1BB9     		cbnz	r3, .L347
2206:u8glib/chessengine.c ****       mnu_max = 2;
 4399              		.loc 1 2206 0
 4400 000e 0222     		movs	r2, #2
 4401 0010 3F4B     		ldr	r3, .L362+8
 4402 0012 1A70     		strb	r2, [r3]
 4403 0014 02E0     		b	.L348
 4404              	.L347:
2207:u8glib/chessengine.c ****     else
2208:u8glib/chessengine.c ****       mnu_max = 4;
 4405              		.loc 1 2208 0
 4406 0016 0422     		movs	r2, #4
 4407 0018 3D4B     		ldr	r3, .L362+8
 4408 001a 1A70     		strb	r2, [r3]
 4409              	.L348:
2209:u8glib/chessengine.c ****     mnu_Draw();
 4410              		.loc 1 2209 0
 4411 001c FFF7FEFF 		bl	mnu_Draw
 4412              	.LVL503:
 4413 0020 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4414              	.L346:
2210:u8glib/chessengine.c ****   }
2211:u8glib/chessengine.c ****   else
2212:u8glib/chessengine.c ****   {
2213:u8glib/chessengine.c ****     chess_DrawBoard();
 4415              		.loc 1 2213 0
 4416 0022 FFF7FEFF 		bl	chess_DrawBoard
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 121


 4417              	.LVL504:
 4418              	.LBB6:
2214:u8glib/chessengine.c ****     
2215:u8glib/chessengine.c ****     {
2216:u8glib/chessengine.c ****       uint8_t i;
2217:u8glib/chessengine.c ****       uint8_t entries = lrc_obj.chm_pos;
 4419              		.loc 1 2217 0
 4420 0026 394B     		ldr	r3, .L362+4
 4421 0028 5F78     		ldrb	r7, [r3, #1]	@ zero_extendqisi2
 4422              	.LVL505:
2218:u8glib/chessengine.c ****       if ( entries > 4 )
 4423              		.loc 1 2218 0
 4424 002a 042F     		cmp	r7, #4
 4425 002c 00D9     		bls	.L350
2219:u8glib/chessengine.c **** 	entries = 4;
 4426              		.loc 1 2219 0
 4427 002e 0427     		movs	r7, #4
 4428              	.LVL506:
 4429              	.L350:
2220:u8glib/chessengine.c ****       
2221:u8glib/chessengine.c ****       u8g_SetFont(lrc_u8g, u8g_font_5x7);
 4430              		.loc 1 2221 0
 4431 0030 384C     		ldr	r4, .L362+12
 4432 0032 3949     		ldr	r1, .L362+16
 4433 0034 2068     		ldr	r0, [r4]
 4434 0036 FFF7FEFF 		bl	u8g_SetFont
 4435              	.LVL507:
2222:u8glib/chessengine.c ****       u8g_SetDefaultForegroundColor(lrc_u8g);
 4436              		.loc 1 2222 0
 4437 003a 2068     		ldr	r0, [r4]
 4438 003c FFF7FEFF 		bl	u8g_SetDefaultForegroundColor
 4439              	.LVL508:
2223:u8glib/chessengine.c ****       for( i = 0; i < entries; i++ )
 4440              		.loc 1 2223 0
 4441 0040 0023     		movs	r3, #0
 4442 0042 15E0     		b	.L351
 4443              	.LVL509:
 4444              	.L352:
2224:u8glib/chessengine.c ****       {
2225:u8glib/chessengine.c ****         
2226:u8glib/chessengine.c **** #if defined(DOGXL160_HW_GR) || defined(DOGXL160_HW_BW)
2227:u8glib/chessengine.c **** 	dog_DrawStr(u8g_GetWidth(lrc_u8g)-35, u8g_GetHeight(lrc_u8g)-8*(i+1), font_5x7, cu_GetHalfMoveStr(
2228:u8glib/chessengine.c **** #else
2229:u8glib/chessengine.c ****         u8g_DrawStr(lrc_u8g, u8g_GetWidth(lrc_u8g)-35, 8*(i+1), cu_GetHalfMoveStr(lrc_obj.chm_pos-e
 4445              		.loc 1 2229 0 discriminator 3
 4446 0044 334A     		ldr	r2, .L362+12
 4447 0046 1668     		ldr	r6, [r2]
 4448 0048 3478     		ldrb	r4, [r6]	@ zero_extendqisi2
 4449 004a 5D1C     		adds	r5, r3, #1
 4450 004c 2F4A     		ldr	r2, .L362+4
 4451 004e 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 4452 0050 C01B     		subs	r0, r0, r7
 4453 0052 1844     		add	r0, r0, r3
 4454 0054 C0B2     		uxtb	r0, r0
 4455 0056 FFF7FEFF 		bl	cu_GetHalfMoveStr
 4456              	.LVL510:
 4457 005a EA00     		lsls	r2, r5, #3
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 122


 4458 005c A4F12301 		sub	r1, r4, #35
 4459 0060 0346     		mov	r3, r0
 4460 0062 02F0F802 		and	r2, r2, #248
 4461 0066 C9B2     		uxtb	r1, r1
 4462 0068 3046     		mov	r0, r6
 4463 006a FFF7FEFF 		bl	u8g_DrawStr
 4464              	.LVL511:
2223:u8glib/chessengine.c ****       for( i = 0; i < entries; i++ )
 4465              		.loc 1 2223 0 discriminator 3
 4466 006e EBB2     		uxtb	r3, r5
 4467              	.LVL512:
 4468              	.L351:
2223:u8glib/chessengine.c ****       for( i = 0; i < entries; i++ )
 4469              		.loc 1 2223 0 is_stmt 0 discriminator 1
 4470 0070 BB42     		cmp	r3, r7
 4471 0072 E7D3     		bcc	.L352
 4472              	.LBE6:
2230:u8glib/chessengine.c **** #endif
2231:u8glib/chessengine.c **** 
2232:u8glib/chessengine.c ****       }
2233:u8glib/chessengine.c ****       
2234:u8glib/chessengine.c ****     }
2235:u8glib/chessengine.c ****     
2236:u8glib/chessengine.c ****     if ( chess_state == CHESS_STATE_SELECT_PIECE )
 4473              		.loc 1 2236 0 is_stmt 1
 4474 0074 244B     		ldr	r3, .L362
 4475              	.LVL513:
 4476 0076 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4477 0078 022B     		cmp	r3, #2
 4478 007a 08D1     		bne	.L353
2237:u8glib/chessengine.c ****       mnu_DrawHome(chess_source_pos == 255);
 4479              		.loc 1 2237 0
 4480 007c 274B     		ldr	r3, .L362+20
 4481 007e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 4482 0080 FF28     		cmp	r0, #255
 4483 0082 14BF     		ite	ne
 4484 0084 0020     		movne	r0, #0
 4485 0086 0120     		moveq	r0, #1
 4486 0088 FFF7FEFF 		bl	mnu_DrawHome
 4487              	.LVL514:
 4488 008c 0DE0     		b	.L354
 4489              	.L353:
2238:u8glib/chessengine.c ****     else if ( chess_state == CHESS_STATE_SELECT_TARGET_POS )
 4490              		.loc 1 2238 0
 4491 008e 032B     		cmp	r3, #3
 4492 0090 08D1     		bne	.L355
2239:u8glib/chessengine.c ****       mnu_DrawHome(chess_target_pos == 255);
 4493              		.loc 1 2239 0
 4494 0092 234B     		ldr	r3, .L362+24
 4495 0094 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 4496 0096 FF28     		cmp	r0, #255
 4497 0098 14BF     		ite	ne
 4498 009a 0020     		movne	r0, #0
 4499 009c 0120     		moveq	r0, #1
 4500 009e FFF7FEFF 		bl	mnu_DrawHome
 4501              	.LVL515:
 4502 00a2 02E0     		b	.L354
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 123


 4503              	.L355:
2240:u8glib/chessengine.c ****     else
2241:u8glib/chessengine.c ****       mnu_DrawHome(0);
 4504              		.loc 1 2241 0
 4505 00a4 0020     		movs	r0, #0
 4506 00a6 FFF7FEFF 		bl	mnu_DrawHome
 4507              	.LVL516:
 4508              	.L354:
2242:u8glib/chessengine.c ****       
2243:u8glib/chessengine.c ****     if ( chess_state == CHESS_STATE_GAME_END )
 4509              		.loc 1 2243 0
 4510 00aa 174B     		ldr	r3, .L362
 4511 00ac 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4512 00ae 052B     		cmp	r3, #5
 4513 00b0 29D1     		bne	.L345
2244:u8glib/chessengine.c ****     {
2245:u8glib/chessengine.c ****       switch( lrc_obj.lost_side_color )
 4514              		.loc 1 2245 0
 4515 00b2 164B     		ldr	r3, .L362+4
 4516 00b4 93F84830 		ldrb	r3, [r3, #72]	@ zero_extendqisi2
 4517 00b8 13B1     		cbz	r3, .L357
 4518 00ba 012B     		cmp	r3, #1
 4519 00bc 0CD0     		beq	.L358
 4520 00be 17E0     		b	.L360
 4521              	.L357:
2246:u8glib/chessengine.c ****       {
2247:u8glib/chessengine.c **** 	case COLOR_WHITE:
2248:u8glib/chessengine.c **** 	  mnu_DrawEntry(u8g_GetHeight(lrc_u8g) / 2-2, "Black wins", 1, 1);
 4522              		.loc 1 2248 0
 4523 00c0 144B     		ldr	r3, .L362+12
 4524 00c2 1B68     		ldr	r3, [r3]
 4525 00c4 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 4526 00c6 4008     		lsrs	r0, r0, #1
 4527 00c8 0238     		subs	r0, r0, #2
 4528 00ca 0123     		movs	r3, #1
 4529 00cc 1A46     		mov	r2, r3
 4530 00ce 1549     		ldr	r1, .L362+28
 4531 00d0 C0B2     		uxtb	r0, r0
 4532 00d2 FFF7FEFF 		bl	mnu_DrawEntry
 4533              	.LVL517:
2249:u8glib/chessengine.c **** 	  break;
 4534              		.loc 1 2249 0
 4535 00d6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4536              	.LVL518:
 4537              	.L358:
2250:u8glib/chessengine.c **** 	case COLOR_BLACK:
2251:u8glib/chessengine.c **** 	  mnu_DrawEntry(u8g_GetHeight(lrc_u8g) / 2-2, "White wins", 1, 1);
 4538              		.loc 1 2251 0
 4539 00d8 0E4B     		ldr	r3, .L362+12
 4540 00da 1B68     		ldr	r3, [r3]
 4541 00dc 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 4542 00de 4008     		lsrs	r0, r0, #1
 4543 00e0 0238     		subs	r0, r0, #2
 4544 00e2 0123     		movs	r3, #1
 4545 00e4 1A46     		mov	r2, r3
 4546 00e6 1049     		ldr	r1, .L362+32
 4547 00e8 C0B2     		uxtb	r0, r0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 124


 4548 00ea FFF7FEFF 		bl	mnu_DrawEntry
 4549              	.LVL519:
2252:u8glib/chessengine.c **** 	  break;
 4550              		.loc 1 2252 0
 4551 00ee F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4552              	.LVL520:
 4553              	.L360:
2253:u8glib/chessengine.c **** 	default:
2254:u8glib/chessengine.c **** 	  mnu_DrawEntry(u8g_GetHeight(lrc_u8g) / 2-2, "Stalemate", 1, 1);
 4554              		.loc 1 2254 0
 4555 00f0 084B     		ldr	r3, .L362+12
 4556 00f2 1B68     		ldr	r3, [r3]
 4557 00f4 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 4558 00f6 4008     		lsrs	r0, r0, #1
 4559 00f8 0238     		subs	r0, r0, #2
 4560 00fa 0123     		movs	r3, #1
 4561 00fc 1A46     		mov	r2, r3
 4562 00fe 0B49     		ldr	r1, .L362+36
 4563 0100 C0B2     		uxtb	r0, r0
 4564 0102 FFF7FEFF 		bl	mnu_DrawEntry
 4565              	.LVL521:
 4566              	.L345:
 4567 0106 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4568              	.LVL522:
 4569              	.L363:
 4570              		.align	2
 4571              	.L362:
 4572 0108 00000000 		.word	.LANCHOR18
 4573 010c 00000000 		.word	lrc_obj
 4574 0110 00000000 		.word	.LANCHOR8
 4575 0114 00000000 		.word	lrc_u8g
 4576 0118 00000000 		.word	u8g_font_5x7
 4577 011c 00000000 		.word	.LANCHOR16
 4578 0120 00000000 		.word	.LANCHOR17
 4579 0124 08000000 		.word	.LC1
 4580 0128 14000000 		.word	.LC2
 4581 012c 20000000 		.word	.LC3
 4582              		.cfi_endproc
 4583              	.LFE56:
 4585              		.section	.text.chess_Step,"ax",%progbits
 4586              		.align	2
 4587              		.global	chess_Step
 4588              		.thumb
 4589              		.thumb_func
 4591              	chess_Step:
 4592              	.LFB57:
2255:u8glib/chessengine.c **** 	  break;
2256:u8glib/chessengine.c ****       }  
2257:u8glib/chessengine.c ****     }
2258:u8glib/chessengine.c ****   }
2259:u8glib/chessengine.c **** }
2260:u8glib/chessengine.c **** 
2261:u8glib/chessengine.c **** 
2262:u8glib/chessengine.c **** void chess_Step(uint8_t keycode)
2263:u8glib/chessengine.c **** {
 4593              		.loc 1 2263 0
 4594              		.cfi_startproc
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 125


 4595              		@ args = 0, pretend = 0, frame = 0
 4596              		@ frame_needed = 0, uses_anonymous_args = 0
 4597              	.LVL523:
 4598 0000 10B5     		push	{r4, lr}
 4599              	.LCFI58:
 4600              		.cfi_def_cfa_offset 8
 4601              		.cfi_offset 4, -8
 4602              		.cfi_offset 14, -4
2264:u8glib/chessengine.c ****   if ( keycode == CHESS_KEY_NONE )
 4603              		.loc 1 2264 0
 4604 0002 30B9     		cbnz	r0, .L365
2265:u8glib/chessengine.c ****   {
2266:u8glib/chessengine.c ****     chess_key_cmd = chess_key_code;
 4605              		.loc 1 2266 0
 4606 0004 754B     		ldr	r3, .L389
 4607 0006 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 4608 0008 754A     		ldr	r2, .L389+4
 4609 000a 1170     		strb	r1, [r2]
2267:u8glib/chessengine.c ****     chess_key_code = CHESS_KEY_NONE;
 4610              		.loc 1 2267 0
 4611 000c 0022     		movs	r2, #0
 4612 000e 1A70     		strb	r2, [r3]
 4613 0010 04E0     		b	.L366
 4614              	.L365:
2268:u8glib/chessengine.c ****   }
2269:u8glib/chessengine.c ****   else
2270:u8glib/chessengine.c ****   {
2271:u8glib/chessengine.c ****     chess_key_cmd = CHESS_KEY_NONE;
 4615              		.loc 1 2271 0
 4616 0012 0021     		movs	r1, #0
 4617 0014 724A     		ldr	r2, .L389+4
 4618 0016 1170     		strb	r1, [r2]
2272:u8glib/chessengine.c ****     chess_key_code = keycode;
 4619              		.loc 1 2272 0
 4620 0018 704A     		ldr	r2, .L389
 4621 001a 1070     		strb	r0, [r2]
 4622              	.L366:
2273:u8glib/chessengine.c ****   }
2274:u8glib/chessengine.c ****   //chess_ComputerMove(2);
2275:u8glib/chessengine.c ****   switch(chess_state)
 4623              		.loc 1 2275 0
 4624 001c 714B     		ldr	r3, .L389+8
 4625 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4626 0020 052B     		cmp	r3, #5
 4627 0022 00F2D980 		bhi	.L364
 4628 0026 DFE813F0 		tbh	[pc, r3, lsl #1]
 4629              	.L369:
 4630 002a 0600     		.2byte	(.L368-.L369)/2
 4631 002c 4500     		.2byte	(.L370-.L369)/2
 4632 002e 5600     		.2byte	(.L371-.L369)/2
 4633 0030 8400     		.2byte	(.L372-.L369)/2
 4634 0032 C000     		.2byte	(.L373-.L369)/2
 4635 0034 CF00     		.2byte	(.L374-.L369)/2
 4636              		.p2align 1
 4637              	.L368:
2276:u8glib/chessengine.c ****   {
2277:u8glib/chessengine.c ****     case CHESS_STATE_MENU:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 126


2278:u8glib/chessengine.c ****       mnu_Step(chess_key_cmd);
 4638              		.loc 1 2278 0
 4639 0036 6A4C     		ldr	r4, .L389+4
 4640 0038 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4641              	.LVL524:
 4642 003a FFF7FEFF 		bl	mnu_Step
 4643              	.LVL525:
2279:u8glib/chessengine.c ****       if ( chess_key_cmd == CHESS_KEY_SELECT )
 4644              		.loc 1 2279 0
 4645 003e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 4646 0040 032B     		cmp	r3, #3
 4647 0042 40F0C980 		bne	.L364
2280:u8glib/chessengine.c ****       {
2281:u8glib/chessengine.c **** 	if ( mnu_pos == 0 )
 4648              		.loc 1 2281 0
 4649 0046 684B     		ldr	r3, .L389+12
 4650 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4651 004a 4BB9     		cbnz	r3, .L375
2282:u8glib/chessengine.c **** 	{
2283:u8glib/chessengine.c ****           chess_SetupBoard();
 4652              		.loc 1 2283 0
 4653 004c FFF7FEFF 		bl	chess_SetupBoard
 4654              	.LVL526:
2284:u8glib/chessengine.c **** 	  lrc_obj.orientation = 0;
 4655              		.loc 1 2284 0
 4656 0050 0022     		movs	r2, #0
 4657 0052 664B     		ldr	r3, .L389+16
 4658 0054 83F84520 		strb	r2, [r3, #69]
2285:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_SELECT_START;
 4659              		.loc 1 2285 0
 4660 0058 0122     		movs	r2, #1
 4661 005a 624B     		ldr	r3, .L389+8
 4662 005c 1A70     		strb	r2, [r3]
 4663 005e 10BD     		pop	{r4, pc}
 4664              	.L375:
2286:u8glib/chessengine.c **** 	}
2287:u8glib/chessengine.c **** 	else if ( mnu_pos == 1 )
 4665              		.loc 1 2287 0
 4666 0060 012B     		cmp	r3, #1
 4667 0062 09D1     		bne	.L376
2288:u8glib/chessengine.c **** 	{
2289:u8glib/chessengine.c ****           chess_SetupBoard();
 4668              		.loc 1 2289 0
 4669 0064 FFF7FEFF 		bl	chess_SetupBoard
 4670              	.LVL527:
2290:u8glib/chessengine.c **** 	  lrc_obj.orientation = 1;
 4671              		.loc 1 2290 0
 4672 0068 0122     		movs	r2, #1
 4673 006a 604B     		ldr	r3, .L389+16
 4674 006c 83F84520 		strb	r2, [r3, #69]
2291:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_THINKING;
 4675              		.loc 1 2291 0
 4676 0070 0422     		movs	r2, #4
 4677 0072 5C4B     		ldr	r3, .L389+8
 4678 0074 1A70     		strb	r2, [r3]
 4679 0076 10BD     		pop	{r4, pc}
 4680              	.L376:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 127


2292:u8glib/chessengine.c **** 	}
2293:u8glib/chessengine.c **** 	else if ( mnu_pos == 2 )
 4681              		.loc 1 2293 0
 4682 0078 022B     		cmp	r3, #2
 4683 007a 14D1     		bne	.L377
2294:u8glib/chessengine.c **** 	{
2295:u8glib/chessengine.c **** 	  if ( lrc_obj.ply_count >= 2 )
 4684              		.loc 1 2295 0
 4685 007c 5B4B     		ldr	r3, .L389+16
 4686 007e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4687 0080 012B     		cmp	r3, #1
 4688 0082 0CD9     		bls	.L378
2296:u8glib/chessengine.c **** 	  {
2297:u8glib/chessengine.c **** 	    cu_UndoHalfMove();
 4689              		.loc 1 2297 0
 4690 0084 FFF7FEFF 		bl	cu_UndoHalfMove
 4691              	.LVL528:
2298:u8glib/chessengine.c **** 	    cu_UndoHalfMove();
 4692              		.loc 1 2298 0
 4693 0088 FFF7FEFF 		bl	cu_UndoHalfMove
 4694              	.LVL529:
2299:u8glib/chessengine.c **** 	    lrc_obj.ply_count-=2;
 4695              		.loc 1 2299 0
 4696 008c 574A     		ldr	r2, .L389+16
 4697 008e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 4698 0090 023B     		subs	r3, r3, #2
 4699 0092 DBB2     		uxtb	r3, r3
 4700 0094 1370     		strb	r3, [r2]
2300:u8glib/chessengine.c **** 	    if ( lrc_obj.ply_count == 0 )
 4701              		.loc 1 2300 0
 4702 0096 13B9     		cbnz	r3, .L378
2301:u8glib/chessengine.c **** 	      mnu_pos = 0;
 4703              		.loc 1 2301 0
 4704 0098 0022     		movs	r2, #0
 4705 009a 534B     		ldr	r3, .L389+12
 4706 009c 1A70     		strb	r2, [r3]
 4707              	.L378:
2302:u8glib/chessengine.c **** 	  }
2303:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_SELECT_START;
 4708              		.loc 1 2303 0
 4709 009e 0122     		movs	r2, #1
 4710 00a0 504B     		ldr	r3, .L389+8
 4711 00a2 1A70     		strb	r2, [r3]
 4712 00a4 10BD     		pop	{r4, pc}
 4713              	.L377:
2304:u8glib/chessengine.c **** 	}
2305:u8glib/chessengine.c **** 	else if ( mnu_pos == 3 )
 4714              		.loc 1 2305 0
 4715 00a6 032B     		cmp	r3, #3
 4716 00a8 40F09680 		bne	.L364
2306:u8glib/chessengine.c **** 	{
2307:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_SELECT_START;
 4717              		.loc 1 2307 0
 4718 00ac 0122     		movs	r2, #1
 4719 00ae 4D4B     		ldr	r3, .L389+8
 4720 00b0 1A70     		strb	r2, [r3]
 4721 00b2 10BD     		pop	{r4, pc}
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 128


 4722              	.LVL530:
 4723              	.L370:
2308:u8glib/chessengine.c **** 	}
2309:u8glib/chessengine.c ****       }
2310:u8glib/chessengine.c ****       break;
2311:u8glib/chessengine.c ****     case CHESS_STATE_SELECT_START:
2312:u8glib/chessengine.c ****       chess_ClearMarks();
 4724              		.loc 1 2312 0
 4725 00b4 FFF7FEFF 		bl	chess_ClearMarks
 4726              	.LVL531:
2313:u8glib/chessengine.c ****       chess_MarkMovable();
 4727              		.loc 1 2313 0
 4728 00b8 FFF7FEFF 		bl	chess_MarkMovable
 4729              	.LVL532:
2314:u8glib/chessengine.c ****       chess_source_pos = chess_GetNextMarked(255, 0);
 4730              		.loc 1 2314 0
 4731 00bc 0021     		movs	r1, #0
 4732 00be FF20     		movs	r0, #255
 4733 00c0 FFF7FEFF 		bl	chess_GetNextMarked
 4734              	.LVL533:
 4735 00c4 4A4B     		ldr	r3, .L389+20
 4736 00c6 1870     		strb	r0, [r3]
2315:u8glib/chessengine.c ****       chess_target_pos = ILLEGAL_POSITION;
 4737              		.loc 1 2315 0
 4738 00c8 FF22     		movs	r2, #255
 4739 00ca 4A4B     		ldr	r3, .L389+24
 4740 00cc 1A70     		strb	r2, [r3]
2316:u8glib/chessengine.c ****       chess_state = CHESS_STATE_SELECT_PIECE;
 4741              		.loc 1 2316 0
 4742 00ce 0222     		movs	r2, #2
 4743 00d0 444B     		ldr	r3, .L389+8
 4744 00d2 1A70     		strb	r2, [r3]
2317:u8glib/chessengine.c ****       break;
 4745              		.loc 1 2317 0
 4746 00d4 10BD     		pop	{r4, pc}
 4747              	.LVL534:
 4748              	.L371:
2318:u8glib/chessengine.c ****       
2319:u8glib/chessengine.c ****     case CHESS_STATE_SELECT_PIECE:
2320:u8glib/chessengine.c ****       if ( chess_key_cmd == CHESS_KEY_NEXT )
 4749              		.loc 1 2320 0
 4750 00d6 424B     		ldr	r3, .L389+4
 4751 00d8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4752 00da 012B     		cmp	r3, #1
 4753 00dc 06D1     		bne	.L379
2321:u8glib/chessengine.c ****       {
2322:u8glib/chessengine.c **** 	chess_source_pos = chess_GetNextMarked(chess_source_pos, 0);
 4754              		.loc 1 2322 0
 4755 00de 444C     		ldr	r4, .L389+20
 4756 00e0 0021     		movs	r1, #0
 4757 00e2 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4758              	.LVL535:
 4759 00e4 FFF7FEFF 		bl	chess_GetNextMarked
 4760              	.LVL536:
 4761 00e8 2070     		strb	r0, [r4]
 4762 00ea 10BD     		pop	{r4, pc}
 4763              	.LVL537:
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 129


 4764              	.L379:
2323:u8glib/chessengine.c ****       }
2324:u8glib/chessengine.c ****       else if ( chess_key_cmd == CHESS_KEY_PREV )
 4765              		.loc 1 2324 0
 4766 00ec 022B     		cmp	r3, #2
 4767 00ee 06D1     		bne	.L380
2325:u8glib/chessengine.c ****       {
2326:u8glib/chessengine.c **** 	chess_source_pos = chess_GetNextMarked(chess_source_pos, 1);
 4768              		.loc 1 2326 0
 4769 00f0 3F4C     		ldr	r4, .L389+20
 4770 00f2 0121     		movs	r1, #1
 4771 00f4 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4772              	.LVL538:
 4773 00f6 FFF7FEFF 		bl	chess_GetNextMarked
 4774              	.LVL539:
 4775 00fa 2070     		strb	r0, [r4]
 4776 00fc 10BD     		pop	{r4, pc}
 4777              	.LVL540:
 4778              	.L380:
2327:u8glib/chessengine.c ****       }
2328:u8glib/chessengine.c ****       else if ( chess_key_cmd == CHESS_KEY_SELECT )
 4779              		.loc 1 2328 0
 4780 00fe 032B     		cmp	r3, #3
 4781 0100 6AD1     		bne	.L364
2329:u8glib/chessengine.c ****       {
2330:u8glib/chessengine.c **** 	if ( chess_source_pos == 255 )
 4782              		.loc 1 2330 0
 4783 0102 3B4B     		ldr	r3, .L389+20
 4784 0104 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4785 0106 FF2B     		cmp	r3, #255
 4786 0108 03D1     		bne	.L381
2331:u8glib/chessengine.c **** 	{
2332:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_MENU;
 4787              		.loc 1 2332 0
 4788 010a 0022     		movs	r2, #0
 4789 010c 354B     		ldr	r3, .L389+8
 4790 010e 1A70     		strb	r2, [r3]
 4791 0110 10BD     		pop	{r4, pc}
 4792              	.L381:
2333:u8glib/chessengine.c **** 	}
2334:u8glib/chessengine.c **** 	else
2335:u8glib/chessengine.c **** 	{
2336:u8glib/chessengine.c **** 	  chess_ClearMarks();
 4793              		.loc 1 2336 0
 4794 0112 FFF7FEFF 		bl	chess_ClearMarks
 4795              	.LVL541:
2337:u8glib/chessengine.c **** 	  chess_MarkTargetMoves(chess_source_pos);
 4796              		.loc 1 2337 0
 4797 0116 364B     		ldr	r3, .L389+20
 4798 0118 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 4799 011a FFF7FEFF 		bl	chess_MarkTargetMoves
 4800              	.LVL542:
2338:u8glib/chessengine.c **** 	  chess_target_pos = chess_GetNextMarked(255, 0);
 4801              		.loc 1 2338 0
 4802 011e 0021     		movs	r1, #0
 4803 0120 FF20     		movs	r0, #255
 4804 0122 FFF7FEFF 		bl	chess_GetNextMarked
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 130


 4805              	.LVL543:
 4806 0126 334B     		ldr	r3, .L389+24
 4807 0128 1870     		strb	r0, [r3]
2339:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_SELECT_TARGET_POS;      
 4808              		.loc 1 2339 0
 4809 012a 0322     		movs	r2, #3
 4810 012c 2D4B     		ldr	r3, .L389+8
 4811 012e 1A70     		strb	r2, [r3]
 4812 0130 10BD     		pop	{r4, pc}
 4813              	.LVL544:
 4814              	.L372:
2340:u8glib/chessengine.c **** 	}
2341:u8glib/chessengine.c ****       }
2342:u8glib/chessengine.c ****       break;
2343:u8glib/chessengine.c ****     case CHESS_STATE_SELECT_TARGET_POS:
2344:u8glib/chessengine.c ****       if ( chess_key_cmd == CHESS_KEY_NEXT )
 4815              		.loc 1 2344 0
 4816 0132 2B4B     		ldr	r3, .L389+4
 4817 0134 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4818 0136 012B     		cmp	r3, #1
 4819 0138 06D1     		bne	.L382
2345:u8glib/chessengine.c ****       {
2346:u8glib/chessengine.c **** 	chess_target_pos = chess_GetNextMarked(chess_target_pos, 0);
 4820              		.loc 1 2346 0
 4821 013a 2E4C     		ldr	r4, .L389+24
 4822 013c 0021     		movs	r1, #0
 4823 013e 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4824              	.LVL545:
 4825 0140 FFF7FEFF 		bl	chess_GetNextMarked
 4826              	.LVL546:
 4827 0144 2070     		strb	r0, [r4]
 4828 0146 10BD     		pop	{r4, pc}
 4829              	.LVL547:
 4830              	.L382:
2347:u8glib/chessengine.c ****       }
2348:u8glib/chessengine.c ****       else if ( chess_key_cmd == CHESS_KEY_PREV )
 4831              		.loc 1 2348 0
 4832 0148 022B     		cmp	r3, #2
 4833 014a 06D1     		bne	.L383
2349:u8glib/chessengine.c ****       {
2350:u8glib/chessengine.c **** 	chess_target_pos = chess_GetNextMarked(chess_target_pos, 1);
 4834              		.loc 1 2350 0
 4835 014c 294C     		ldr	r4, .L389+24
 4836 014e 0121     		movs	r1, #1
 4837 0150 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4838              	.LVL548:
 4839 0152 FFF7FEFF 		bl	chess_GetNextMarked
 4840              	.LVL549:
 4841 0156 2070     		strb	r0, [r4]
 4842 0158 10BD     		pop	{r4, pc}
 4843              	.LVL550:
 4844              	.L383:
2351:u8glib/chessengine.c ****       }
2352:u8glib/chessengine.c ****       else if ( chess_key_cmd == CHESS_KEY_BACK )
 4845              		.loc 1 2352 0
 4846 015a 042B     		cmp	r3, #4
 4847 015c 0AD1     		bne	.L384
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 131


2353:u8glib/chessengine.c ****       {
2354:u8glib/chessengine.c **** 	chess_ClearMarks();
 4848              		.loc 1 2354 0
 4849 015e FFF7FEFF 		bl	chess_ClearMarks
 4850              	.LVL551:
2355:u8glib/chessengine.c **** 	chess_MarkMovable();
 4851              		.loc 1 2355 0
 4852 0162 FFF7FEFF 		bl	chess_MarkMovable
 4853              	.LVL552:
2356:u8glib/chessengine.c **** 	chess_target_pos = ILLEGAL_POSITION;
 4854              		.loc 1 2356 0
 4855 0166 FF22     		movs	r2, #255
 4856 0168 224B     		ldr	r3, .L389+24
 4857 016a 1A70     		strb	r2, [r3]
2357:u8glib/chessengine.c **** 	chess_state = CHESS_STATE_SELECT_PIECE;
 4858              		.loc 1 2357 0
 4859 016c 0222     		movs	r2, #2
 4860 016e 1D4B     		ldr	r3, .L389+8
 4861 0170 1A70     		strb	r2, [r3]
 4862 0172 10BD     		pop	{r4, pc}
 4863              	.LVL553:
 4864              	.L384:
2358:u8glib/chessengine.c ****       }
2359:u8glib/chessengine.c ****       else if ( chess_key_cmd == CHESS_KEY_SELECT )
 4865              		.loc 1 2359 0
 4866 0174 032B     		cmp	r3, #3
 4867 0176 2FD1     		bne	.L364
2360:u8glib/chessengine.c ****       {
2361:u8glib/chessengine.c **** 	chess_ManualMove(chess_source_pos, chess_target_pos);
 4868              		.loc 1 2361 0
 4869 0178 1E4B     		ldr	r3, .L389+24
 4870 017a 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 4871 017c 1C4B     		ldr	r3, .L389+20
 4872 017e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 4873              	.LVL554:
 4874 0180 FFF7FEFF 		bl	chess_ManualMove
 4875              	.LVL555:
2362:u8glib/chessengine.c **** 	if ( lrc_obj.is_game_end != 0 )
 4876              		.loc 1 2362 0
 4877 0184 194B     		ldr	r3, .L389+16
 4878 0186 93F84730 		ldrb	r3, [r3, #71]	@ zero_extendqisi2
 4879 018a 1BB1     		cbz	r3, .L385
2363:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_GAME_END;
 4880              		.loc 1 2363 0
 4881 018c 0522     		movs	r2, #5
 4882 018e 154B     		ldr	r3, .L389+8
 4883 0190 1A70     		strb	r2, [r3]
 4884 0192 02E0     		b	.L386
 4885              	.L385:
2364:u8glib/chessengine.c **** 	else
2365:u8glib/chessengine.c **** 	  chess_state = CHESS_STATE_THINKING;
 4886              		.loc 1 2365 0
 4887 0194 0422     		movs	r2, #4
 4888 0196 134B     		ldr	r3, .L389+8
 4889 0198 1A70     		strb	r2, [r3]
 4890              	.L386:
2366:u8glib/chessengine.c **** 	/* clear marks as some kind of feedback to the user... it simply looks better */
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 132


2367:u8glib/chessengine.c **** 	chess_source_pos = ILLEGAL_POSITION;
 4891              		.loc 1 2367 0
 4892 019a FF23     		movs	r3, #255
 4893 019c 144A     		ldr	r2, .L389+20
 4894 019e 1370     		strb	r3, [r2]
2368:u8glib/chessengine.c **** 	chess_target_pos = ILLEGAL_POSITION;
 4895              		.loc 1 2368 0
 4896 01a0 144A     		ldr	r2, .L389+24
 4897 01a2 1370     		strb	r3, [r2]
2369:u8glib/chessengine.c **** 	chess_ClearMarks();
 4898              		.loc 1 2369 0
 4899 01a4 FFF7FEFF 		bl	chess_ClearMarks
 4900              	.LVL556:
 4901 01a8 10BD     		pop	{r4, pc}
 4902              	.LVL557:
 4903              	.L373:
2370:u8glib/chessengine.c ****       }
2371:u8glib/chessengine.c ****       break;
2372:u8glib/chessengine.c ****     case CHESS_STATE_THINKING:
2373:u8glib/chessengine.c ****       chess_ComputerMove(2);
 4904              		.loc 1 2373 0
 4905 01aa 0220     		movs	r0, #2
 4906              	.LVL558:
 4907 01ac FFF7FEFF 		bl	chess_ComputerMove
 4908              	.LVL559:
2374:u8glib/chessengine.c ****       if ( lrc_obj.is_game_end != 0 )
 4909              		.loc 1 2374 0
 4910 01b0 0E4B     		ldr	r3, .L389+16
 4911 01b2 93F84730 		ldrb	r3, [r3, #71]	@ zero_extendqisi2
 4912 01b6 1BB1     		cbz	r3, .L387
2375:u8glib/chessengine.c **** 	chess_state = CHESS_STATE_GAME_END;
 4913              		.loc 1 2375 0
 4914 01b8 0522     		movs	r2, #5
 4915 01ba 0A4B     		ldr	r3, .L389+8
 4916 01bc 1A70     		strb	r2, [r3]
 4917 01be 10BD     		pop	{r4, pc}
 4918              	.L387:
2376:u8glib/chessengine.c ****       else
2377:u8glib/chessengine.c **** 	chess_state = CHESS_STATE_SELECT_START;
 4919              		.loc 1 2377 0
 4920 01c0 0122     		movs	r2, #1
 4921 01c2 084B     		ldr	r3, .L389+8
 4922 01c4 1A70     		strb	r2, [r3]
 4923 01c6 10BD     		pop	{r4, pc}
 4924              	.LVL560:
 4925              	.L374:
2378:u8glib/chessengine.c ****       break;
2379:u8glib/chessengine.c ****     case CHESS_STATE_GAME_END:
2380:u8glib/chessengine.c ****       if ( chess_key_cmd != CHESS_KEY_NONE )
 4926              		.loc 1 2380 0
 4927 01c8 054B     		ldr	r3, .L389+4
 4928 01ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4929 01cc 23B1     		cbz	r3, .L364
2381:u8glib/chessengine.c ****       {
2382:u8glib/chessengine.c **** 	chess_state = CHESS_STATE_MENU;  
 4930              		.loc 1 2382 0
 4931 01ce 0022     		movs	r2, #0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 133


 4932 01d0 044B     		ldr	r3, .L389+8
 4933 01d2 1A70     		strb	r2, [r3]
2383:u8glib/chessengine.c **** 	chess_SetupBoard();
 4934              		.loc 1 2383 0
 4935 01d4 FFF7FEFF 		bl	chess_SetupBoard
 4936              	.LVL561:
 4937              	.L364:
 4938 01d8 10BD     		pop	{r4, pc}
 4939              	.L390:
 4940 01da 00BF     		.align	2
 4941              	.L389:
 4942 01dc 00000000 		.word	.LANCHOR20
 4943 01e0 00000000 		.word	.LANCHOR19
 4944 01e4 00000000 		.word	.LANCHOR18
 4945 01e8 00000000 		.word	.LANCHOR10
 4946 01ec 00000000 		.word	lrc_obj
 4947 01f0 00000000 		.word	.LANCHOR16
 4948 01f4 00000000 		.word	.LANCHOR17
 4949              		.cfi_endproc
 4950              	.LFE57:
 4952              		.global	chess_boxoffset
 4953              		.global	chess_boxsize
 4954              		.comm	chess_low_edge,1,1
 4955              		.global	chess_black_pieces_bm
 4956              		.global	chess_pieces_body_bm
 4957              		.global	chess_target_pos
 4958              		.global	chess_source_pos
 4959              		.global	chess_state
 4960              		.global	chess_key_cmd
 4961              		.global	chess_key_code
 4962              		.global	mnu_max
 4963              		.global	mnu_pos
 4964              		.global	mnu_list
 4965              		.global	mnu_title
 4966              		.global	chess_piece_to_char
 4967              		.global	ce_pos_weight
 4968              		.global	ce_piece_weight
 4969              		.comm	lrc_obj,248,4
 4970              		.comm	lrc_u8g,4,4
 4971              		.section	.bss.chess_key_code,"aw",%nobits
 4972              		.set	.LANCHOR20,. + 0
 4975              	chess_key_code:
 4976 0000 00       		.space	1
 4977              		.section	.data.chess_piece_to_char,"aw",%progbits
 4978              		.align	2
 4979              		.set	.LANCHOR3,. + 0
 4982              	chess_piece_to_char:
 4983 0000 4E425251 		.ascii	"NBRQK\000"
 4983      4B00
 4984              		.section	.data.ce_piece_weight,"aw",%progbits
 4985              		.align	2
 4986              		.set	.LANCHOR0,. + 0
 4989              	ce_piece_weight:
 4990 0000 00       		.byte	0
 4991 0001 01       		.byte	1
 4992 0002 03       		.byte	3
 4993 0003 03       		.byte	3
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 134


 4994 0004 05       		.byte	5
 4995 0005 09       		.byte	9
 4996 0006 00       		.byte	0
 4997              		.section	.rodata.ce_dir_offset_queen,"a",%progbits
 4998              		.align	2
 4999              		.set	.LANCHOR6,. + 0
 5002              	ce_dir_offset_queen:
 5003 0000 01       		.byte	1
 5004 0001 10       		.byte	16
 5005 0002 F0       		.byte	-16
 5006 0003 FF       		.byte	-1
 5007 0004 0F       		.byte	15
 5008 0005 11       		.byte	17
 5009 0006 EF       		.byte	-17
 5010 0007 F1       		.byte	-15
 5011 0008 00       		.byte	0
 5012              		.section	.data.mnu_list,"aw",%progbits
 5013              		.align	2
 5014              		.set	.LANCHOR11,. + 0
 5017              	mnu_list:
 5018 0000 2C000000 		.word	.LC4
 5019 0004 40000000 		.word	.LC5
 5020 0008 54000000 		.word	.LC6
 5021 000c 60000000 		.word	.LC7
 5022              		.section	.bss.mnu_pos,"aw",%nobits
 5023              		.set	.LANCHOR10,. + 0
 5026              	mnu_pos:
 5027 0000 00       		.space	1
 5028              		.section	.data.ce_pos_weight,"aw",%progbits
 5029              		.align	2
 5030              		.set	.LANCHOR1,. + 0
 5033              	ce_pos_weight:
 5034 0000 00       		.byte	0
 5035 0001 01       		.byte	1
 5036 0002 01       		.byte	1
 5037 0003 02       		.byte	2
 5038 0004 02       		.byte	2
 5039 0005 01       		.byte	1
 5040 0006 01       		.byte	1
 5041 0007 00       		.byte	0
 5042              		.section	.rodata.ce_dir_offset_knight,"a",%progbits
 5043              		.align	2
 5044              		.set	.LANCHOR7,. + 0
 5047              	ce_dir_offset_knight:
 5048 0000 0E       		.byte	14
 5049 0001 F2       		.byte	-14
 5050 0002 12       		.byte	18
 5051 0003 EE       		.byte	-18
 5052 0004 1F       		.byte	31
 5053 0005 E1       		.byte	-31
 5054 0006 21       		.byte	33
 5055 0007 DF       		.byte	-33
 5056 0008 00       		.byte	0
 5057              		.section	.data.chess_target_pos,"aw",%progbits
 5058              		.set	.LANCHOR17,. + 0
 5061              	chess_target_pos:
 5062 0000 FF       		.byte	-1
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 135


 5063              		.section	.rodata.chess_black_pieces_bm,"a",%progbits
 5064              		.align	2
 5065              		.set	.LANCHOR13,. + 0
 5068              	chess_black_pieces_bm:
 5069 0000 00       		.byte	0
 5070 0001 00       		.byte	0
 5071 0002 18       		.byte	24
 5072 0003 3C       		.byte	60
 5073 0004 3C       		.byte	60
 5074 0005 18       		.byte	24
 5075 0006 3C       		.byte	60
 5076 0007 00       		.byte	0
 5077 0008 00       		.byte	0
 5078 0009 1C       		.byte	28
 5079 000a 3E       		.byte	62
 5080 000b 7E       		.byte	126
 5081 000c 6E       		.byte	110
 5082 000d 0E       		.byte	14
 5083 000e 1F       		.byte	31
 5084 000f 1F       		.byte	31
 5085 0010 00       		.byte	0
 5086 0011 1C       		.byte	28
 5087 0012 2E       		.byte	46
 5088 0013 3E       		.byte	62
 5089 0014 3E       		.byte	62
 5090 0015 1C       		.byte	28
 5091 0016 08       		.byte	8
 5092 0017 7F       		.byte	127
 5093 0018 00       		.byte	0
 5094 0019 55       		.byte	85
 5095 001a 7F       		.byte	127
 5096 001b 3E       		.byte	62
 5097 001c 3E       		.byte	62
 5098 001d 3E       		.byte	62
 5099 001e 3E       		.byte	62
 5100 001f 7F       		.byte	127
 5101 0020 00       		.byte	0
 5102 0021 55       		.byte	85
 5103 0022 3E       		.byte	62
 5104 0023 3E       		.byte	62
 5105 0024 1C       		.byte	28
 5106 0025 3E       		.byte	62
 5107 0026 1C       		.byte	28
 5108 0027 7F       		.byte	127
 5109 0028 08       		.byte	8
 5110 0029 1C       		.byte	28
 5111 002a 49       		.byte	73
 5112 002b 7F       		.byte	127
 5113 002c 7F       		.byte	127
 5114 002d 3E       		.byte	62
 5115 002e 1C       		.byte	28
 5116 002f 7F       		.byte	127
 5117              		.section	.data.mnu_max,"aw",%progbits
 5118              		.set	.LANCHOR8,. + 0
 5121              	mnu_max:
 5122 0000 04       		.byte	4
 5123              		.section	.bss.chess_state,"aw",%nobits
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 136


 5124              		.set	.LANCHOR18,. + 0
 5127              	chess_state:
 5128 0000 00       		.space	1
 5129              		.section	.rodata.str1.4,"aMS",%progbits,1
 5130              		.align	2
 5131              	.LC0:
 5132 0000 4F707469 		.ascii	"Options\000"
 5132      6F6E7300 
 5133              	.LC1:
 5134 0008 426C6163 		.ascii	"Black wins\000"
 5134      6B207769 
 5134      6E7300
 5135 0013 00       		.space	1
 5136              	.LC2:
 5137 0014 57686974 		.ascii	"White wins\000"
 5137      65207769 
 5137      6E7300
 5138 001f 00       		.space	1
 5139              	.LC3:
 5140 0020 5374616C 		.ascii	"Stalemate\000"
 5140      656D6174 
 5140      6500
 5141 002a 0000     		.space	2
 5142              	.LC4:
 5143 002c 4E657720 		.ascii	"New Game (White)\000"
 5143      47616D65 
 5143      20285768 
 5143      69746529 
 5143      00
 5144 003d 000000   		.space	3
 5145              	.LC5:
 5146 0040 4E657720 		.ascii	"New Game (Black)\000"
 5146      47616D65 
 5146      2028426C 
 5146      61636B29 
 5146      00
 5147 0051 000000   		.space	3
 5148              	.LC6:
 5149 0054 556E646F 		.ascii	"Undo Move\000"
 5149      204D6F76 
 5149      6500
 5150 005e 0000     		.space	2
 5151              	.LC7:
 5152 0060 52657475 		.ascii	"Return\000"
 5152      726E00
 5153 0067 00       		.space	1
 5154              	.LC8:
 5155 0068 4C697474 		.ascii	"Little Rook Chess\000"
 5155      6C652052 
 5155      6F6F6B20 
 5155      43686573 
 5155      7300
 5156              		.section	.data.mnu_title,"aw",%progbits
 5157              		.align	2
 5158              		.set	.LANCHOR9,. + 0
 5161              	mnu_title:
 5162 0000 68000000 		.word	.LC8
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 137


 5163              		.section	.data.chess_boxsize,"aw",%progbits
 5164              		.set	.LANCHOR12,. + 0
 5167              	chess_boxsize:
 5168 0000 08       		.byte	8
 5169              		.section	.rodata.ce_dir_offset_bishop,"a",%progbits
 5170              		.align	2
 5171              		.set	.LANCHOR5,. + 0
 5174              	ce_dir_offset_bishop:
 5175 0000 0F       		.byte	15
 5176 0001 11       		.byte	17
 5177 0002 EF       		.byte	-17
 5178 0003 F1       		.byte	-15
 5179 0004 00       		.byte	0
 5180              		.section	.data.chess_source_pos,"aw",%progbits
 5181              		.set	.LANCHOR16,. + 0
 5184              	chess_source_pos:
 5185 0000 FF       		.byte	-1
 5186              		.section	.bss.buf.6076,"aw",%nobits
 5187              		.align	2
 5188              		.set	.LANCHOR2,. + 0
 5191              	buf.6076:
 5192 0000 00000000 		.space	7
 5192      000000
 5193              		.section	.bss.chess_key_cmd,"aw",%nobits
 5194              		.set	.LANCHOR19,. + 0
 5197              	chess_key_cmd:
 5198 0000 00       		.space	1
 5199              		.section	.rodata.chess_pieces_body_bm,"a",%progbits
 5200              		.align	2
 5201              		.set	.LANCHOR15,. + 0
 5204              	chess_pieces_body_bm:
 5205 0000 00       		.byte	0
 5206 0001 00       		.byte	0
 5207 0002 00       		.byte	0
 5208 0003 18       		.byte	24
 5209 0004 18       		.byte	24
 5210 0005 00       		.byte	0
 5211 0006 00       		.byte	0
 5212 0007 00       		.byte	0
 5213 0008 00       		.byte	0
 5214 0009 00       		.byte	0
 5215 000a 1C       		.byte	28
 5216 000b 2C       		.byte	44
 5217 000c 04       		.byte	4
 5218 000d 04       		.byte	4
 5219 000e 0E       		.byte	14
 5220 000f 00       		.byte	0
 5221 0010 00       		.byte	0
 5222 0011 00       		.byte	0
 5223 0012 1C       		.byte	28
 5224 0013 1C       		.byte	28
 5225 0014 1C       		.byte	28
 5226 0015 08       		.byte	8
 5227 0016 00       		.byte	0
 5228 0017 00       		.byte	0
 5229 0018 00       		.byte	0
 5230 0019 00       		.byte	0
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 138


 5231 001a 00       		.byte	0
 5232 001b 1C       		.byte	28
 5233 001c 1C       		.byte	28
 5234 001d 1C       		.byte	28
 5235 001e 1C       		.byte	28
 5236 001f 00       		.byte	0
 5237 0020 00       		.byte	0
 5238 0021 00       		.byte	0
 5239 0022 14       		.byte	20
 5240 0023 1C       		.byte	28
 5241 0024 08       		.byte	8
 5242 0025 1C       		.byte	28
 5243 0026 08       		.byte	8
 5244 0027 00       		.byte	0
 5245 0028 00       		.byte	0
 5246 0029 00       		.byte	0
 5247 002a 00       		.byte	0
 5248 002b 08       		.byte	8
 5249 002c 3E       		.byte	62
 5250 002d 1C       		.byte	28
 5251 002e 08       		.byte	8
 5252 002f 00       		.byte	0
 5253              		.section	.data.chess_boxoffset,"aw",%progbits
 5254              		.set	.LANCHOR14,. + 0
 5257              	chess_boxoffset:
 5258 0000 01       		.byte	1
 5259              		.section	.rodata.ce_dir_offset_rook,"a",%progbits
 5260              		.align	2
 5261              		.set	.LANCHOR4,. + 0
 5264              	ce_dir_offset_rook:
 5265 0000 01       		.byte	1
 5266 0001 10       		.byte	16
 5267 0002 F0       		.byte	-16
 5268 0003 FF       		.byte	-1
 5269 0004 00       		.byte	0
 5270              		.text
 5271              	.Letext0:
 5272              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\5.4 2016q3\\arm-none-eabi\\include\\mach
 5273              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\5.4 2016q3\\arm-none-eabi\\include\\sys\
 5274              		.file 4 "u8glib/u8g.h"
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 139


DEFINED SYMBOLS
                            *ABS*:00000000 chessengine.c
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:22     .text.cu_gpos2bpos:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:26     .text.cu_gpos2bpos:00000000 cu_gpos2bpos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:50     .text.cp_Construct:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:54     .text.cp_Construct:00000000 cp_Construct
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:75     .text.cp_GetPiece:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:79     .text.cp_GetPiece:00000000 cp_GetPiece
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:95     .text.cp_GetColor:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:99     .text.cp_GetColor:00000000 cp_GetColor
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:115    .text.cu_add_pos:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:119    .text.cu_add_pos:00000000 cu_add_pos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:144    .text.stack_GetCurrElement:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:149    .text.stack_GetCurrElement:00000000 stack_GetCurrElement
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:163    .text.stack_GetCurrElement:00000008 $d
                            *COM*:000000f8 lrc_obj
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:168    .text.stack_Push:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:173    .text.stack_Push:00000000 stack_Push
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:224    .text.stack_Push:00000038 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:229    .text.stack_Pop:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:234    .text.stack_Pop:00000000 stack_Pop
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:255    .text.stack_Pop:0000001c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:260    .text.stack_InitCurrElement:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:265    .text.stack_InitCurrElement:00000000 stack_InitCurrElement
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:292    .text.stack_Init:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:297    .text.stack_Init:00000000 stack_Init
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:338    .text.stack_Init:00000034 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:343    .text.stack_SetMove:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:348    .text.stack_SetMove:00000000 stack_SetMove
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:384    .text.cu_NextPos:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:389    .text.cu_NextPos:00000000 cu_NextPos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:425    .text.cu_PrevPos:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:430    .text.cu_PrevPos:00000000 cu_PrevPos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:467    .text.cp_GetFromBoard:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:472    .text.cp_GetFromBoard:00000000 cp_GetFromBoard
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:495    .text.cp_GetFromBoard:00000010 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:500    .text.cp_SetOnBoard:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:505    .text.cp_SetOnBoard:00000000 cp_SetOnBoard
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:528    .text.cp_SetOnBoard:00000010 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:533    .text.cu_IsIllegalPosition:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:538    .text.cu_IsIllegalPosition:00000000 cu_IsIllegalPosition
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:582    .text.ce_Eval:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:587    .text.ce_Eval:00000000 ce_Eval
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:764    .text.ce_Eval:000000cc $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:771    .text.cu_ClearMoveHistory:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:776    .text.cu_ClearMoveHistory:00000000 cu_ClearMoveHistory
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:791    .text.cu_ClearMoveHistory:00000008 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:796    .text.cu_ClearBoard:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:801    .text.cu_ClearBoard:00000000 cu_ClearBoard
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:858    .text.cu_ClearBoard:00000040 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:863    .text.chess_SetupBoardTest01:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:868    .text.chess_SetupBoardTest01:00000000 chess_SetupBoardTest01
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:917    .text.chess_SetupBoardTest01:00000044 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:922    .text.chess_SetupBoard:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:927    .text.chess_SetupBoard:00000000 chess_SetupBoard
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1065   .text.chess_SetupBoard:000000c8 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1070   .text.cu_ReduceHistoryByFullMove:00000000 $t
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 140


C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1075   .text.cu_ReduceHistoryByFullMove:00000000 cu_ReduceHistoryByFullMove
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1140   .text.cu_ReduceHistoryByFullMove:00000048 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1145   .text.cu_UndoHalfMove:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1150   .text.cu_UndoHalfMove:00000000 cu_UndoHalfMove
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1224   .text.cu_UndoHalfMove:00000058 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1229   .text.cu_PushHalfMove:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1234   .text.cu_PushHalfMove:00000000 cu_PushHalfMove
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1271   .text.cu_PushHalfMove:0000002c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1276   .text.cu_GetHalfMoveStr:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1281   .text.cu_GetHalfMoveStr:00000000 cu_GetHalfMoveStr
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1374   .text.cu_GetHalfMoveStr:0000005c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1381   .text.cu_Move:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1386   .text.cu_Move:00000000 cu_Move
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1714   .text.cu_Move:000001f8 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1719   .text.ce_FindPieceByStep:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1724   .text.ce_FindPieceByStep:00000000 ce_FindPieceByStep
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1809   .text.ce_FindPieceByStep:00000060 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1815   .text.ce_FindPawnPiece:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1820   .text.ce_FindPawnPiece:00000000 ce_FindPawnPiece
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1879   .text.ce_FindPawnPiece:00000040 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1884   .text.ce_CalculatePositionWeight:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1889   .text.ce_CalculatePositionWeight:00000000 ce_CalculatePositionWeight
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1981   .text.ce_CalculatePositionWeight:0000008c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1990   .text.ce_GetPositionAttackWeight:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:1995   .text.ce_GetPositionAttackWeight:00000000 ce_GetPositionAttackWeight
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2020   .text.ce_GetPositionAttackWeight:00000014 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2025   .text.cu_IsKingCastling:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2030   .text.cu_IsKingCastling:00000000 cu_IsKingCastling
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2119   .text.cu_IsKingCastling:00000064 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2124   .text.ce_GetPositionAttackCount:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2129   .text.ce_GetPositionAttackCount:00000000 ce_GetPositionAttackCount
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2154   .text.ce_GetPositionAttackCount:00000014 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2159   .text.ce_LoopPieces:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2164   .text.ce_LoopPieces:00000000 ce_LoopPieces
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2210   .text.ce_LoopPieces:00000032 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2216   .text.ce_LoopPieces:00000038 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2782   .text.ce_LoopPawn:00000000 ce_LoopPawn
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2574   .text.ce_LoopKnight:00000000 ce_LoopKnight
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2514   .text.ce_LoopBishop:00000000 ce_LoopBishop
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2484   .text.ce_LoopRook:00000000 ce_LoopRook
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2544   .text.ce_LoopQueen:00000000 ce_LoopQueen
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2604   .text.ce_LoopKing:00000000 ce_LoopKing
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2266   .text.ce_LoopRecur:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2271   .text.ce_LoopRecur:00000000 ce_LoopRecur
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2408   .text.ce_LoopRecur:000000ac $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2413   .text.ce_LoopDirsSingleMultiStep:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2418   .text.ce_LoopDirsSingleMultiStep:00000000 ce_LoopDirsSingleMultiStep
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2479   .text.ce_LoopRook:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2504   .text.ce_LoopRook:0000000c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2509   .text.ce_LoopBishop:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2534   .text.ce_LoopBishop:0000000c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2539   .text.ce_LoopQueen:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2564   .text.ce_LoopQueen:0000000c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2569   .text.ce_LoopKnight:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2594   .text.ce_LoopKnight:0000000c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2599   .text.ce_LoopKing:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2694   .text.ce_LoopKing:00000084 $d
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 141


C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2699   .text.ce_LoopPawnSideCapture:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2704   .text.ce_LoopPawnSideCapture:00000000 ce_LoopPawnSideCapture
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2772   .text.ce_LoopPawnSideCapture:00000050 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2777   .text.ce_LoopPawn:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2917   .text.chess_ClearMarks:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2922   .text.chess_ClearMarks:00000000 chess_ClearMarks
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2955   .text.chess_ClearMarks:0000001c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2960   .text.chess_MarkMovable:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2965   .text.chess_MarkMovable:00000000 chess_MarkMovable
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2991   .text.chess_MarkMovable:00000018 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:2996   .text.chess_MarkTargetMoves:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3001   .text.chess_MarkTargetMoves:00000000 chess_MarkTargetMoves
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3044   .text.chess_MarkTargetMoves:00000030 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3049   .text.chess_GetNextMarked:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3054   .text.chess_GetNextMarked:00000000 chess_GetNextMarked
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3136   .text.chess_ManualMove:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3141   .text.chess_ManualMove:00000000 chess_ManualMove
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3281   .text.chess_ManualMove:000000b8 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3287   .text.chess_ComputerMove:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3292   .text.chess_ComputerMove:00000000 chess_ComputerMove
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3325   .text.mnu_DrawHome:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3330   .text.mnu_DrawHome:00000000 mnu_DrawHome
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3404   .text.mnu_DrawHome:00000058 $d
                            *COM*:00000004 lrc_u8g
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3411   .text.mnu_DrawEntry:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3416   .text.mnu_DrawEntry:00000000 mnu_DrawEntry
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3529   .text.mnu_DrawEntry:0000009c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3535   .text.mnu_Draw:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3540   .text.mnu_Draw:00000000 mnu_Draw
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3639   .text.mnu_Draw:00000068 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3648   .text.mnu_Step:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3653   .text.mnu_Step:00000000 mnu_Step
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3693   .text.mnu_Step:0000002c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3699   .text.chess_DrawFrame:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3704   .text.chess_DrawFrame:00000000 chess_DrawFrame
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3811   .text.chess_DrawFrame:00000084 $d
                            *COM*:00000001 chess_low_edge
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3819   .text.chess_DrawBoard:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:3824   .text.chess_DrawBoard:00000000 chess_DrawBoard
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4241   .text.chess_DrawBoard:0000027c $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4254   .text.chess_Thinking:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4259   .text.chess_Thinking:00000000 chess_Thinking
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4271   .text.chess_Init:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4276   .text.chess_Init:00000000 chess_Init
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4362   .text.chess_Init:00000070 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4371   .text.chess_Draw:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4376   .text.chess_Draw:00000000 chess_Draw
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4572   .text.chess_Draw:00000108 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4586   .text.chess_Step:00000000 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4591   .text.chess_Step:00000000 chess_Step
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4630   .text.chess_Step:0000002a $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4636   .text.chess_Step:00000036 $t
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4942   .text.chess_Step:000001dc $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5257   .data.chess_boxoffset:00000000 chess_boxoffset
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5167   .data.chess_boxsize:00000000 chess_boxsize
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5068   .rodata.chess_black_pieces_bm:00000000 chess_black_pieces_bm
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5204   .rodata.chess_pieces_body_bm:00000000 chess_pieces_body_bm
ARM GAS  C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s 			page 142


C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5061   .data.chess_target_pos:00000000 chess_target_pos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5184   .data.chess_source_pos:00000000 chess_source_pos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5127   .bss.chess_state:00000000 chess_state
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5197   .bss.chess_key_cmd:00000000 chess_key_cmd
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4975   .bss.chess_key_code:00000000 chess_key_code
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5121   .data.mnu_max:00000000 mnu_max
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5026   .bss.mnu_pos:00000000 mnu_pos
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5017   .data.mnu_list:00000000 mnu_list
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5161   .data.mnu_title:00000000 mnu_title
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4982   .data.chess_piece_to_char:00000000 chess_piece_to_char
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5033   .data.ce_pos_weight:00000000 ce_pos_weight
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4989   .data.ce_piece_weight:00000000 ce_piece_weight
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4976   .bss.chess_key_code:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4978   .data.chess_piece_to_char:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4985   .data.ce_piece_weight:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:4998   .rodata.ce_dir_offset_queen:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5002   .rodata.ce_dir_offset_queen:00000000 ce_dir_offset_queen
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5013   .data.mnu_list:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5027   .bss.mnu_pos:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5029   .data.ce_pos_weight:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5043   .rodata.ce_dir_offset_knight:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5047   .rodata.ce_dir_offset_knight:00000000 ce_dir_offset_knight
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5064   .rodata.chess_black_pieces_bm:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5128   .bss.chess_state:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5130   .rodata.str1.4:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5157   .data.mnu_title:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5170   .rodata.ce_dir_offset_bishop:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5174   .rodata.ce_dir_offset_bishop:00000000 ce_dir_offset_bishop
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5187   .bss.buf.6076:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5191   .bss.buf.6076:00000000 buf.6076
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5198   .bss.chess_key_cmd:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5200   .rodata.chess_pieces_body_bm:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5260   .rodata.ce_dir_offset_rook:00000000 $d
C:\Users\master\AppData\Local\Temp\ccX9Xi6c.s:5264   .rodata.ce_dir_offset_rook:00000000 ce_dir_offset_rook
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
u8g_SetFont
u8g_SetDefaultForegroundColor
u8g_DrawStrP
u8g_DrawFrame
u8g_font_5x7r
u8g_GetStrWidth
u8g_SetDefaultBackgroundColor
u8g_DrawBox
u8g_DrawStr
u8g_font_5x8r
u8g_SetDefaultMidColor
u8g_DrawPixel
u8g_DrawBitmapP
u8g_font_5x7
